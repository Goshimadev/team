(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{84004:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liquidity-locks",function(){return n(27058)}])},27058:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i=n(52322),l=n(92642),o=n(58379),a=n(8560),r=n(53482),d=n(12266),s=n(72375),c=n(72070),u=n(64019),v=n(60740),h=n(72579),m=n.n(h),k=n(19034),p=n.n(k),f=n(2784),x=e=>{let{data:t,showCompletedLocks:n,filter:i}=e,[l,o]=(0,f.useState)();return(0,f.useEffect)(()=>{try{var e,l,a,r,d,s,c;let u=Date.now()/1e3,v=t;if(i){if(i.tokenName){let e=i.tokenName.split("/");2===e.length&&(v=null==t?void 0:t.filter(t=>{var n,i,l,o;return e[0].toLowerCase()===(null===(i=t.token)||void 0===i?void 0:null===(n=i.tokenSymbol)||void 0===n?void 0:n.toLowerCase())&&e[1].toLowerCase()===(null===(o=t.pair)||void 0===o?void 0:null===(l=o.tokenSymbol)||void 0===l?void 0:l.toLowerCase())}))}i.startPeriodStart&&i.startPeriodEnd&&(v=null===(e=v)||void 0===e?void 0:e.filter(e=>{let t=m()(e.event,"createdAt"),n=p()(t).unix();return i.startPeriodStart===i.startPeriodEnd?i.startPeriodStart<=n&&i.startPeriodStart+86400>n:i.startPeriodStart<=n&&i.startPeriodEnd>=n})),i.startPeriodStart&&!i.startPeriodEnd&&(v=null===(l=v)||void 0===l?void 0:l.filter(e=>{let t=m()(e.event,"createdAt"),n=p()(t).unix();return i.startPeriodStart<=n})),i.endPeriodStart&&i.endPeriodEnd&&(v=null===(a=v)||void 0===a?void 0:a.filter(e=>{var t,n,l,o;return i.startPeriodStart===i.startPeriodEnd?i.endPeriodStart<=(null===(l=e.event)||void 0===l?void 0:l.unlockTime)&&i.endPeriodStart+86400>(null===(o=e.event)||void 0===o?void 0:o.unlockTime):i.endPeriodStart<=(null===(t=e.event)||void 0===t?void 0:t.unlockTime)&&i.endPeriodEnd>=(null===(n=e.event)||void 0===n?void 0:n.unlockTime)})),i.endPeriodStart&&!i.endPeriodEnd&&(v=null===(r=v)||void 0===r?void 0:r.filter(e=>{var t;return i.endPeriodStart<=(null===(t=e.event)||void 0===t?void 0:t.unlockTime)})),"All"!==i.status&&(v="Unlocked"===i.status?null===(d=v)||void 0===d?void 0:d.filter(e=>{var t;return u>(null===(t=e.event)||void 0===t?void 0:t.unlockTime)}):null===(s=v)||void 0===s?void 0:s.filter(e=>{var t;return u<(null===(t=e.event)||void 0===t?void 0:t.unlockTime)}))}n&&(v=null===(c=v)||void 0===c?void 0:c.filter(e=>u<e.event.unlockTime)),o(v)}catch(e){console.error(e)}},[t,n,i]),{filteredLocks:l}},y=n(33018),S=n(32867),j=n(76635),w=n.n(j),N=n(97729),P=n.n(N),T=n(55351),g=n(77245),b=n(44304);let E={chainId:"",account:""};function I(e,t){if("setAccount"===t.type)return{...e,chainId:t.payload.chainId,account:t.payload.account};throw Error()}function C(){let[e,t]=(0,f.useState)(),[n,h]=(0,f.useState)(!0),[m,k]=(0,f.useState)(!1),[N,C]=(0,f.useState)(!1),[_,A]=(0,f.useState)(!1),[L,D]=(0,f.useState)(),{address:O}=(0,b.mA)(),{chain:q}=(0,b.LN)(),{data:Z}=(0,b.F6)({address:O,chainId:1}),[F,Y]=(0,f.useState)(""),[M,U]=(0,f.useReducer)(I,E),[z,B]=(0,f.useState)(void 0),[X,H]=(0,f.useState)(),{filteredLocks:V}=x({data:z,showCompletedLocks:_,filter:L}),[W,R]=(0,f.useState)(!1),[G,J]=(0,f.useState)("-"),[K,Q]=(0,f.useState)(!1);(0,f.useEffect)(()=>{(()=>{try{if(Z){Y(Z);return}if(O){Y("".concat(null==O?void 0:O.substring(0,6),"...").concat(null==O?void 0:O.substring(O.length-4,O.length)));return}Y(""),h(!1)}catch(e){console.error(e)}})()},[Z,O]);let $=(0,f.useCallback)(async()=>{try{var e,t;h(!0);let n=await (0,S.gA)(O,!1),i=(0,j.get)(n,"data.data",[]),l=(0,j.get)(n,"data.stats",[]),o=(0,S.A3)(i);H(l),B(o);let a=o.filter(e=>p().unix(Number(e.event.unlockTime))>p()());J((null==a?void 0:a.length)>0?p().unix(null===(t=w().orderBy(a,"event.unlockTime","asc")[0])||void 0===t?void 0:null===(e=t.event)||void 0===e?void 0:e.unlockTime).format("MMM D, YYYY"):"-")}catch(e){console.error(e),B([]),l.Tb(e)}finally{h(!1)}},[O]);(0,f.useEffect)(()=>{try{(null==q?void 0:q.id)&&O?((M.chainId!==(0,S.i6)(q.id)||M.account!==O)&&$(),U({type:v.aO.SET_ACCOUNT,payload:{chainId:(0,S.i6)(q.id),account:O}})):(U({type:v.aO.SET_ACCOUNT,payload:{chainId:"",account:""}}),B([]))}catch(e){console.error(e)}},[O,null==q?void 0:q.id,M.chainId,M.account,$]);let ee=e=>{let t=z.map(t=>t.event.lockDepositId===e.event.lockDepositId?e:t);B(t)},et=e=>{let t=z.filter(t=>t.event.lockDepositId!==e.event.lockDepositId);B(t)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.PB,{title:"Team Finance App - Liquidity Locks",titleTemplate:"%s"}),(0,i.jsx)(P(),{children:(0,i.jsx)("link",{rel:"canonical",href:"https://app.team.finance/liquidity-locks"})}),(0,i.jsxs)(a.Z,{title:"Liquidity locks",className:"space-y-3",hasItems:(null==z?void 0:z.length)>0,walletConnected:!!M.account,isLoading:n,children:[(0,i.jsx)("div",{className:"max-w-xl",children:(0,i.jsxs)(y.ZT,{variant:"paragraph",children:["\uD83D\uDC4B Welcome to your liquidity locks info hub, ",F,". If you have any questions, feel free to contact us in ",(0,i.jsx)(o.Z,{})," ","or"," ",(0,i.jsx)(y.EX,{className:"underline",href:S.UY.telegram,children:(0,i.jsx)("span",{children:"Telegram"})}),"."]})}),(0,i.jsx)(c.Z,{data:[{name:"Number of active locks",value:null==z?void 0:z.filter(e=>!1===e.event.isWithdrawn).length},{name:"Number of locks",value:null==z?void 0:z.length},{name:"Next unlock date",value:G}]}),(0,i.jsxs)("div",{className:"rounded-md border border-gray-200 bg-white p-4",children:[(0,i.jsx)(y.ZT,{className:"mb-3",variant:"title-4",children:"My liquidity token locks total"}),(0,i.jsx)(r.Z,{activeIndex:e,setActiveIndex:t,data:X})]}),z&&(0,i.jsx)(u.Z,{title:"Your liquidity locks",rows:10,filter:(0,i.jsxs)(y.zx,{className:"relative h-11 w-11 !p-0",variant:"secondary",icon:!1,disabled:!z,onClick:()=>{C(!0)},children:[W&&(0,i.jsx)("div",{className:"absolute right-1 top-1 h-1.5 w-1.5 rounded-full bg-blue-600"}),(0,i.jsx)(g.lOx,{className:"h-5 w-5 text-blue-600/60"})]}),switchComp:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(y.rs,{checked:_,onChange:()=>A(e=>!e)}),(0,i.jsx)("span",{className:"text-sm",children:"Hide completed locks"})]}),header:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.zx,{onClick:()=>{window.dataLayer.push({event:"db_create_liquidity_lock"}),Q(!0)},variant:"primary",icon:(0,i.jsx)(g.poH,{className:"text-white-60",size:18}),children:"Create lock"})}),head:["Token","Amount","% of overall supply","Lockup period","Status","Actions"],children:null==V?void 0:V.map((e,t)=>{var n;return(0,i.jsx)(d.Z,{item:e,chainId:M.chainId,index:t,updateLock:ee,deleteLock:et},(null===(n=e.event)||void 0===n?void 0:n.lockDepositId)||t)})})]}),(0,i.jsx)(s.kE,{open:m,setOpen:k}),(0,i.jsx)(s.VV,{open:K,setOpen:Q}),(0,i.jsx)(s.ek,{open:N,setOpen:C,locks:z,setFilter:D,setFilterActive:R})]})}}},function(e){e.O(0,[424,131,713,789,195,149,185,814,686,423,59,41,887,560,565,922,607,774,888,179],function(){return e(e.s=84004)}),_N_E=e.O()}]);