(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{36721:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nft-locks",function(){return n(6292)}])},60205:function(e,t,n){"use strict";var i=n(72579),a=n.n(i),l=n(19034),o=n.n(l),r=n(2784);t.Z=e=>{let{data:t,showCompletedLocks:n,filter:i}=e,[l,d]=(0,r.useState)();return(0,r.useEffect)(()=>{try{var e,l,r,s,c,u,v;let h=Date.now()/1e3,m=t;i&&(i.tokenName&&(m=null==t?void 0:t.filter(e=>{var t,n;return i.tokenName.toLowerCase()===(null===(n=e.token)||void 0===n?void 0:null===(t=n.tokenName)||void 0===t?void 0:t.toLowerCase())})),i.startPeriodStart&&i.startPeriodEnd&&(m=null===(e=m)||void 0===e?void 0:e.filter(e=>{let t=a()(e.event,"createdAt"),n=o()(t).unix();return i.startPeriodStart===i.startPeriodEnd?i.startPeriodStart<=n&&i.startPeriodStart+86400>n:i.startPeriodStart<=n&&i.startPeriodEnd>=n})),i.startPeriodStart&&!i.startPeriodEnd&&(m=null===(l=m)||void 0===l?void 0:l.filter(e=>{let t=a()(e.event,"createdAt"),n=o()(t).unix();return i.startPeriodStart<=n})),i.endPeriodStart&&i.endPeriodEnd&&(m=null===(r=m)||void 0===r?void 0:r.filter(e=>{var t,n,a,l;return i.startPeriodStart===i.startPeriodEnd?i.endPeriodStart<=(null===(a=e.event)||void 0===a?void 0:a.unlockTime)&&i.endPeriodStart+86400>(null===(l=e.event)||void 0===l?void 0:l.unlockTime):i.endPeriodStart<=(null===(t=e.event)||void 0===t?void 0:t.unlockTime)&&i.endPeriodEnd>=(null===(n=e.event)||void 0===n?void 0:n.unlockTime)})),i.endPeriodStart&&!i.endPeriodEnd&&(m=null===(s=m)||void 0===s?void 0:s.filter(e=>{var t;return i.endPeriodStart<=(null===(t=e.event)||void 0===t?void 0:t.unlockTime)})),"All"!==i.status&&(m="Unlocked"===i.status?null===(c=m)||void 0===c?void 0:c.filter(e=>{var t;return h>(null===(t=e.event)||void 0===t?void 0:t.unlockTime)}):null===(u=m)||void 0===u?void 0:u.filter(e=>{var t;return h<(null===(t=e.event)||void 0===t?void 0:t.unlockTime)}))),n&&(m=null===(v=m)||void 0===v?void 0:v.filter(e=>h<e.event.unlockTime)),d(m)}catch(e){console.error(e)}},[t,n,i]),{filteredLocks:l}}},6292:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var i=n(52322),a=n(92642),l=n(58379),o=n(8560),r=n(53482),d=n(12266),s=n(72375),c=n(72070),u=n(64019),v=n(60740),h=n(60205),m=n(33018),f=n(32867),k=n(76635),p=n.n(k),x=n(19034),N=n.n(x),T=n(97729),S=n.n(T),j=n(55351),P=n(2784),w=n(77245),g=n(44304);let y={chainId:"",account:""};function E(e,t){if("setAccount"===t.type)return{...e,chainId:t.payload.chainId,account:t.payload.account};throw Error()}function b(){let[e,t]=(0,P.useState)(),[n,x]=(0,P.useState)(!1),[T,b]=(0,P.useState)(!1),[I,_]=(0,P.useState)(!1),[C,A]=(0,P.useState)(),[F,Z]=(0,P.useState)(!1),{address:D}=(0,g.mA)(),{chain:L}=(0,g.LN)(),{data:O}=(0,g.F6)({address:D,chainId:1}),[Y,M]=(0,P.useState)(""),[U,B]=(0,P.useState)("-"),[X,z]=(0,P.useReducer)(E,y),[H,W]=(0,P.useState)(void 0),[q,R]=(0,P.useState)(),{filteredLocks:G}=(0,h.Z)({data:H,showCompletedLocks:T,filter:C}),[J,K]=(0,P.useState)(!1);(0,P.useEffect)(()=>{(()=>{if(O){M(O);return}if(D){M("".concat(null==D?void 0:D.substring(0,6),"...").concat(null==D?void 0:D.substring(D.length-4,D.length)));return}M("")})()},[O,D]);let Q=(0,P.useCallback)(async()=>{try{var e,t;Z(!0);let n=await (0,f.a1)(D,!1),i=(0,k.get)(n,"data.data",[]),a=(0,k.get)(n,"data.stats",[]),l=(0,f.A3)(i);R(a);let o=l.filter(e=>N().unix(Number(e.event.unlockTime))>N()());B((null==o?void 0:o.length)>0?N().unix(null===(t=p().orderBy(o,"event.unlockTime","asc")[0])||void 0===t?void 0:null===(e=t.event)||void 0===e?void 0:e.unlockTime).format("MMM D, YYYY"):"-"),W(l)}catch(e){console.error(e),W([]),a.Tb(e)}finally{Z(!1)}},[D]);(0,P.useEffect)(()=>{(null==L?void 0:L.id)&&D?((X.chainId!==(0,f.i6)(L.id)||X.account!==D)&&Q(),z({type:v.aO.SET_ACCOUNT,payload:{chainId:(0,f.i6)(L.id),account:D}})):(z({type:v.aO.SET_ACCOUNT,payload:{chainId:"",account:""}}),W([]))},[D,L,X.chainId,X.account,Q]);let V=e=>{let t=H.map(t=>t.event.lockDepositId===e.event.lockDepositId?e:t);W(t)},$=e=>{let t=H.filter(t=>t.event.lockDepositId!==e.event.lockDepositId);W(t)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.PB,{title:"Team Finance App - NFT Locks",titleTemplate:"%s"}),(0,i.jsx)(S(),{children:(0,i.jsx)("link",{rel:"canonical",href:"https://app.team.finance/nft-locks"})}),(0,i.jsxs)(o.Z,{title:"NFT locks",className:"space-y-3",hasItems:(null==H?void 0:H.length)>0,walletConnected:!!X.account,isLoading:F,children:[(0,i.jsx)("div",{className:"max-w-xl",children:(0,i.jsxs)(m.ZT,{variant:"paragraph",children:["\uD83D\uDC4B Welcome to your NFT locks info hub, ",Y,". If you have any questions, feel free to contact us in ",(0,i.jsx)(l.Z,{})," or"," ",(0,i.jsx)(m.EX,{className:"underline",href:f.UY.telegram,children:(0,i.jsx)("span",{children:"Telegram"})}),"."]})}),(0,i.jsx)(c.Z,{data:[{name:"Number of active locks",value:null==H?void 0:H.filter(e=>!1===e.event.isWithdrawn).length},{name:"Number of locks",value:null==H?void 0:H.length},{name:"Next unlock date",value:U}]}),(0,i.jsxs)("div",{className:"rounded-md border border-gray-200 bg-white p-4",children:[(0,i.jsx)(m.ZT,{className:"mb-3",variant:"title-4",children:"My NFT locks total"}),(0,i.jsx)(r.Z,{activeIndex:e,setActiveIndex:t,data:q})]}),(0,i.jsx)(u.Z,{title:"Your NFT locks",rows:10,switchComp:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(m.rs,{checked:T,onChange:()=>b(e=>!e)}),(0,i.jsx)("span",{className:"text-sm",children:"Hide completed locks"})]}),filter:(0,i.jsxs)(m.zx,{className:"relative h-11 w-11 !p-0",variant:"secondary",icon:!1,disabled:!H,onClick:()=>{_(!0)},children:[J&&(0,i.jsx)("div",{className:"absolute right-1 top-1 h-1.5 w-1.5 rounded-full bg-blue-600"}),(0,i.jsx)(w.lOx,{className:"h-5 w-5 text-blue-600/60"})]}),header:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.ZP,{onClick:()=>{window.dataLayer.push({event:"db_create_nft_lock"})},href:"/lockups/nft",variant:"primary",icon:(0,i.jsx)(w.poH,{className:"text-white-60",size:18}),children:"Create NFT lock"})}),head:["Token","Amount","Lockup period","Status","Actions"],children:null==G?void 0:G.map((e,t)=>{var n;return(0,i.jsx)(d.Z,{item:e,chainId:X.chainId,index:t,updateLock:V,deleteLock:$},(null===(n=e.event)||void 0===n?void 0:n.lockDepositId)||t)})})]}),(0,i.jsx)(s.kE,{open:n,setOpen:x}),(0,i.jsx)(s.sZ,{open:I,setOpen:_,locks:H,setFilter:A,setFilterActive:K})]})}}},function(e){e.O(0,[424,131,713,789,195,149,185,814,686,423,59,41,887,560,565,922,607,774,888,179],function(){return e(e.s=36721)}),_N_E=e.O()}]);