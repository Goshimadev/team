(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{18126:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vesting",function(){return s(92904)}])},46539:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(52322);s(1346);var r=s(72779),n=s.n(r),l=s(73053),i=s(2784),o=s(37726),c=s.n(o),d=s(77245),m=s(30924);function u(e){let{selected:t,disabled:s,setUnlockDate:r,className:o,dateFormat:u,timeFormat:h,showTimeSelect:x}=e,[p,f]=(0,i.useState)(!1),[g,b]=(0,i.useState)(!1),y=()=>{b(!0)},v=e=>{try{r(e),(t.getHours()!==e.getHours()||t.getMinutes()!==e.getMinutes())&&(b(!1),f(!1))}catch(e){console.error(e)}};return(0,a.jsxs)("div",{"data-testid":"date-time-picker-container",className:"flex h-11 w-full items-center rounded-md border border-gray-200 hover:bg-gray-50 ".concat(o," ").concat(p?"border-blue-400 outline-none ring-2 ring-blue-300":""," ").concat(s?"cursor-not-allowed bg-gray-50 text-gray-600":""),children:[(0,a.jsx)(c(),{wrapperClassName:"w-full",className:"text-body focus:ring-none h-[42px] w-full rounded-md px-3 text-gray-700 transition duration-150 placeholder:text-gray-400 hover:bg-gray-50 focus:border-none focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-600 disabled:hover:bg-gray-50",dateFormat:u,timeFormat:h,disabled:s,selected:t,onChange:e=>{v(e)},onFocus:()=>f(!0),onClickOutside:()=>{f(!1),b(!1)},onInputClick:()=>b(!0),open:g,nextMonthButtonLabel:">",previousMonthButtonLabel:"<",showTimeSelect:x,minDate:new Date,showPopperArrow:!1,timeInputLabel:"Time:",showTimeInput:!x,renderCustomHeader:e=>{let{date:t,decreaseMonth:s,increaseMonth:r,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between pb-0.5 pl-3.5 pr-2",children:[(0,a.jsx)("span",{className:"text-lg text-[#222222]",children:(0,l.default)(t,"MMMM yyyy")}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)("button",{type:"button",className:n()({"cursor-not-allowed opacity-50":i},"inline-flex rounded border border-gray-200 bg-white p-1 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none"),onClick:s,disabled:i,children:(0,a.jsx)(m.G$x,{className:"text-gray-600",size:20})}),(0,a.jsx)("button",{type:"button",className:n()({"cursor-not-allowed opacity-50":o},"inline-flex rounded border border-gray-200 bg-white p-1 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none"),onClick:r,disabled:o,children:(0,a.jsx)(m.BM9,{className:"text-gray-600",size:20})})]})]})}}),(0,a.jsx)("button",{type:"button",onClick:()=>y(),className:"inset-y-0 right-3 flex items-center px-2",children:(0,a.jsx)(d.R1q,{className:"h-4 w-4 text-[#222222]/60"})})]})}u.defaultProps={dateFormat:"MMM dd,yyyy",timeFormat:"h:mm aa",className:"",showTimeSelect:!0,disabled:!1}},92904:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return eW},default:function(){return eB}});var a,r,n,l,i=s(52322),o=s(2784),c=s(31001),d=s(13955),m=s(77245);m.UY3;var u=s(32867),h=s(84538),x=s(55351),p=s(44304),f={src:"/_next/static/media/logo-header.17238289.png",height:44,width:103,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAGFBMVEUiJiYfHyUhISEdS+oUW+MjIyMUWOcQZ+Hnz3OZAAAACHRSTlMFFVaXu0hLXli0AJgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAcSURBVHicY2BnY4AAFmZGJlYmJkYGFmYQl5ERAAK3ACuPNielAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3},g={src:"/_next/static/media/logo-header-white.ed88ca49.png",height:44,width:103,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAGFBMVEX///////////////////////////////8pK8DIAAAACHRSTlMDDVhJl7shFnxW7H4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAgSURBVHicY2BiZmBkAAFWFkYmZiYmNgZWFgZGRgZ2RgACXgAzkAyiJwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3},b=s(15324),y=s(92642),v=s(35175),w=s(81713);let j=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];var N=s(24407),k=s(56780),S=s(16962),A=s(33018),E=s(10528),T=s(90711),D=s(99268),C=s(59656),L=s(18650),_=s(34352);function O(e){let{open:t,setOpen:s,amount:a,symbol:r,feeAmount:n,feeCurrency:l,isTestnet:o}=e;return(0,i.jsxs)(_.Z,{open:t,setOpen:()=>s(!1),children:[(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)(m.sOR,{className:"mr-2 h-24 w-24 animate-spin text-blue-700","aria-hidden":"true"})}),(0,i.jsx)("h1",{className:"mt-3 text-lg font-medium",children:"Waiting For Confirmation"}),(0,i.jsxs)("p",{className:"text-neutral-700",children:["Locking"," ",(0,i.jsxs)("span",{className:"font-medium",children:[a," ",r]})," ",!o&&(0,i.jsx)("span",{className:"font-medium",children:"with a fee of ".concat(n," ").concat(l)})]}),(0,i.jsx)("span",{className:"mt-3 block rounded-md border border-blue-200 bg-blue-100 px-2 py-1 text-blue-800",children:"Confirm this transaction in your wallet"})]})}function I(e){let{open:t,setOpen:s,chainId:a,transactionHash:r}=e;return(0,i.jsx)(_.Z,{open:t,setOpen:()=>s(!1),children:(0,i.jsxs)("div",{className:"w-72",children:[(0,i.jsx)("div",{className:"my-4 flex items-center justify-center",children:(0,i.jsx)(m.hXj,{className:"mr-2 h-24 w-24 animate-bounce text-blue-700","aria-hidden":"true"})}),(0,i.jsx)("h1",{className:"mb-2 text-lg font-medium",children:"Transaction Submitted"}),(0,i.jsx)(A.EX,{className:"flex justify-center font-medium text-blue-600 hover:underline",href:(0,u.wE)(a,r),children:"View on explorer"}),(0,i.jsx)(A.zx,{className:"mt-4",fullWidth:!0,onClick:()=>s(!1),children:"Close"})]})})}function M(e){let{dispatch:t,state:s,step:a,index:r,approveEvent:n="db_vesting_gave_permission",lockEventFailure:l="db_vesting_fail",lockEventSuccess:m="db_vesting_success"}=e,[h,x]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),[_,M]=(0,o.useState)(!1),[R,P]=(0,o.useState)(!1),[U,F]=(0,o.useState)(!1),[H,W]=(0,o.useState)(!1),[B,G]=(0,o.useState)(E.O$.from(-1)),[V,Z]=(0,o.useState)(E.O$.from(2e6)),{address:q,status:z}=(0,p.mA)(),{data:Y}=(0,p.mx)(),[X,J]=(0,o.useState)(!1),[K,Q]=(0,o.useState)(!1),{data:$}=(0,p.KQ)({address:q,enabled:"connected"===z}),ee=async(e,s,a)=>{console.error(a,e),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")||e.message.includes("User rejected request")?t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:s}}):(y.Tb(e),t({type:b.a.SET_OUTCOME,payload:{success:!1,errorMsg:"Your vesting transaction failed. Please try again."}}))},{config:et}=(0,p.PJ)({address:s.tokenInfo.address,abi:j,functionName:"approve",chainId:parseInt(s.walletDetails.chainId,16),args:[(0,N.g)(s.walletDetails.chainId).vestingFactoryV3,T.Bz]}),{write:es,data:ea}=(0,p.GG)({...et,onError(e){ee(e,"There was an error. Please try again.","error on approving vesting factory"),P(!1)},onMutate(){P(!0),t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:""}})}});(0,p.BX)({hash:null==ea?void 0:ea.hash,enabled:R,onSuccess(){F(!0)}});let{config:er}=(0,p.PJ)({address:(0,N.g)(s.walletDetails.chainId).vestingFactoryV3,abi:w.V6,functionName:"createVesting",args:[s.tokenInfo.address,s.vestingDetails.merkleRoot,s.vestingDetails.totalAmount],overrides:{value:B},enabled:B.gte(0)&&f,onSettled(e){var t,s;Z(null!==(s=null==e?void 0:null===(t=e.request)||void 0===t?void 0:t.gasLimit.mul(130).div(100))&&void 0!==s?s:E.O$.from(2e6))}}),{write:en,data:el}=(0,p.GG)({...er,request:{...er.request,gasLimit:V},onMutate(){J(!0),t({type:b.a.SET_REQUESTING_VESTING}),x(!0),_&&window.dataLayer.push({event:n})},async onSuccess(){W(!0)},onError(e){window.dataLayer.push({event:l}),console.error("error deploying vesting v3",e),J(!1),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")||e.message.includes("User rejected request")?t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:"User rejected request"}}):(y.Tb(e),t({type:b.a.SET_OUTCOME,payload:{success:!1,errorMsg:"Your vesting transaction failed."}})),x(!1)}});(0,p.BX)({hash:null==el?void 0:el.hash,enabled:H,async onSuccess(e){J(!1),t({type:b.a.SET_TRANSACTION_HASH,payload:{transactionHash:el.hash}}),Q(!0),window.dataLayer.push({event:m});let a=new D.vU(w.V6),r=(0,N.g)(s.walletDetails.chainId).vestingFactoryV3,n=e.logs.find(e=>e.address===r),l=a.parseLog(n);await (0,u.Vb)(s.walletDetails.chainId,el.hash),Q(!1),t({type:b.a.SET_OUTCOME,payload:{success:!0,errorMsg:null,vestingAddress:l.args.vestingAddr}})},async onError(e){console.error(e),Q(!1),t({type:b.a.SET_OUTCOME,payload:{success:!1,errorMsg:"Your vesting transaction failed."}})}});let ei=(0,o.useCallback)(async()=>{if(s.activeStep===r){x(!0);try{let e=(0,N.g)(s.walletDetails.chainId).vestingFactoryV3,a={address:s.tokenInfo.address,abi:j},r={address:e,abi:w.V6},[n,l,i]=await (0,L.Ap)({contracts:[{...a,functionName:"allowance",args:[q,e]},{...r,functionName:"getFeeInETH",args:[s.tokenInfo.address]},{...r,functionName:"whitelistedWallets",args:[q]}]}),o=!n.isZero()&&n.gte(s.vestingDetails.totalAmount);(M(o),g(o),i)?G(E.O$.from(0)):(G(l),(null==$?void 0:$.value.lt(l))&&t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:"Insufficient ".concat((0,u.tl)(s.walletDetails.chainId)," to pay Lock Fee")}}))}catch(e){console.error(e),t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:"Couldn't fetch your wallet details. Please try again."}}),y.Tb(e)}finally{x(!1)}}},[s.activeStep,s.walletDetails.chainId,s.tokenInfo.address,s.vestingDetails.totalAmount,r,$,q,t]);return(0,o.useEffect)(()=>{Y&&q&&ei()},[Y,q,ei]),(0,o.useEffect)(()=>{let e=async()=>{try{let e=(0,N.g)(s.walletDetails.chainId).vestingFactoryV3,a=await (0,L.a4)({address:s.tokenInfo.address,abi:j,functionName:"allowance",args:[q,e]}),r=a.gte(s.vestingDetails.totalAmount);g(r),window.dataLayer.push({event:n}),r||t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:"Couldn't approve your token. Allowance too small. Please try again."}})}catch(e){t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:"Couldn't approve your token. Allowance too small. Please try again."}}),g(!1)}finally{F(!1),P(!1)}};U&&q&&e()},[q,U,n,t,Y,s.tokenInfo.address,s.vestingDetails.totalAmount,s.walletDetails.chainId]),(0,i.jsxs)("div",{children:[X&&(0,i.jsx)(O,{open:X,setOpen:()=>J(!1),amount:C.formatUnits(s.vestingDetails.totalAmount,s.tokenInfo.decimals),symbol:s.tokenInfo.symbol,feeAmount:C.formatEther(B),feeCurrency:(0,u.tl)(s.walletDetails.chainId),isTestnet:(0,u.Jg)(s.walletDetails.chainId)}),K&&(0,i.jsx)(I,{open:K,setOpen:()=>Q(!1),chainId:s.walletDetails.chainId,transactionHash:s.transactionHash}),s.activeStep===r?(0,i.jsxs)("div",{className:"overflow-hidden rounded-md bg-white",children:[s.errorMsg&&(0,i.jsx)(v.b,{children:s.errorMsg}),f&&(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h1",{className:"text-lg font-semibold",children:"Create contract"}),(0,i.jsx)("p",{className:"mt-1 text-sm",children:"By approving the contract, you confirm the following details are correct:"}),(0,i.jsxs)("div",{className:"mt-2 justify-between rounded-lg bg-gray-100 p-2 sm:hidden",children:[(0,i.jsxs)("div",{className:"flex flex-col pb-3",children:[(0,i.jsx)("span",{className:"text-neutral-500",children:"Wallet"}),(0,i.jsx)("div",{className:"mt-1 inline-flex items-center gap-x-1.5 font-medium",children:(0,S.Xn)(s.walletDetails.account)})]}),(0,i.jsxs)("div",{className:"flex flex-col py-3",children:[(0,i.jsx)("span",{className:"text-neutral-500",children:"Blockchain"}),(0,i.jsxs)("div",{className:"mt-1 inline-flex items-center gap-x-1.5 font-medium",children:[(0,i.jsx)("img",{src:(0,u.IC)(d.ZP,s.walletDetails.chainId,"icon"),className:"h-6 w-6 object-contain",alt:"blockchain-logo"}),"".concat((0,u.IC)(d.ZP,s.walletDetails.chainId,"name"))]})]}),(0,i.jsxs)("div",{className:"flex flex-col py-3",children:[(0,i.jsx)("span",{className:"text-neutral-500",children:"Token"}),(0,i.jsxs)("div",{className:"mt-1 inline-flex items-center gap-x-1.5 font-medium",children:[(0,i.jsx)(A.Oi,{alt:"logo",src:(0,k.XP)(s.tokenInfo.address),chainId:s.walletDetails.chainId,className:"h-6 w-6 object-contain"}),s.tokenInfo.symbol]})]}),(0,i.jsxs)("div",{className:"flex flex-col py-3",children:[(0,i.jsx)("span",{className:"text-neutral-500",children:"Total vesting amount"}),(0,i.jsx)("span",{className:"mt-1 font-medium",children:"".concat(C.formatUnits(s.vestingDetails.totalAmount,s.tokenInfo.decimals)," ").concat(s.tokenInfo.symbol)})]}),(0,i.jsxs)("div",{className:"flex flex-col py-3",children:[(0,i.jsx)("span",{className:"text-neutral-500",children:"Fee"}),(0,i.jsxs)("span",{className:"font-medium",children:[C.formatUnits(B,18)," ",(0,u.tl)(s.walletDetails.chainId)]})]})]}),(0,i.jsx)("div",{className:"my-4 hidden overflow-x-auto rounded-lg border border-gray-200 sm:block",children:(0,i.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold uppercase text-gray-900",children:"Wallet"}),(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold uppercase text-gray-900",children:"Blockchain"}),(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold uppercase text-gray-900",children:"Token"}),(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold uppercase text-gray-900",children:"Total vesting amount"}),(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold uppercase text-gray-900",children:"Fee"})]})}),(0,i.jsx)("tbody",{className:"bg-white",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium sm:pr-6",children:(0,S.Xn)(s.walletDetails.account)}),(0,i.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium sm:pr-6",children:(0,i.jsxs)("div",{className:"mt-1 inline-flex items-center gap-x-1.5 font-medium",children:[(0,i.jsx)("img",{src:(0,u.IC)(d.ZP,s.walletDetails.chainId,"icon"),className:"h-6 w-6 object-contain",alt:"blockchain-logo"}),"".concat((0,u.IC)(d.ZP,s.walletDetails.chainId,"name"))]})}),(0,i.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium sm:pr-6",children:(0,i.jsxs)("div",{className:"mt-1 inline-flex items-center gap-x-1.5 font-medium",children:[(0,i.jsx)(A.Oi,{alt:"logo",src:(0,k.XP)(s.tokenInfo.address),chainId:s.walletDetails.chainId,className:"h-6 w-6 object-contain"}),s.tokenInfo.symbol]})}),(0,i.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium sm:pr-6",children:"".concat(C.formatUnits(s.vestingDetails.totalAmount,s.tokenInfo.decimals)," ").concat(s.tokenInfo.symbol)}),(0,i.jsxs)("td",{className:"relative whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium sm:pr-6",children:[C.formatUnits(B,18)," ",(0,u.tl)(s.walletDetails.chainId)]})]})})]})})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(A.zx,{className:"w-full sm:w-auto",disabled:h,onClick:()=>en(),children:"Confirm transaction"})})]}),!f&&(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h1",{className:"text-lg font-semibold",children:"Create contract"}),(0,i.jsx)("p",{className:"mt-1 text-sm",children:"We need your authorisation before using the token. This only needs to be done once."}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(A.zx,{className:"w-full sm:w-auto",disabled:h||R,isLoading:R,onClick:()=>es(),children:"Give permission"})})]})]}):(0,i.jsx)(c.sP,{activeStep:s.activeStep,index:r,step:a,goToStep:()=>t({type:b.a.GO_TO_STEP,payload:r})})]})}O.defaultProps={isTestnet:!1};let R=[{question:"What is Token Vesting?",answer:"Token Vesting involves locking a portion of a token supply and gradually releasing it over a set vesting period according to a vesting schedule. This process builds trust and credibility among investors by reinforcing security measures, and ensures that tokens are released in a secure and controlled manner."},{question:"Why do I need to connect my wallet?",answer:"Connecting your wallet avoids the need to create a username and password. It allows Team Finance to correctly identify the vesting contracts which belong to you so that you can adjust these in the future if needed, and also to claim your tokens."},{question:"How much does it cost?",answer:"$100USD, paid in the native token of the blockchain your token is built on e.g. if building on Binance Smart Chain, $100USD worth of BNB."},{question:"What is the difference between an investor and employee contract?",answer:"The main difference between the two is that the project admins have the ability to end vesting contracts for employees. This is not possible under an investor vesting contract."},{question:"Why won't it accept my uploaded file?",answer:"Normally this is an issue with formatting. Please make sure to revise the Vesting Template Example (available for download in the ‘add vesting details’ section) and make sure you comply with the requirements outlined in that document."},{question:"What is a lockup period?",answer:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"A lockup period, or cliff, are commonly used in company vesting plans. These plans are often 4 years in length, with a 1 year lockup/cliff, meaning that an employee or investor does not receive any tokens during the first year. After the first year, they receive their tokens normally as per the vesting cadence."}),(0,i.jsx)("p",{children:"Lockups are important because they incentivise long-term alignment and commitment to your company, and reduce short-term sell pressure."})]})},{question:"Can I organise a call with someone from Team Finance?",answer:(0,i.jsxs)("p",{children:["Absolutely! We’re happy to chat. Please contact us on"," ",(0,i.jsx)(A.EX,{className:"underline",href:u.UY.telegram,children:(0,i.jsx)("span",{children:"Telegram"})}),"."]})},{question:"Where will I be able to see my vested tokens after deploying the contract?",answer:(0,i.jsxs)("p",{children:["Tokens can be withdrawn via our"," ",(0,i.jsx)(A.EX,{className:"underline",href:"/claim",children:(0,i.jsx)("span",{children:"‘Claims’"})})," ","dashboard. Here investors and employees will also have access to a dashboard and the ability to buy/sell their tokens directly from the platform."]})},{question:"Where can I find more information about Vesting?",answer:(0,i.jsxs)("p",{children:["Check out our"," ",(0,i.jsx)(A.EX,{className:"underline",href:u.UY.gitbook,children:(0,i.jsx)("span",{children:"Gitbooks"})})," ","for more information."]})}];var P=s(46782),U=s(96577),F=s.n(U),H=s(72282),W=s.n(H),B=s(30924),G=s(18978),V=s(65186),Z=s(56958),q=s(59220);function z(e){let{state:t,startOver:s,href:a,claimHref:r,eventSuccess:n="db_vesting_visit_page",eventsCertification:l="db_vesting"}=e,[c,d]=(0,o.useState)(!1),m=e=>{(0,P.saveAs)(e,e)};return(0,i.jsxs)("div",{className:"from-light-blue flex min-h-screen w-full flex-col justify-between bg-gradient-to-r to-blue-700 px-2 sm:px-16 md:px-24 xl:px-40",children:[(0,i.jsxs)("div",{className:"flex items-center py-2",children:[(0,i.jsx)(F(),{src:g,alt:"header-logo"}),(0,i.jsx)("div",{className:"mx-1 h-12 w-0.5 bg-gray-100 sm:mx-2"}),(0,i.jsxs)(A.EX,{href:a,className:"flex items-center font-medium text-white",children:[(0,i.jsx)(V.sG8,{className:"mr-4 h-4 w-4 opacity-60"}),"Back to home page"]})]}),t.success?(0,i.jsxs)("div",{className:"mt-6 grid h-full w-full grid-cols-1 md:grid-cols-5 md:gap-8",children:[(0,i.jsxs)("div",{className:"flex flex-col justify-center md:col-span-3",children:[(0,i.jsx)("div",{className:"hidden md:block",children:(0,i.jsx)(F(),{src:"/assets/vesting/check-circle-white.svg",alt:"check-icon",width:48,height:48})}),(0,i.jsx)("div",{className:"md:hidden",children:(0,i.jsx)(F(),{src:"/assets/vesting/check-circle-white.svg",alt:"check-icon",width:32,height:32})}),(0,i.jsx)("h1",{className:"mt-2 text-2xl font-medium text-white md:text-3xl",children:"Your vesting contract was deployed successfully!"}),(0,i.jsx)("p",{className:"mt-4 text-sm font-thin text-gray-100",children:"Let your investors and community know that their tokens are in safe hands. We've prepared a media kit for you to share the good news on your website and social media!"}),(0,i.jsxs)("div",{className:"mt-4 md:flex",children:[(0,i.jsxs)(A.ZP,{variant:"secondary",className:"flex w-full items-center justify-center rounded-md bg-white !px-6 text-sm font-light text-black md:w-auto",href:r,onClick:()=>window.dataLayer.push({event:n}),children:[(0,i.jsx)("p",{className:"text-sm font-normal text-black",children:"Visit claim tokens page"}),(0,i.jsx)(B.BM9,{className:"ml-1 text-gray-500"})]}),(0,i.jsxs)(A.EX,{className:" mt-2 flex w-full items-center justify-center !px-6 text-gray-100 md:mt-0 md:w-auto",href:(0,u.wE)(t.walletDetails.chainId,t.transactionHash),children:[(0,i.jsx)("p",{className:"text-sm font-normal",children:"View on block explorer"}),(0,i.jsx)(V.wgi,{className:"ml-2 h-4 w-4 shrink-0"})]})]})]}),(0,i.jsx)("div",{className:"my-4 flex flex-col justify-center md:col-span-2 md:m-0",children:(0,i.jsxs)("div",{className:"flex flex-col rounded-lg bg-white p-4",children:[(0,i.jsx)("h1",{className:"mb-1 text-sm font-medium",children:"Download certification badge"}),(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsx)("p",{className:"text-xs",children:"1. Download the graphics"}),(0,i.jsx)("p",{className:"text-xs",children:"2. Copy the vesting URL"}),(0,i.jsx)("p",{className:"text-xs",children:"3. Embed it on your website footer"}),(0,i.jsx)("p",{className:"text-xs",children:"4. Share announcement"})]}),(0,i.jsxs)("div",{className:"mt-2 flex w-full text-xs",children:[(0,i.jsxs)("button",{className:"mr-1 flex w-full items-center justify-center rounded-md border border-blue-800 bg-white text-xs font-medium text-blue-800",type:"button",onClick:e=>{window.dataLayer.push({event:"".concat(l,"_badge_one")}),e.preventDefault(),m("/icons/TokenBadgeWhite.svg")},children:[(0,i.jsx)("div",{className:"mr-1 flex items-center",children:(0,i.jsx)(F(),{src:"/assets/vesting/swapLogoAvatar.svg",alt:"swap-avatar",height:16,width:16})}),"Vesting Secured by Team Finance"]}),(0,i.jsx)("button",{type:"button",className:"rounded-md bg-gray-100 p-2 text-sm font-medium",onClick:e=>{window.dataLayer.push({event:"".concat(l,"_badge_one_small")}),e.preventDefault(),m("/icons/TokenBadgeWhite.svg")},children:(0,i.jsx)(V.qm7,{className:"h-6 w-6 text-gray-600"})})]}),(0,i.jsxs)("div",{className:"mt-2 flex ",children:[(0,i.jsxs)("button",{type:"button",className:"mr-1 flex w-full items-center justify-center rounded-md bg-gradient-to-r to-blue-700 text-sm text-white",onClick:e=>{window.dataLayer.push({event:"".concat(l,"_badge_two")}),e.preventDefault(),m("/icons/TokensSecured.png")},children:[(0,i.jsx)("div",{className:"mr-2 flex items-center",children:(0,i.jsx)(F(),{src:"/assets/vesting/megaphone.svg",alt:"magephone-icon",height:16,width:16})}),"Announcement Graphic"]}),(0,i.jsx)("button",{type:"button",className:"rounded-md bg-gray-100 p-2 text-sm font-medium",onClick:e=>{window.dataLayer.push({event:"".concat(l,"badge_two_small")}),e.preventDefault(),m("/icons/TokensSecured.png")},children:(0,i.jsx)(V.qm7,{className:"h-6 w-6 text-gray-600"})})]}),(0,i.jsx)(W(),{text:"https://www.team.finance/view-coin/".concat(t.tokenInfo.address,"?name=").concat(t.tokenInfo.name,"&symbol=").concat(t.tokenInfo.symbol,"&chainid=").concat(t.walletDetails.chainId),onCopy:()=>{window.dataLayer.push({event:"".concat(l,"_badge_url")}),d(!0),setTimeout(()=>{d(!1)},1500)},children:(0,i.jsx)("div",{className:"mt-2 flex items-center justify-center rounded-lg bg-gray-100 p-2 text-center hover:cursor-pointer",children:(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)("p",{className:"text-sm",children:"Copy vesting URL"}),c?(0,i.jsx)("div",{className:"ml-2 flex items-center justify-center",children:(0,i.jsx)(G.FJM,{className:"text-green-600",size:14})}):(0,i.jsx)("div",{className:"flex items-center justify-center text-gray-600",children:(0,i.jsx)(V._qq,{className:"ml-2 h-4 w-4"})})]})})})]})})]}):(0,i.jsxs)("div",{className:"mt-6 grid h-full w-full grid-cols-1 md:grid-cols-5 md:gap-8",children:[(0,i.jsxs)("div",{className:"flex flex-col justify-center md:col-span-3",children:[(0,i.jsx)("div",{className:"hidden md:flex",children:(0,i.jsx)(F(),{src:q.Z,width:64,height:64,alt:"error-icon"})}),(0,i.jsx)("div",{className:"md:hidden",children:(0,i.jsx)(F(),{src:q.Z,width:48,height:48,alt:"error-icon"})}),(0,i.jsx)("h1",{className:"mt-6 text-[32px] font-semibold leading-10 text-white md:text-5xl md:leading-[3.625rem]",children:"Transaction failed!"}),(0,i.jsxs)("p",{className:"mt-6 text-base font-normal text-gray-100 md:text-xl md:leading-8",children:["".concat(t.errorMsg," Please try again or")," ",(0,i.jsx)(A.EX,{className:"underline",href:u.UY.telegram,children:"contact our support"}),"."]}),(0,i.jsxs)("div",{className:"mb-2 mt-6 sm:mb-0 md:flex",children:[(0,i.jsx)(A.zx,{className:"flex w-full items-center justify-center rounded-md !px-10 !py-3 text-base text-black md:w-auto",variant:"secondary",onClick:s,icon:!1,children:(0,i.jsx)("span",{className:"font-semibold text-[#1F4AE9]",children:"Try again"})}),(0,i.jsxs)(A.EX,{className:"mt-2 flex w-full items-center justify-center !px-6 md:ml-6 md:mt-0 md:w-auto",href:(0,u.wE)(t.walletDetails.chainId,t.transactionHash),children:[(0,i.jsx)("p",{className:"text-base font-semibold text-white",children:"More details"}),(0,i.jsx)(V.wgi,{className:"ml-2.5 h-4 w-4 shrink-0 text-white/60"})]})]})]}),(0,i.jsx)("div",{className:"my-4 flex flex-col items-center justify-center md:col-span-2 md:m-0",children:(0,i.jsx)(F(),{src:Z.Z,alt:"tx-failed-image"})})]}),(0,i.jsx)("div",{className:"h-16"})]})}z.defaultProps={href:"/",claimHref:"/claim"};var Y=s(58194);function X(e){var t,s;let{dispatch:a,state:r,step:n,index:l,event:d="db_liquidity_lock_token_selected"}=e,[m,h]=(0,o.useState)(!1),[x,f]=(0,o.useState)("-"),[g,v]=(0,o.useState)(""),{address:w}=(0,p.mA)(),{data:j}=(0,p.mx)();async function N(e){v(e);try{if(h(!0),Y.isAddress(e)){let t=await (0,u.Fp)(e,j),s=await (0,u.Q3)(e,j),r=await (0,u.db)(e,w,j),n=await (0,u.Yc)(e,j);f((0,u.xG)(Number(C.formatUnits(r,s)))),t&&s?a({type:b.a.SET_TOKEN_INFO,payload:{tokenInfo:{address:e,name:n,symbol:t,decimals:s,balance:r,errorMsg:""}}}):a({type:b.a.RESET_TOKEN_INFO,payload:{errorMsg:"Token address is invalid."}})}else a({type:b.a.RESET_TOKEN_INFO,payload:{errorMsg:"Token address is invalid."}})}catch(e){console.error(e),a({type:b.a.RESET_TOKEN_INFO,payload:{errorMsg:"Token address is invalid."}}),y.Tb(e)}finally{h(!1)}}return(0,o.useEffect)(()=>{r.walletDetails.errorMsg&&v("")},[r.walletDetails.errorMsg]),(0,i.jsx)("div",{children:r.activeStep===l?(0,i.jsxs)(c.$m,{step:n,errorMsg:r.errorMsg,children:[(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-neutral-600",children:"Token address"}),(0,i.jsx)(A.II,{error:!!r.tokenInfo.errorMsg,className:"w-full text-sm sm:w-96",type:"text",name:"search",placeholder:"Enter address...",onChange:e=>N(e.target.value),value:g}),r.tokenInfo.errorMsg?(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid address. Please insert a valid token address."}):(0,i.jsx)("p",{className:"my-1 break-words text-xs text-neutral-600",children:"e.g. 0xCC4304A31d09258b0029eA7FE63d032f52e44EFe"}),r.tokenInfo.symbol&&(0,i.jsxs)("div",{className:"my-4 w-full divide-y divide-neutral-200 rounded-md border border-neutral-200 sm:w-96",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,i.jsx)("span",{className:"text-sm text-neutral-500",children:"Symbol"}),(0,i.jsxs)("div",{className:"inline-flex items-center gap-x-1.5 text-sm font-medium",children:[r.tokenInfo.symbol,(0,i.jsx)(A.Oi,{alt:"logo",src:(0,k.XP)(r.tokenInfo.address),className:"h-5 w-5 object-contain",chainId:r.walletDetails.chainId})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,i.jsx)("span",{className:"text-sm text-neutral-500",children:"Balance"}),(0,i.jsx)("span",{className:"text-sm font-medium",children:x})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,i.jsx)("span",{className:"text-sm text-neutral-500",children:"Decimals"}),(0,i.jsx)("span",{className:"text-sm font-medium",children:r.tokenInfo.decimals})]})]}),(0,i.jsx)(A.zx,{className:"mt-2 w-full sm:w-auto",disabled:!!r.tokenInfo.errorMsg||!r.tokenInfo.address||m,isLoading:m,onClick:()=>{window.dataLayer.push({event:d}),a({type:b.a.HANDLE_NEXT})},children:"Continue"})]}):(0,i.jsx)(c.sP,{activeStep:r.activeStep,index:l,step:n,goToStep:()=>a({type:b.a.GO_TO_STEP,payload:l}),children:r.tokenInfo.symbol&&(0,i.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(A.Oi,{alt:"logo",src:(0,k.XP)(null===(t=r.tokenInfo)||void 0===t?void 0:t.address),className:"h-4 w-4 object-contain sm:h-5 sm:w-5",chainId:r.walletDetails.chainId})}),(0,i.jsx)("p",{className:"text-sm sm:text-base",children:null===(s=r.tokenInfo)||void 0===s?void 0:s.symbol})]})})})}let J=[{title:"Connect wallet",description:"Make sure to connect only the wallet that contains the tokens you would like to vest.",renderLogo:()=>(0,i.jsx)(V.DLc,{className:"h-4 w-4"})},{title:"Select blockchain",description:"Choose the blockchain that your token is built on.",renderLogo:()=>(0,i.jsx)(V.pNz,{className:"h-4 w-4"})},{title:"Enter token address",description:"Enter the address of the token you are vesting. This can be found under the 'Profile Summary' section of any blockexplorer.",renderLogo:()=>(0,i.jsx)(V.$l_,{className:"h-4 w-4"})},{title:"Add vesting details",description:(0,i.jsxs)("span",{children:["Unsure how to upload a file? Feel free to contact us on"," ",(0,i.jsx)(A.EX,{className:"font-medium text-blue-600",href:u.UY.telegram,children:(0,i.jsx)("span",{children:"Telegram"})})," ","to learn how."]}),renderLogo:()=>(0,i.jsx)(V.kVv,{className:"h-4 w-4"})},{title:"Create contract",description:"We need your authorisation before using the token. This only needs to be done once.",renderLogo:()=>(0,i.jsx)(V.D6S,{className:"h-4 w-4"})}],K={investor:"Investor",employee:"Employee"},Q={second:"Per second",minute:"Per minute",hour:"Per hour",day:"Per day",week:"Per week",month:"Per month",quarterly:"Quarterly",annually:"Annually"};(a=n||(n={}))[a.CONNECT_WALLET=0]="CONNECT_WALLET",a[a.SELECT_CHAIN=1]="SELECT_CHAIN",a[a.SELECT_TOKEN=2]="SELECT_TOKEN",a[a.UPLOAD_CSV=3]="UPLOAD_CSV",a[a.DEPLOY_CONTRACT=4]="DEPLOY_CONTRACT",a[a.OUTCOME=5]="OUTCOME";var $=s(46319),ee=s(82863);function et(e){let{children:t,text:s}=e;return(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)("div",{className:"z-1 relative before:absolute before:-top-3 before:left-1/2 before:w-max before:max-w-xs before:-translate-x-80 before:translate-y-1/3 before:rounded-md before:bg-gray-700 before:px-3 before:py-2 before:text-white before:opacity-0 before:transition-all before:duration-300 before:content-[attr(data-tip)] after:absolute after:left-1/2 after:h-0 after:w-0 after:-translate-x-3.5 after:border-8 after:border-b-gray-700 after:border-l-transparent after:border-r-transparent after:border-t-gray-700 after:border-t-transparent after:opacity-0 after:transition-all after:duration-300 hover:before:opacity-100 hover:after:opacity-100 before:md:-translate-x-1/2 before:md:-translate-y-full after:md:-top-3 after:md:-translate-x-1/2 after:md:border-b-transparent after:md:border-t-gray-700","data-tip":s,children:t})})}et.defaultProps={text:void 0};var es=s(95958),ea=s(45894),er=s(22751),en=s(48834).Buffer;class el{getLayers(e){if(0===e.length)throw Error("empty tree");let t=[];for(t.push(e);t[t.length-1].length>1;)t.push(this.getNextLayer(t[t.length-1]));return t}getNextLayer(e){return e.reduce((e,t,s,a)=>(s%2==0&&e.push(el.combinedHash(t,a[s+1])),e),[])}static combinedHash(e,t){return e?t?(0,er.keccak256)(el.sortAndConcat(e,t)):e:t}getRoot(){return this.layers[this.layers.length-1][0]}getHexRoot(){return(0,er.bufferToHex)(this.getRoot())}getProof(e){let t=this.bufferElementPositionIndex[(0,er.bufferToHex)(e)];if("number"!=typeof t)throw Error("Element does not exist in Merkle tree");return this.layers.reduce((e,s)=>{let a=el.getPairElement(t,s);return a&&e.push(a),t=Math.floor(t/2),e},[])}getHexProof(e){let t=this.getProof(e);return el.bufArrToHexArr(t)}static getPairElement(e,t){let s=e%2==0?e+1:e-1;return s<t.length?t[s]:null}static bufDedup(e){return e.filter((t,s)=>0===s||!e[s-1].equals(t))}static bufArrToHexArr(e){if(e.some(e=>!en.isBuffer(e)))throw Error("Array is not an array of buffers");return e.map(e=>"0x".concat(e.toString("hex")))}static sortAndConcat(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return en.concat([...t].sort(en.compare))}constructor(e){this.elements=[...e],this.elements.sort(en.compare),this.elements=el.bufDedup(this.elements),this.bufferElementPositionIndex=this.elements.reduce((e,t,s)=>(e[(0,er.bufferToHex)(t)]=s,e),{}),this.layers=this.getLayers(this.elements)}}var ei=s(48834).Buffer;class eo{static verifyProof(e,t,s,a,r,n,l,i,o,c){let d=eo.toNode(e,t,s,a,r,n,l,i);for(let e of o)d=el.combinedHash(d,e);return d.equals(c)}static toNode(e,t,s,a,r,n,l,i){return ei.from(ea.keccak256(["uint256","address","uint256","bool","uint256","uint256","uint256","uint256"],[e,t,s,a,r,n,l,i]).substr(2),"hex")}getHexRoot(){return this.tree.getHexRoot()}getProof(e,t,s,a,r,n,l,i){return this.tree.getHexProof(eo.toNode(e,t,s,a,r,n,l,i))}constructor(e){this.tree=new el(e.map((e,t)=>{let{account:s,amount:a,revocable:r,start:n,end:l,cadence:i,percentageOnStart:o}=e;return eo.toNode(t,s,a,r,n,l,i,o)}))}}let{isAddress:ec,getAddress:ed}=es;var em=s(72779),eu=s.n(em),eh=s(51526),ex=s(76635),ep=s.n(ex),ef=s(90286),eg=s.n(ef),eb=s(77566),ey=s(28883),ev=s.n(ey),ew=s(19981),ej={src:"/_next/static/media/google-drive-logo.cb8349e1.png",height:18,width:18,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAbFBMVEVMaXEBsEYAr0khif30uwP/wgD+vAAGkjsqivxDhi0jg//5uQEDqkT/tgAAq0rvaSn/AABVf8wAga/8uQEug/8eg+8ARf8HZurHRlkUhv+TdoQQfs0Au0xDkyIAjjf/0QK/sAsApEL/ZyAAgsMeTeZJAAAAHHRSTlMA8KRBI/qjJP4IOoGCSk90Cx508LohC9XVvOnnToFQIgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEJJREFUeJwVxcURwCAAAMGD4HE34v33mGE/C3hrPUlxHnnaiufWCpBRmstAFYVVvS7pvn1Yt7dmmp1zbmlgzELIWn5bfwLo6BJpIAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},eN={src:"/_next/static/media/icons_google-drive.7973edb0.png",height:18,width:19,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAFVBMVEX6/P/3+f9MaXH0/P/4+v/19f/5+/9uTvtlAAAAB3RSTlMqOwAaRw1bU3KhawAAAAlwSFlzAAALEwAACxMBAJqcGAAAADBJREFUeJwVx8ERADAMgzCMk+w/cq+8BGqrosnlo2lSMTuzI0xm+B2QgH/vxG3b9QEUFwCSGLDaBAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},ek=s(33967),eS=s(62449),eA=s(47935),eE=s(57643),eT=s(46539);function eD(e){let{open:t,setOpen:s,item:a,addEntry:r,signer:n,state:l}=e,[c,d]=(0,o.useState)(a),[m,h]=(0,o.useState)(!!a.lockupLength),[x,p]=(0,o.useState)(a.relationship),[f,g]=(0,o.useState)(null),[b,y]=(0,o.useState)(!1),{width:v}=(0,eE.iP)(),w=!1;try{if(m)w=Object.values(c.errors).every(e=>!1===e);else{let e=Object.fromEntries(Object.entries(c.errors).filter(e=>{let[t]=e;return"percentageOnStart"!==t&&"lockupLength"!==t}));w=Object.values(e).every(e=>!1===e)}}catch(e){console.error(e)}let j=(e,t)=>{try{if(e&&t){let s=new Date,a=new Date,r=e.split(";");r.forEach(e=>{let t=e.slice(-1),s=e.slice(0,-1);"D"===t?a.setDate(a.getDate()+Number(s)):"M"===t?a.setMonth(a.getMonth()+Number(s)):a.setFullYear(a.getFullYear()+Number(s))}),s.setMonth(s.getMonth()+Number(t)),d(e=>({...e,errors:{...e.errors,lockupLength:a<s}}))}}catch(e){console.error(e)}},N=()=>{if(!w){y(!0);return}f&&(c.start=f.toLocaleDateString("en-GB"),c.errors.start=!1),m||(c.percentageOnStart="",c.lockupLength="",c.errors.percentageOnStart=!1,c.errors.lockupLength=!1),r(c)};(0,o.useEffect)(()=>{if(a&&!a.errors.start)try{let[e,t,s]=a.start.split("/"),r=Number(s),n=Number(t),l=Number(e);if(""===a.startTime||"00:00"===a.startTime||a.errors.startTime)g(new Date(r,n-1,l));else{let e=a.startTime.split(":"),t=Number(e[0]),s=Number(e[1]);t<24&&s<60&&g(new Date(r,n-1,l,t,s))}}catch(e){console.error("Start date invalid.")}},[a]);let k=async e=>{try{let t="";if("0x1"===l.walletDetails.chainId){let s=await (0,u.gF)(n,e);Y.getAddress(s),t=s}else t=Y.getAddress(e);d(s=>({...s,address:e,errors:{...s.errors,address:!t}}))}catch(t){d(t=>({...t,address:e,errors:{...t.errors,address:!0}}))}},S=e=>{d(t=>({...t,relationship:e,errors:{...t.errors,relationship:!1}}))},E=e=>{let t=Number(e);d(s=>({...s,amount:e,errors:{...s.errors,amount:t<=0}}))},T=e=>{try{let t=0,s=!1,a=e.split(";");a.forEach(a=>{let r=a.slice(-1),n=a.slice(0,-1);if(Number.isNaN(Number(n))){d(t=>({...t,lengthOfSchedule:e,errors:{...t.errors,lengthOfSchedule:!0}}));return}"D"===r?t+=Number(n):"M"===r?t+=30*Number(n):"Y"===r?t+=365*Number(n):s=!0}),d(a=>({...a,lengthOfSchedule:e,errors:{...a.errors,lengthOfSchedule:0===t||s}})),m&&!s&&j(e,c.lockupLength)}catch(t){console.error(t),d(t=>({...t,lengthOfSchedule:e,errors:{...t.errors,lengthOfSchedule:!0}}))}},D=e=>{d(t=>({...t,cadence:e,errors:{...t.errors,cadence:!1}}))},C=e=>{let t=Math.floor(Number(e));d(e=>({...e,lockupLength:t.toString(),errors:{...e.errors,lockupLength:!1}})),j(c.lengthOfSchedule,t.toString())},L=e=>{let t=Math.max(0,Math.min(100,Number(e)));d(e=>({...e,percentageOnStart:t.toString(),errors:{...e.errors,percentageOnStart:!1}}))};return(0,i.jsxs)(A.u_,{title:"Add address",open:t,setOpen:()=>s(!1),children:[(0,i.jsx)(A.ZT,{className:"my-2",variant:"subtitle-6",children:"Wallet details"}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{fullWidth:!0,label:"Wallet address",type:"text",value:c.address,onChange:e=>k(e.target.value)}),c.errors.address&&(c.address||b)?(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid wallet address"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"my-1 hidden break-words text-xs text-neutral-600 sm:block",children:"e.g. 0xAb5801a7D398351b8bE11C439e05C5B3259aeC9B"}),(0,i.jsx)("p",{className:"my-1 break-words text-xs text-neutral-600 sm:hidden",children:"e.g. 0xAb58...eC9B"})]})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(A.II,{fullWidth:!0,label:"Wallet nickname (optional)",type:"text",value:c.nickname,onChange:e=>d(t=>({...t,nickname:e.target.value.slice(0,50)}))})})]}),(0,i.jsx)(A.ZT,{className:"mb-2 mt-4",variant:"subtitle-6",children:"Relationship"}),(0,i.jsxs)(ek.E,{value:x,onChange:e=>{p(e),S(e)},children:[(0,i.jsx)(ek.E.Label,{className:"sr-only",children:"relationships"}),(0,i.jsxs)("div",{className:"mt-1 flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[Object.values(K).map(e=>(0,i.jsx)(ek.E.Option,{value:e,className:e=>{let{active:t,checked:s}=e;return eu()({"ring-2 ring-blue-300":t,"border-blue-600":s,"border-neutral-300":!s},"flex cursor-pointer select-none rounded border bg-white px-4 py-2")},children:t=>{let{active:s,checked:a}=t;return(0,i.jsx)("div",{className:"inline-flex w-full items-center space-x-4 text-left",children:(0,i.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,i.jsx)(ek.E.Label,{as:"h6",className:"text-sm",children:e}),(0,i.jsx)("span",{className:eu()({"border-transparent ring-2 ring-blue-300":s,"border-transparent bg-blue-600":a,"bg-white":!a},"ml-2 mt-0.5 flex h-4 w-4 shrink-0 items-center justify-center rounded-full border border-neutral-300"),"aria-hidden":"true",children:(0,i.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-white"})})]})})}},e)),(0,i.jsx)(eA.ZP,{interactive:!0,content:(0,i.jsx)("div",{className:"w-52 rounded-lg bg-[#26272B] p-4 text-left text-white after:absolute after:left-1/2 after:top-[100%] after:-translate-x-1/2 after:border-4 after:border-x-transparent after:border-b-transparent after:border-t-[#26272B] after:content-['']",children:(0,i.jsx)("span",{children:"It is possible to end the vesting contract for employees. This is not possible under an investor vesting contract."})}),children:(0,i.jsx)("div",{className:"flex w-max items-center",children:(0,i.jsxs)("button",{type:"button",className:"mt-2 flex items-center text-blue-600 md:ml-2 md:mt-0",children:[(0,i.jsx)(V.r$n,{className:"h-5 w-5"}),(0,i.jsx)("span",{className:"ml-1 text-blue-600",children:"What's the difference"})]})})})]})]}),c.errors.relationship&&(c.relationship||b)&&(0,i.jsx)("p",{className:"my-1 text-start text-xs font-medium text-red-600",children:"Invalid relationship"}),(0,i.jsx)(A.ZT,{className:"mb-2 mt-4",variant:"subtitle-6",children:"Details"}),(0,i.jsxs)("div",{className:"flex w-full flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{fullWidth:!0,label:"Number of tokens to vest",type:"number",value:c.amount,onChange:e=>E(e.target.value),placeholder:"0"}),c.errors.amount&&(c.amount||b)&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid number of tokens"})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{fullWidth:!0,label:"Total vesting period (e.g. 4Y;6M;10D)",type:"text",value:c.lengthOfSchedule,onChange:e=>T(e.target.value),placeholder:"4Y;6M;30D"}),c.errors.lengthOfSchedule&&(c.lengthOfSchedule||b)&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid input. Check the format."})]})]}),(0,i.jsxs)("div",{className:"mt-2 flex w-full flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"flex w-full flex-col",children:[(0,i.jsx)(A.ZT,{className:"mb-1 block",variant:"caption-2",children:"Vesting start date (UTC)"}),(0,i.jsx)(eT.Z,{selected:f,setUnlockDate:e=>{try{if(e){g(e);let t=e.getHours(),s=e.getMinutes();d(a=>({...a,start:e.toLocaleDateString("en-GB"),startTime:"".concat(t,":").concat(s<10?"0".concat(s.toString()):s),errors:{...a.errors,start:!1,startTime:!1}}))}}catch(e){console.error(e),d(e=>({...e,errors:{...e.errors,start:!0}}))}},showTimeSelect:v>420,dateFormat:"MMM dd, yyyy h:mm aa",timeFormat:"h:mm aa"}),c.errors.start&&(c.start||b)&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium",children:"Invalid start date"})]}),(0,i.jsx)("div",{className:"flex w-full flex-col items-start",children:(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"mb-1 flex items-center",children:(0,i.jsx)(A.ZT,{variant:"caption-2",children:"Vesting cadence"})}),(0,i.jsxs)("select",{className:"text-body h-11 w-full rounded-md border border-gray-200 bg-white px-3 text-gray-700 transition duration-150 placeholder:text-gray-400 hover:bg-gray-50 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-600 disabled:hover:bg-gray-50",value:c.cadence,onChange:e=>{D(e.target.value)},children:[c.errors.cadence&&(0,i.jsx)("option",{className:"text-red-600",value:"ERROR",children:"Select cadence"}),Object.values(Q).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),c.errors.cadence&&c.cadence&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid cadence"})]})})]}),(0,i.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,i.jsx)(A.ZT,{variant:"subtitle-6",children:"Lockup period"}),(0,i.jsx)("div",{className:"ml-1 mr-4 flex items-center text-gray-500",children:(0,i.jsx)(eA.ZP,{interactive:!0,content:(0,i.jsx)("div",{className:"w-52 rounded-lg bg-[#26272B] p-4 text-left text-white after:absolute after:left-1/2 after:top-[100%] after:-translate-x-1/2 after:border-4 after:border-x-transparent after:border-b-transparent after:border-t-[#26272B] after:content-['']",children:(0,i.jsxs)("span",{children:["Also known as cliffs. See"," ",(0,i.jsx)(A.EX,{href:"https://docs.team.finance/token-vesting",className:"text-base font-medium text-gray-100 underline hover:text-blue-400",children:"our docs"})," ","for examples about how lockups impact vesting schedules."]})}),children:(0,i.jsx)("div",{children:(0,i.jsx)(V.Rf3,{className:"h-4 w-4"})})})}),(0,i.jsxs)(eS.r,{checked:m,onChange:e=>{h(e),e&&j(c.lengthOfSchedule,c.lockupLength)},className:"".concat(m?"from-light-blue bg-gradient-to-r to-blue-700":"bg-gray-400"," relative inline-flex h-4 w-8 items-center rounded-full"),children:[(0,i.jsx)("span",{className:"sr-only",children:"Enable lockup period"}),(0,i.jsx)("span",{className:"".concat(m?"translate-x-4":"translate-x-1"," inline-block h-2.5 w-2.5 transform rounded-full bg-white transition")})]})]}),(0,i.jsxs)("div",{className:"mt-2 flex w-full flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{disabled:!m,fullWidth:!0,label:"Lockup length (Months)",type:"number",value:c.lockupLength,onChange:e=>C(e.target.value),placeholder:"0"}),c.errors.lockupLength&&(c.lockupLength||b)&&m?(0,i.jsx)("p",{className:"my-1 text-left text-xs font-medium text-red-600",children:'Lockup period must be less than "total vesting period". Please change'}):(0,i.jsx)("p",{className:"my-1 text-left text-xs text-neutral-600",children:"How long until they can claim their first tokens."})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{disabled:!m,label:"Lockup percentage",fullWidth:!0,type:"number",value:c.percentageOnStart,onChange:e=>L(e.target.value),placeholder:"0"}),c.errors.percentageOnStart&&(c.percentageOnStart||b)&&m?(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid lockup percentage"}):(0,i.jsx)("p",{className:"my-1 text-left text-xs text-neutral-600",children:"% of total tokens vested they'll receive once the lockup period has finished."})]})]}),(0,i.jsxs)("div",{className:"mt-4 flex sm:justify-between",children:[(0,i.jsx)(A.zx,{variant:"secondary",className:"!sm:px-8 w-1/2 sm:w-fit",onClick:()=>s(!1),children:"Cancel"}),(0,i.jsx)(A.zx,{disabled:!w&&b,className:"ml-2 w-1/2 sm:w-fit",onClick:()=>N(),children:"Add address"})]})]})}function eC(e){let{open:t,setOpen:s,item:a,editEntry:r,signer:n,state:l}=e,[c,d]=(0,o.useState)(a),[m,h]=(0,o.useState)(!!a.lockupLength),[x,p]=(0,o.useState)(a.relationship),[f,g]=(0,o.useState)(null),{width:b}=(0,eE.iP)(),y=!1;if(m)y=Object.values(c.errors).every(e=>!1===e);else try{let e=Object.fromEntries(Object.entries(c.errors).filter(e=>{let[t]=e;return"percentageOnStart"!==t&&"lockupLength"!==t}));y=Object.values(e).every(e=>!1===e)}catch(e){console.error(e)}let v=(e,t)=>{try{if(e&&t){let s=new Date,a=new Date,r=e.split(";");r.forEach(e=>{let t=e.slice(-1),s=e.slice(0,-1);"D"===t?a.setDate(a.getDate()+Number(s)):"M"===t?a.setMonth(a.getMonth()+Number(s)):a.setFullYear(a.getFullYear()+Number(s))}),s.setMonth(s.getMonth()+Number(t)),d(e=>({...e,errors:{...e.errors,lockupLength:a<s}}))}}catch(e){console.error(e)}},w=()=>{f&&(c.start=f.toLocaleDateString("en-GB"),c.errors.start=!1),m||(c.percentageOnStart="",c.lockupLength="",c.errors.percentageOnStart=!1,c.errors.lockupLength=!1),r(c)};(0,o.useEffect)(()=>{if(a&&a.start&&!a.errors.start)try{let[e,t,s]=a.start.split("/"),r=Number(s),n=Number(t),l=Number(e);if(""===a.startTime||"00:00"===a.startTime||a.errors.startTime)g(new Date(r,n-1,l));else{let e=a.startTime.split(":"),t=Number(e[0]),s=Number(e[1]);t<24&&s<60&&g(new Date(r,n-1,l,t,s))}}catch(e){console.error("Start date invalid.")}},[a]);let j=async e=>{try{let t="";if("0x1"===l.walletDetails.chainId){let s=await (0,u.gF)(n,e);Y.getAddress(s),t=s}else t=Y.getAddress(e);d(s=>({...s,address:e,errors:{...s.errors,address:!t}}))}catch(t){d(t=>({...t,address:e,errors:{...t.errors,address:!0}}))}},N=e=>{d(t=>({...t,relationship:e,errors:{...t.errors,relationship:!1}}))},k=e=>{let t=Number(e);d(s=>({...s,amount:e,errors:{...s.errors,amount:t<=0}}))},S=e=>{try{let t=0,s=!1,a=e.split(";");a.forEach(a=>{let r=a.slice(-1),n=a.slice(0,-1);if(Number.isNaN(Number(n))){d(t=>({...t,lengthOfSchedule:e,errors:{...t.errors,lengthOfSchedule:!0}}));return}"D"===r?t+=Number(n):"M"===r?t+=30*Number(n):"Y"===r?t+=365*Number(n):s=!0}),d(a=>({...a,lengthOfSchedule:e,errors:{...a.errors,lengthOfSchedule:0===t||s}})),m&&!s&&v(e,c.lockupLength)}catch(t){console.error(t),d(t=>({...t,lengthOfSchedule:e,errors:{...t.errors,lengthOfSchedule:!0}}))}},E=e=>{d(t=>({...t,cadence:e,errors:{...t.errors,cadence:!1}}))},T=e=>{let t=Math.floor(Number(e));d(e=>({...e,lockupLength:t.toString(),errors:{...e.errors,lockupLength:!1}})),v(c.lengthOfSchedule,t.toString())},D=e=>{let t=Math.max(0,Math.min(100,Number(e)));d(e=>({...e,percentageOnStart:t.toString(),errors:{...e.errors,percentageOnStart:!1}}))};return(0,i.jsxs)(A.u_,{title:"Edit line-".concat(a.index+1),open:t,setOpen:()=>s(!1),children:[(0,i.jsx)(A.ZT,{className:"my-2",variant:"subtitle-6",children:"Wallet details"}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{fullWidth:!0,label:"Wallet address",type:"text",value:c.address,onChange:e=>j(e.target.value)}),c.errors.address?(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid wallet address"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"my-1 hidden break-words text-xs text-neutral-600 sm:block",children:"e.g. 0xAb5801a7D398351b8bE11C439e05C5B3259aeC9B"}),(0,i.jsx)("p",{className:"my-1 break-words text-xs text-neutral-600 sm:hidden",children:"e.g. 0xAb58...eC9B"})]})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(A.II,{fullWidth:!0,label:"Wallet nickname (optional)",type:"text",value:c.nickname,onChange:e=>d(t=>({...t,nickname:e.target.value.slice(0,50)}))})})]}),(0,i.jsx)("h2",{className:"mt-4 flex text-base font-semibold",children:"Relationship"}),(0,i.jsxs)(ek.E,{value:x,onChange:e=>{p(e),N(e)},children:[(0,i.jsx)(ek.E.Label,{className:"sr-only",children:"relationships"}),(0,i.jsxs)("div",{className:"mt-1 flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[Object.values(K).map(e=>(0,i.jsx)(ek.E.Option,{value:e,className:e=>{let{active:t,checked:s}=e;return eu()({"ring-2 ring-blue-300":t,"border-blue-600":s,"border-neutral-300":!s},"flex cursor-pointer select-none rounded border bg-white px-4 py-2")},children:t=>{let{active:s,checked:a}=t;return(0,i.jsx)("div",{className:"inline-flex w-full items-center space-x-4 text-left",children:(0,i.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,i.jsx)(ek.E.Label,{as:"h6",className:"text-sm",children:e}),(0,i.jsx)("span",{className:eu()({"border-transparent ring-2 ring-blue-300":s,"border-transparent bg-blue-600":a,"bg-white":!a},"ml-2 mt-0.5 flex h-4 w-4 shrink-0 items-center justify-center rounded-full border border-neutral-300"),"aria-hidden":"true",children:(0,i.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-white"})})]})})}},e)),(0,i.jsxs)("div",{className:"group relative flex w-max items-center",children:[(0,i.jsxs)("button",{type:"button",className:"mt-2 flex items-center text-blue-600 md:ml-2 md:mt-0",children:[(0,i.jsx)(V.r$n,{className:"h-5 w-5"}),(0,i.jsx)("span",{className:"ml-1 text-blue-600",children:"What's the difference"})]}),(0,i.jsx)("span",{className:"pointer-events-none absolute z-10 w-60 -translate-x-4 -translate-y-24 rounded-lg bg-gray-800 px-3 py-2 text-gray-100 opacity-0 transition-opacity group-hover:opacity-95",children:"It is possible to end the vesting contract for employees. This is not possible under an investor vesting contract."})]})]})]}),c.errors.relationship&&(0,i.jsx)("p",{className:"my-1 text-start text-xs font-medium text-red-600",children:"Invalid relationship"}),(0,i.jsx)(A.ZT,{className:"mb-2 mt-4",variant:"subtitle-6",children:"Details"}),(0,i.jsxs)("div",{className:"flex w-full flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{className:"flex w-full !text-black",label:"Number of tokens to vest",type:"number",value:c.amount,onChange:e=>k(e.target.value)}),c.errors.amount&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid number of tokens"})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{className:"flex w-full !text-black",label:"Total vesting period (e.g. 4Y;6M;10D)",type:"text",value:c.lengthOfSchedule,onChange:e=>S(e.target.value)}),c.errors.lengthOfSchedule&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid input. Check the format."})]})]}),(0,i.jsxs)("div",{className:"mt-2 flex w-full flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"flex w-full flex-col",children:[(0,i.jsx)(A.ZT,{className:"mb-1 block",variant:"caption-2",children:"Vesting start date"}),(0,i.jsx)(eT.Z,{selected:f,setUnlockDate:e=>{try{let t=e.getHours(),s=e.getMinutes();e&&(g(e),d(a=>({...a,start:e.toLocaleDateString("en-GB"),startTime:"".concat(t,":").concat(s<10?"0".concat(s.toString()):s),errors:{...a.errors,start:!1,startTime:!1}})))}catch(e){console.error(e),d(e=>({...e,errors:{...e.errors,start:!0,startTime:!0}}))}},showTimeSelect:b>420,dateFormat:"MMM dd, yyyy h:mm aa",timeFormat:"h:mm aa"}),c.errors.start&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium",children:"Invalid start date"})]}),(0,i.jsx)("div",{className:"flex w-full flex-col items-start",children:(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"mb-1 flex items-center",children:(0,i.jsx)(A.ZT,{variant:"caption-2",children:"Vesting cadence"})}),(0,i.jsxs)("select",{className:"text-body h-11 w-full rounded-md border border-gray-200 bg-white px-3 text-gray-700 transition duration-150 placeholder:text-gray-400 hover:bg-gray-50 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-600 disabled:hover:bg-gray-50",value:c.cadence,onChange:e=>{E(e.target.value)},children:[c.errors.cadence&&(0,i.jsx)("option",{className:"text-red-600",value:"ERROR",children:"Select cadence"}),Object.values(Q).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),c.errors.cadence&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid cadence"})]})})]}),(0,i.jsxs)("div",{className:"mt-2 flex w-full flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"mb-1 flex items-center",children:[(0,i.jsx)(A.ZT,{variant:"caption-2",children:"Vesting cadence"}),(0,i.jsx)(eA.ZP,{interactive:!0,content:(0,i.jsx)("div",{className:"w-52 rounded-lg bg-[#26272B] p-4 text-left text-white after:absolute after:left-1/2 after:top-[100%] after:-translate-x-1/2 after:border-4 after:border-x-transparent after:border-b-transparent after:border-t-[#26272B] after:content-['']",children:(0,i.jsxs)("span",{children:["How frequently user receives vested tokens. See"," ",(0,i.jsx)(A.EX,{href:"https://docs.team.finance/token-vesting",className:"text-base font-medium text-gray-100 underline hover:text-blue-400",children:"our docs"})," ","for examples."]})}),children:(0,i.jsx)("div",{className:"ml-1",children:(0,i.jsx)(V.Rf3,{className:"h-4 w-4 text-gray-500"})})})]}),(0,i.jsxs)("select",{className:"text-body h-11 w-full rounded-md border border-gray-200 bg-white px-3 text-gray-700 transition duration-150 placeholder:text-gray-400 hover:bg-gray-50 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-600 disabled:hover:bg-gray-50",value:c.cadence,onChange:e=>{E(e.target.value)},children:[c.errors.cadence&&(0,i.jsx)("option",{className:"text-red-600",value:"ERROR",children:"Select cadence"}),Object.values(Q).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),c.errors.cadence&&(0,i.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid cadence"})]}),(0,i.jsx)("div",{className:"flex w-full"})]}),(0,i.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,i.jsx)(A.ZT,{variant:"subtitle-6",children:"Lockup period"}),(0,i.jsx)("div",{className:"mr-4 flex items-center text-gray-500",children:(0,i.jsx)(eA.ZP,{interactive:!0,content:(0,i.jsx)("div",{className:"w-52 rounded-lg bg-[#26272B] p-4 text-left text-white after:absolute after:left-1/2 after:top-[100%] after:-translate-x-1/2 after:border-4 after:border-x-transparent after:border-b-transparent after:border-t-[#26272B] after:content-['']",children:(0,i.jsxs)("span",{children:["Also known as cliffs. See"," ",(0,i.jsx)(A.EX,{href:"https://docs.team.finance/token-vesting",className:"text-base font-medium text-gray-100 underline hover:text-blue-400",children:"our docs"})," ","for examples about how lockups impact vesting schedules."]})}),children:(0,i.jsx)("div",{children:(0,i.jsx)(V.Rf3,{className:"h-4 w-4"})})})}),(0,i.jsxs)(eS.r,{checked:m,onChange:e=>{h(e),e&&v(c.lengthOfSchedule,c.lockupLength)},className:"".concat(m?"from-light-blue bg-gradient-to-r to-blue-700":"bg-gray-400"," relative inline-flex h-4 w-8 items-center rounded-full"),children:[(0,i.jsx)("span",{className:"sr-only",children:"Enable lockup period"}),(0,i.jsx)("span",{className:"".concat(m?"translate-x-4":"translate-x-1"," inline-block h-2.5 w-2.5 transform rounded-full bg-white transition")})]})]}),(0,i.jsxs)("div",{className:"mt-2 flex w-full flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{disabled:!m,className:"flex w-full !text-black",label:"Lockup length (Months)",type:"number",value:c.lockupLength,onChange:e=>T(e.target.value)}),c.errors.lockupLength&&m?(0,i.jsx)("p",{className:"my-1 text-left text-xs font-medium text-red-600",children:'Lockup period must be less than "Total vesting period". Please change'}):(0,i.jsx)("p",{className:"my-1 text-left text-xs text-neutral-600",children:"How long until they can claim their first tokens."})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(A.II,{disabled:!m,className:"flex w-full !text-black",label:"Lockup percentage",type:"number",value:c.percentageOnStart,onChange:e=>D(e.target.value)}),c.errors.percentageOnStart&&m?(0,i.jsx)("p",{className:"my-1 text-left text-xs font-medium text-red-600",children:"Invalid lockup percentage"}):(0,i.jsx)("p",{className:"my-1 text-left text-xs text-neutral-600",children:"% of total tokens vested they'll receive once the lockup period has finished."})]})]}),(0,i.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,i.jsx)(A.zx,{variant:"secondary",className:"w-1/2 !px-8 sm:w-fit",onClick:()=>s(!1),children:"Cancel"}),(0,i.jsx)(A.zx,{disabled:!y,className:"ml-2 w-1/2 sm:w-fit",onClick:()=>w(),children:"Save changes"})]})]})}let eL="/assets/vesting/error.svg",e_=["xlsx","csv"],eO="AIzaSyDx4QewkeHKPu5-fmDUg_WWiiAvtcvmJyw";function eI(e){let{dispatch:t,state:s,signer:a,step:r,index:n,event:d="db_vesting_address_entered",collapsed:x}=e,[p,f]=(0,o.useState)(!1),[g,w]=(0,o.useState)(!1),[j,N]=(0,o.useState)(!1),[k,T]=(0,o.useState)(null),[D,L]=(0,o.useState)(null),[_,O]=(0,o.useState)(null),[I]=ev()(),[M,R]=(0,o.useState)(""),[P,U]=(0,o.useState)([{id:l.Manual,isOpen:!1,buttonText:"Create new vesting plan",event:"db_vesting_plan"},{id:l.GoogleDrive,isOpen:!1,buttonText:"Upload via Google Drive ",event:"db_vesting_google"},{id:l.CsvOrExcel,isOpen:!1,buttonText:"Upload file (CSV or Excel)",event:"db_vesting_upload"}]),H={open:{opacity:1,height:"auto",y:0},collapsed:{opacity:0,height:0,y:-25,transition:{duration:.15}}},W=()=>{try{let e=s.vestingDetails.userList.map(e=>[e.address,e.nickname,e.amount,e.relationship,e.start,e.startTime,e.lengthOfSchedule,e.cadence,e.lockupLength,e.percentageOnStart]),t=eg().unparse({data:e,fields:["Wallet address","Wallet nickname (optional)","Number of tokens to vest","Relationship","Vesting start date (DD/MM/YYYY)","Vesting start time","Length of Schedule","Vesting cadence","Lockup length (months) - optional","Lockup percentage (%) - optional"]}),a=new Blob([t],{type:"text/csv"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.download="vesting_edited_".concat(Date.now());let n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});r.dispatchEvent(n),r.remove()}catch(e){console.error(e)}},B=(0,o.useCallback)(async(e,r)=>{try{f(!0);let n={},l=[],i=[],o=[],c=await Promise.all(r.map(async(e,t)=>{if(!e[0]||!e[0].startsWith("0"))return!0;let r={invalidArguments:!1,address:!1,amount:!1,relationship:!1,start:!1,startTime:!1,lengthOfSchedule:!1,lockupLength:!1,cadence:!1,percentageOnStart:!1};if(e.length<10)return i.push("Line ".concat(t+1,": Wrong number of arguments.")),o.push({address:"",nickname:"",amount:"",relationship:"",start:"",startTime:"",end:"",lengthOfSchedule:"",lockupLength:"",cadence:"",percentageOnStart:"",index:t,errors:{...r,invalidArguments:!0}}),!1;let c=e[0],d="";try{d=e[1].toString().slice(0,50)}catch(e){console.error(e)}let m="number"==typeof e[2]?e[2]:(0,S.p3)(e[2],["en-US"]),h=e[3],x="";if("string"!=typeof e[4])try{let t=new Date(e[4]);x=t.toLocaleDateString("en-GB")}catch(e){console.error(e),r.start=!0}else x=e[4];let p="0:00";if("string"!=typeof e[5])try{let t=new Date(e[5]),s=t.getUTCHours(),a=t.getUTCMinutes();p="".concat(s,":").concat(a<10?"0".concat(a.toString()):a)}catch(e){console.error(e)}else p=e[5];let f=e[6],g=e[7],b=e[8],y=e[9];if(!c)return!0;try{if("0x1"===s.walletDetails.chainId){let e=await (0,u.gF)(a,c);Y.getAddress(e),c=e}else Y.getAddress(c)}catch(e){i.push("Line ".concat(t+1,": Wallet address invalid.")),r.address=!0}if(n[c]){let e="Line ".concat(t+1,": ").concat(c," can only be used once per upload. Please remove duplicates.");i.push(e),r.address=!0}let v="0x0";try{v=C.parseUnits(m.toString(),s.tokenInfo.decimals).toHexString()}catch(e){i.push("Line ".concat(t+1,": Vesting amount invalid.")),r.amount=!0}let w=!0;try{let e=h.toLowerCase();Object.keys(K).includes(e)?w=e!==K.investor.toLowerCase():(i.push("Line ".concat(t+1,": Relationship invalid.")),r.relationship=!0)}catch(e){i.push("Line ".concat(t+1,": Relationship invalid.")),r.relationship=!0}let j=0,N=null,k=null,A=new Date;if(!r.start)try{let[e,s,a]=x.split("/"),n=Number(a),l=Number(s),o=Number(e);if(Number.isNaN(n)||Number.isNaN(l)||Number.isNaN(o))i.push("Line ".concat(t+1,": Start date invalid.")),r.start=!0;else{try{if(""!==p&&"00:00"!==p){let e=p.split(":"),s=Number(e[0]),a=Number(e[1]);s<24&&a<60?N=new Date(Date.UTC(n,l-1,o,s,a)):(i.push("Line ".concat(t+1,": Start time invalid.")),r.startTime=!0)}else N=new Date(Date.UTC(n,l-1,o))}catch(e){i.push("Line ".concat(t+1,": Start time invalid.")),r.startTime=!0,N=new Date(Date.UTC(n,l-1,o))}k=new Date(N.getTime()),b&&(N.setMonth(N.getMonth()+Number(b)),A.setMonth(A.getMonth()+Number(b))),j=N.getTime()/1e3}}catch(e){i.push("Line ".concat(t+1,": Start date invalid.")),r.start=!0}let E=0,T=k,D=new Date;try{let e=f.split(";");e.forEach(e=>{let s=e.slice(-1),a=e.slice(0,-1);Number.isNaN(Number(a))&&(i.push("Line ".concat(t+1,": Length of schedule is invalid.")),r.lengthOfSchedule=!0),"D"===s?(T.setDate(T.getDate()+Number(a)),D.setDate(D.getDate()+Number(a))):"M"===s?(T.setMonth(T.getMonth()+Number(a)),D.setMonth(D.getMonth()+Number(a))):"Y"===s?(T.setFullYear(T.getFullYear()+Number(a)),D.setFullYear(D.getFullYear()+Number(a))):(i.push("Line ".concat(t+1,": Length of schedule is invalid.")),r.lengthOfSchedule=!0)}),D<A&&(i.push("Line ".concat(t+1,": Length of schedule has to be greater than lockup length.")),r.lockupLength=!0),E=T.getTime()/1e3}catch(e){N&&(i.push("Line ".concat(t+1,": Lockup length or length of schedule invalid.")),r.lockupLength=!0)}let L=0;try{let e=g.toLowerCase();e===Q.second.toLowerCase()?L=1:e===Q.minute.toLowerCase()?L=60:e===Q.hour.toLowerCase()?L=3600:e===Q.day.toLowerCase()?L=86400:e===Q.week.toLowerCase()?L=604800:e===Q.month.toLowerCase()?L=2592e3:e===Q.quarterly.toLowerCase()?L=7776e3:e===Q.annually.toLowerCase()?L=31104e3:(i.push("Line ".concat(t+1,": Cadence invalid.")),r.cadence=!0)}catch(e){i.push("Line ".concat(t+1,": Cadence invalid.")),r.cadence=!0}let _=0;if(y)try{Number.isNaN(Number(y))?(i.push("Line ".concat(t+1,": Lockup percentage invalid.")),r.percentageOnStart=!0):_=Math.round(100*Number(y))}catch(e){i.push("Line ".concat(t+1,": Lockup percentage invalid.")),r.percentageOnStart=!0}return l.push({address:c,amount:v,revocable:w,start:j,end:E,cadence:L,percentageOnStart:_}),o.push({address:c,nickname:d,amount:m.toString(),relationship:h,start:x,startTime:p,end:T.toLocaleDateString("en-GB"),lengthOfSchedule:f,lockupLength:b?b.toString():"0",cadence:g,percentageOnStart:y?y.toString():"0",index:t,errors:r}),n[c]=!0,Object.values(r).every(e=>!1===e)}));if(t({type:b.a.SET_VESTING_DETAILS,payload:{name:"My first plan",errorMsgs:i,parsed:!0,userList:o,filename:e}}),c.every(e=>!0===e))try{let e=function(e){let t=e.reduce((e,t)=>{let{address:s,amount:a,revocable:r,start:n,end:l,cadence:i,percentageOnStart:o}=t;if(!ec(s))throw Error("Found invalid address: ".concat(s));let c=ed(s);if(e[c])throw Error("Duplicate address: ".concat(c));let d=E.O$.from(a);if(d.lte(0))throw Error("Invalid amount for account: ".concat(s));return e[c]={amount:d,revocable:r,start:n,end:l,cadence:i,percentageOnStart:o},e},{}),s=Object.keys(t).sort(),a=new eo(s.map(e=>({account:e,...t[e]}))),r=s.reduce((e,s,r)=>{let{amount:n,revocable:l,start:i,end:o,cadence:c,percentageOnStart:d}=t[s];return e[s]={index:r,amount:n.toHexString(),proof:a.getProof(r,s,n,l,i,o,c,d),revocable:l,start:i,end:o,cadence:c,percentageOnStart:d},e},{}),n=s.reduce((e,s)=>e.add(t[s].amount),E.O$.from(0));return{merkleRoot:a.getHexRoot(),tokenTotal:n.toHexString(),claims:r}}(l);await (0,u.GE)(l),t({type:b.a.SET_MERKLE_DETAILS,payload:{merkleRoot:e.merkleRoot,totalAmount:E.O$.from(e.tokenTotal)}}),E.O$.from(e.tokenTotal).gt(s.tokenInfo.balance)&&t({type:b.a.SET_VESTING_DETAILS_ERROR,payload:{errorMsg:"Insufficient funds. Please top up your token balance."}})}catch(e){console.error(e),t({type:b.a.SET_VESTING_DETAILS_ERROR,payload:{errorMsg:"There were issues with your upload. Make sure to follow the template."}})}else t({type:b.a.SET_MERKLE_DETAILS,payload:{merkleRoot:"",totalAmount:E.O$.from(0)}})}catch(e){console.error(e)}finally{f(!1)}},[t,a,s.walletDetails.chainId,s.tokenInfo.balance,s.tokenInfo.decimals]),G=e=>{try{I({clientId:"732742792252-svvo97b67qukvgdpv9ghs85j0our5ctj.apps.googleusercontent.com",developerKey:eO,viewMimeTypes:"text/csv,application/vnd.google-apps.spreadsheet,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",token:e,showUploadView:!0,showUploadFolders:!0,supportDrives:!0,callbackFunction:async s=>{if("cancel"!==s.action&&"picked"===s.action)try{f(!0);let a=s.docs[0];if(!a){t({type:b.a.SET_VESTING_DETAILS_ERROR,payload:{errorMsg:"We couldn't read your file. Make sure to follow the template."}});return}let{id:r,name:n,mimeType:l}=a,i="text/csv"===l?"https://www.googleapis.com/drive/v3/files/".concat(r,"/?alt=media&key=").concat(eO):"https://docs.google.com/spreadsheets/d/".concat(r,"/export?exportFormat=csv");await fetch(i,{headers:{Authorization:"Bearer ".concat(e)}}).then(async e=>{var t;let s=e.body.pipeThrough(new TextDecoderStream).getReader(),{value:a}=await s.read(),r=eg().parse(a,{skipEmptyLines:!0,header:!0}),l=[];null===(t=r.data)||void 0===t||t.map(async e=>{let t=Object.values(e);l.push(t)}),B(n,l)})}catch(e){console.error(e),t({type:b.a.SET_VESTING_DETAILS_ERROR,payload:{errorMsg:"We couldn't read your file. Make sure to follow the template."}}),f(!1)}}})}catch(e){console.error(e),t({type:b.a.SET_VESTING_DETAILS_ERROR,payload:{errorMsg:"We couldn't read your file. Make sure to follow the template."}})}},Z=(0,ee.Nq)({onSuccess:e=>{R(e.access_token),G(e.access_token)},scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/spreadsheets.readonly"}),q=(0,o.useCallback)(e=>{t({type:b.a.RESET_VESTING_DETAILS,payload:null});try{let s=e[0];if(!s)return;let a=s.name.split(".").pop();if(!e_.includes(a)){t({type:b.a.SET_VESTING_DETAILS_ERROR,payload:{errorMsg:"Please upload a supported file type."}});return}"xlsx"===a.toLowerCase()&&(0,ew.Z)(s).then(e=>{let t=e.slice(1);B(s.name,t)}),"csv"===a.toLowerCase()&&eg().parse(s,{skipEmptyLines:!0,header:!0,worker:!0,comments:'"',complete:async e=>{var t;let a=[];null===(t=e.data)||void 0===t||t.map(async e=>{let t=Object.values(e);a.push(t)}),B(s.name,a)}})}catch(e){console.error(e),t({type:b.a.SET_ERROR_MSG,payload:{errorMsg:"Something went wrong"}}),y.Tb(e)}},[t,B]),z=()=>{window.dataLayer.push({event:d,tool:P.find(e=>e.id===_).event}),t({type:b.a.HANDLE_NEXT})},X=()=>{t({type:b.a.RESET_VESTING_DETAILS,payload:null})},J=e=>{try{let a=s.vestingDetails.userList.filter(t=>t.index!==e.index),r=a.map(e=>{let t=[e.address,e.nickname,e.amount,e.relationship,e.start,e.startTime,e.lengthOfSchedule,e.cadence,e.lockupLength,e.percentageOnStart];return t});if(0===r.length){t({type:b.a.RESET_VESTING_DETAILS,payload:null});return}B(s.vestingDetails.filename,r)}catch(e){console.error(e)}},es=e=>{T(e),w(!0)},ea=e=>{try{let t=ep().cloneDeep(e);t.address="",t.nickname="",t.errors.address=!0,t.index=s.vestingDetails.userList.length,L(t),N(!0)}catch(e){console.error(e)}},er=()=>{try{let e=new Date,t=new Date;t.setDate(e.getDate()+1);let a={address:"",nickname:"",amount:"",relationship:K.investor,start:t.toLocaleDateString("en-GB"),startTime:"00:00",end:t.toLocaleDateString("en-GB"),lengthOfSchedule:"",lockupLength:"",cadence:Q.second,percentageOnStart:"",index:s.vestingDetails.userList.length,errors:{invalidArguments:!1,address:!0,amount:!0,relationship:!1,start:!1,startTime:!1,lengthOfSchedule:!0,lockupLength:!0,cadence:!1,percentageOnStart:!0}};L(a),N(!0)}catch(e){console.error(e)}},{getRootProps:en,getInputProps:el,isDragAccept:ei}=eb.uI({onDrop:q}),em=e=>{e!==_&&t({type:b.a.RESET_VESTING_DETAILS,payload:null}),O(e),U(P.map(t=>t.id===e?{...t,isOpen:!t.isOpen}:{...t,isOpen:!1}))};return(0,i.jsxs)("div",{className:"overflow-hidden rounded-md",children:[g&&(0,i.jsx)(eC,{open:g,setOpen:()=>w(!1),item:k,editEntry:e=>{try{w(!1);let t=s.vestingDetails.userList.map(t=>t.index===e.index?e:t),a=t.map(e=>{let t=[e.address,e.nickname,e.amount,e.relationship,e.start,e.startTime,e.lengthOfSchedule,e.cadence,e.lockupLength,e.percentageOnStart];return t});B(s.vestingDetails.filename,a)}catch(e){console.error(e)}},signer:a,state:s}),j&&(0,i.jsx)(eD,{open:j,setOpen:()=>N(!1),item:D,addEntry:e=>{try{N(!1);let t=s.vestingDetails.userList;t.push(e);let a=t.map(e=>{let t=[e.address,e.nickname,e.amount,e.relationship,e.start,e.startTime,e.lengthOfSchedule,e.cadence,e.lockupLength,e.percentageOnStart];return t});B(s.vestingDetails.filename,a)}catch(e){console.error(e)}},signer:a,state:s}),s.vestingDetails.errorMsg&&s.activeStep===n&&(0,i.jsx)(v.b,{variant:"red",children:s.vestingDetails.errorMsg},s.vestingDetails.errorMsg),s.vestingDetails.errorMsgs.length>0&&s.vestingDetails.parsed&&s.activeStep===n&&s.vestingDetails.errorMsgs.map(e=>(0,i.jsx)(v.b,{variant:"red",children:e},e)),s.activeStep===n?(0,i.jsxs)(c.$m,{step:r,errorMsg:s.errorMsg,children:[P.map(e=>{let{id:t,isOpen:a,buttonText:r}=e;return(0,i.jsxs)("div",{className:eu()({"lg:w-1/2":x,"lg:w-full":!x},"mb-1 rounded-md border bg-gray-100"),children:[(0,i.jsxs)("button",{disabled:p,type:"button",className:"flex w-full items-center justify-between px-2 py-4 text-left text-sm font-medium text-black focus:outline-none sm:px-4",onClick:()=>em(t),"aria-expanded":a,...a&&{"aria-controls":t.toString()},children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:eu()({"border-blue-600":t===_,"border-gray-600":t!==_},"mr-2 flex h-3.5 w-3.5 shrink-0 items-center justify-center rounded-full border-2"),"aria-hidden":"true",children:(0,i.jsx)("div",{className:eu()({"border-white bg-blue-600":t===_,"border-transparent bg-transparent":t!==_},"h-2.5 w-2.5 rounded-full border-2")})}),r,t===l.GoogleDrive&&(0,i.jsxs)("div",{className:"ml-2 flex items-center",children:[(0,i.jsx)(F(),{src:ej,alt:"drive-logo"}),(0,i.jsx)("div",{className:"ml-3 rounded-xl bg-yellow-400 bg-opacity-80 px-2 py-1 shadow-md",children:"verification pending"})]}),a&&p&&(0,i.jsx)(m.sOR,{className:"ml-2 h-5 w-5 animate-spin text-blue-600 sm:ml-4","aria-hidden":"true"})]}),(0,i.jsx)(m.OrA,{className:eu()({"rotate-180":a},"h-3 w-3 text-gray-600 transition sm:h-4 sm:w-4")})]}),a&&(0,i.jsxs)("div",{className:"px-2 pb-2 pt-2 text-sm text-gray-500 sm:px-4",children:[t===l.Manual&&0===s.vestingDetails.userList.length&&(0,i.jsx)(A.zx,{disabled:p,className:"flex w-full sm:w-fit",size:"sm",onClick:()=>er(),icon:!1,children:"Add address"}),t===l.GoogleDrive&&(!s.vestingDetails.parsed||0===s.vestingDetails.userList.length)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"mb-4 font-medium text-black",children:"Make sure that your file includes all required fields before uploading."}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,i.jsxs)(A.EX,{className:"flex items-center justify-center rounded-md bg-gray-200 px-4 py-2 text-sm font-medium text-blue-600 hover:bg-gray-300 sm:w-full sm:max-w-fit lg:w-fit",href:"https://docs.google.com/spreadsheets/d/1mQIPUMJPI_RZjc7vzt2ZvE3FbXF_oMc7zrFpihYGs8A/edit#gid=0",children:["See template",(0,i.jsx)("div",{className:"ml-2 flex items-center text-blue-600 opacity-70",children:(0,i.jsx)(V.wgi,{className:"h-4 w-4"})})]}),M?(0,i.jsxs)(A.zx,{className:"flex w-full justify-center sm:w-fit",disabled:p,size:"sm",onClick:()=>G(M),children:["Open Google Drive",(0,i.jsx)("div",{className:"ml-2 flex justify-center",children:(0,i.jsx)(F(),{src:eN,alt:"google-drive-icon"})})]}):(0,i.jsx)(A.zx,{disabled:p,className:"flex w-full justify-center sm:w-fit",size:"sm",onClick:()=>Z(),icon:(0,i.jsx)(F(),{src:eN,alt:"google-drive-icon"}),children:"Sign in with Google"})]})]}),t===l.CsvOrExcel&&(!s.vestingDetails.parsed||0===s.vestingDetails.userList.length)&&(0,i.jsxs)("div",{className:"flex w-full flex-col",children:[(0,i.jsx)("p",{className:"mb-4 font-medium text-black",children:"Make sure that your file includes all required fields before uploading."}),(0,i.jsxs)(A.EX,{className:"flex w-full items-center justify-center rounded-md bg-gray-200 px-12 py-2 text-sm font-medium text-blue-600 hover:bg-gray-300 sm:max-w-fit",href:"https://docs.google.com/spreadsheets/d/1mQIPUMJPI_RZjc7vzt2ZvE3FbXF_oMc7zrFpihYGs8A/edit#gid=0",children:["See template",(0,i.jsx)("div",{className:"ml-2 flex items-center text-blue-600 opacity-70",children:(0,i.jsx)(V.wgi,{className:"h-4 w-4"})})]}),(0,i.jsxs)("div",{className:eu()({"border border-solid":ei,"border-dashed":!ei},"mt-4 flex w-full flex-col justify-center gap-4 rounded-lg border-2 border-blue-600 bg-gray-100 p-4 hover:border-solid"),...en(),children:[(0,i.jsx)("input",{...el()}),(0,i.jsx)("p",{className:"text-center font-medium text-black",children:"Drop file here (Excel or CSV)"}),(0,i.jsx)(A.zx,{className:"flex w-full",size:"sm",icon:!1,children:"or select file"})]})]}),s.vestingDetails.userList.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"mb-3 mt-2 rounded-lg bg-gray-100 sm:w-full",children:[s.vestingDetails.filename&&(0,i.jsxs)("div",{className:"mb-4 flex items-center space-x-4",children:[(0,i.jsx)("p",{className:"text-lg font-medium text-black",children:s.vestingDetails.filename}),(0,i.jsx)("button",{disabled:p,type:"button",onClick:()=>X(),className:"flex items-center justify-center p-0.5 text-gray-500 sm:rounded-md sm:border sm:border-gray-300 sm:p-2",children:(0,i.jsx)(V.ZkW,{className:"h-4 w-4"})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-2 text-sm font-medium text-gray-600",children:[(0,i.jsx)("p",{children:"Token balance"}),(0,i.jsx)("p",{className:"font-medium text-black ",children:"".concat((0,u.xG)(Number(C.formatUnits(s.tokenInfo.balance,s.tokenInfo.decimals)))," ").concat(s.tokenInfo.symbol)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between py-2 text-sm font-medium text-gray-600",children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Total vesting amount"}),(0,i.jsx)("p",{className:"font-medium text-black",children:"".concat(C.formatUnits(s.vestingDetails.totalAmount,s.tokenInfo.decimals)," ").concat(s.tokenInfo.symbol)})]})]}),s.vestingDetails.userList.map((e,t)=>(0,i.jsx)($.p,{className:"mb-1 rounded-md border bg-white sm:w-full",as:"div",defaultOpen:Object.values(e.errors).some(e=>!0===e),children:s=>{var a,r,n,l,o,c,d,u,x;let{open:f}=s;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:eu()({"border-b":f},"flex w-full items-center justify-between px-2 py-2 text-left text-sm font-medium text-black focus:outline-none sm:px-4 "),children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("span",{className:"mr-2 sm:mr-4",children:[t+1,"."]}),Object.values(e.errors).some(e=>!0===e)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"}),(0,i.jsx)("span",{className:"ml-1",children:e.errors.invalidArguments?"Invalid arguments":(0,S.Xn)(e.address)})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(et,{text:"Edit",children:(0,i.jsx)("button",{disabled:p,type:"button",onClick:()=>es(e),className:"mr-1 flex items-center justify-center p-0.5 text-gray-500 sm:rounded-md sm:border sm:border-gray-300 sm:p-2",children:(0,i.jsx)(V.zmo,{className:"h-4 w-4"})})}),(0,i.jsx)(et,{text:"Copy",children:(0,i.jsx)("button",{disabled:p,type:"button",onClick:()=>ea(e),className:"mr-1 flex items-center justify-center p-0.5 text-gray-500 sm:rounded-md sm:border sm:border-gray-300 sm:p-2",children:(0,i.jsx)(V.EiA,{className:"h-4 w-4"})})}),(0,i.jsx)(et,{text:"Delete",children:(0,i.jsx)("button",{disabled:p,type:"button",onClick:()=>J(e),className:"flex items-center justify-center p-0.5 text-gray-500 sm:rounded-md sm:border sm:border-gray-300 sm:p-2",children:(0,i.jsx)(V.ZkW,{className:"h-4 w-4"})})}),(0,i.jsx)($.p.Button,{disabled:p,children:(0,i.jsx)("div",{className:"ml-4",children:(0,i.jsx)(m.OrA,{className:eu()({"rotate-180":f},"h-3 w-3 text-gray-600 transition sm:h-4 sm:w-4")})})})]})]}),(0,i.jsx)(eh.M,{children:f&&(0,i.jsxs)(h.E.div,{variants:H,initial:"collapsed",animate:"open",exit:"collapsed",className:"mt-3 px-3 pb-3 text-sm text-gray-200",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-2",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Number of tokens to vest"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"font-medium text-black",children:e.amount}),(null===(a=e.errors)||void 0===a?void 0:a.amount)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Wallet nickname"}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("span",{className:"text-right font-medium text-black",children:e.nickname})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Relationship"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-right font-medium text-black",children:e.relationship}),(null===(r=e.errors)||void 0===r?void 0:r.relationship)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Start date"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-right font-medium text-black",children:e.start}),(null===(n=e.errors)||void 0===n?void 0:n.start)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Start time (UTC)"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-right font-medium text-black",children:e.startTime?e.startTime:"00:00"}),(null===(l=e.errors)||void 0===l?void 0:l.startTime)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"End date"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-right font-medium text-black",children:e.end}),(null===(o=e.errors)||void 0===o?void 0:o.start)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Total vesting period"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-right font-medium text-black",children:e.lengthOfSchedule}),(null===(c=e.errors)||void 0===c?void 0:c.lengthOfSchedule)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Vesting cadence"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-right font-medium text-black",children:e.cadence}),(null===(d=e.errors)||void 0===d?void 0:d.cadence)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Lockup length"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-right font-medium text-black",children:"".concat(e.lockupLength||"0"," Months")}),(null===(u=e.errors)||void 0===u?void 0:u.lockupLength)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between pb-1 pt-3",children:[(0,i.jsx)("span",{className:"text-neutral-600",children:"Lockup percentage"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("span",{className:"text-right font-medium text-black",children:[e.percentageOnStart||"0","%"]}),(null===(x=e.errors)||void 0===x?void 0:x.percentageOnStart)&&(0,i.jsx)(F(),{src:eL,width:16,height:16,alt:"error_icon"})]})]})]},e.address)})]})}},e.address+t.toString())),s.vestingDetails.merkleRoot&&(0,i.jsxs)("div",{className:"my-2 sm:flex",children:[(0,i.jsx)(A.zx,{disabled:p,className:"flex w-full sm:w-fit",size:"sm",onClick:()=>er(),icon:!1,children:"Add address"}),(0,i.jsxs)(A.zx,{disabled:p,variant:"secondary",className:"mt-2 flex w-full sm:ml-2 sm:mt-0 sm:w-fit",size:"sm",onClick:()=>W(),children:["Download updated CSV file",(0,i.jsx)("div",{className:"ml-2 flex items-center text-blue-600",children:(0,i.jsx)(V._TA,{className:"h-4 w-4"})})]})]})]})]})]},t)}),(0,i.jsx)(A.zx,{className:"mt-8 w-full sm:max-w-fit",disabled:p||!!s.vestingDetails.errorMsg||!s.vestingDetails.parsed||s.vestingDetails.errorMsgs.length>0,isLoading:p,onClick:()=>z(),children:"Continue"})]}):(0,i.jsx)(c.sP,{activeStep:s.activeStep,index:n,step:r,goToStep:()=>t({type:b.a.GO_TO_STEP,payload:n}),children:s.vestingDetails.name&&(0,i.jsx)("div",{className:"flex items-center gap-x-1.5",children:(0,i.jsx)("p",{className:"text-xs sm:text-base",children:s.vestingDetails.name})})})]})}function eM(e){let{state:t,dispatch:s,href:a,claimHref:r,userProgress:l}=e,{address:m}=(0,p.mA)(),{chain:y}=(0,p.LN)(),{data:v}=(0,p.mx)(),[w,j]=(0,o.useState)(!1),[N,k]=(0,o.useState)(!0),[S,A]=(0,o.useState)(!1),[E,T]=(0,o.useState)(!!l);return(0,o.useEffect)(()=>{t.walletDetails.account&&t.activeStep>n.CONNECT_WALLET&&m!==t.walletDetails.account&&s({type:b.a.HANDLE_ACCOUNT_DETAILS_CHANGED,payload:{errorMsg:"Wallet changed. Please select the correct wallet and continue.",activeStep:n.CONNECT_WALLET}})},[m,t.walletDetails.account,s,t.activeStep]),(0,o.useEffect)(()=>{t.activeStep>n.SELECT_CHAIN&&(0,u.i6)(null==y?void 0:y.id)!==t.walletDetails.chainId&&s({type:b.a.HANDLE_ACCOUNT_DETAILS_CHANGED,payload:{errorMsg:"Blockchain changed. Please select the correct blockchain and continue.",activeStep:n.SELECT_CHAIN}})},[y,t.walletDetails.chainId,s,t.activeStep]),(0,o.useEffect)(()=>{(!t.walletDetails.account&&m||t.activeStep===n.CONNECT_WALLET)&&s({type:b.a.SET_ACCOUNT,payload:{account:m}})},[m,t.walletDetails.account,t.activeStep,s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.PB,{title:"Team Finance App - Create Token Vesting Contract",titleTemplate:"%s"}),t.showWaitingScreen&&(0,i.jsx)(c.QD,{logoHeader:g,subText:"Token: ".concat(t.tokenInfo.symbol),faqData:R}),t.showOutcomeScreen&&(0,i.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5,ease:"easeOut"},children:(0,i.jsx)(z,{state:t,startOver:()=>{window.dataLayer.push({event:"db_vesting_try_again"}),s({type:b.a.HANDLE_START_OVER,payload:null})},href:a,claimHref:r,eventSuccess:"db_vesting_visit_page",eventsCertification:"db_vesting"})}),t.showStepContainer&&(0,i.jsxs)(c.o3,{href:a,logoHeader:f,collapsed:w,setCollapsed:j,collapsedMobile:N,setCollapsedMobile:k,title:"Create vesting contract",faqData:R,showModal:A,children:[(0,i.jsx)(c.Rg,{state:t,stepDescriptions:J,goToStep:e=>{s({type:b.a.GO_TO_STEP,payload:e})}}),(0,i.jsxs)("div",{className:"mt-4 flex flex-col gap-1",children:[(0,i.jsx)(c.Rk,{step:J[n.CONNECT_WALLET],index:n.CONNECT_WALLET,activeStep:t.activeStep,errorMsg:t.errorMsg,event:"db_vesting_wallet_connected",goToStep:()=>s({type:b.a.GO_TO_STEP,payload:n.CONNECT_WALLET}),handleNext:()=>s({type:b.a.HANDLE_NEXT,payload:null})}),(0,i.jsx)(c.jP,{availableChains:d.ZP.filter(e=>"Algorand"!==e.name),step:J[n.SELECT_CHAIN],index:n.SELECT_CHAIN,collapsed:w,activeStep:t.activeStep,errorMsg:t.errorMsg,chainId:t.walletDetails.chainId,setChainId:e=>{s({type:b.a.SET_CHAIN_ID,payload:{chainId:e}}),window.dataLayer.push({event:"db_vesting_chain_selected",chain:(0,u.C7)(e)})},goToStep:()=>s({type:b.a.GO_TO_STEP,payload:n.SELECT_CHAIN})}),(0,i.jsx)(X,{dispatch:s,state:t,step:J[n.SELECT_TOKEN],index:n.SELECT_TOKEN,event:"db_vesting_address_entered"}),(0,i.jsx)(eI,{dispatch:s,state:t,signer:v,step:J[n.UPLOAD_CSV],index:n.UPLOAD_CSV,event:"db_vesting_details_added",collapsed:w}),(0,i.jsx)(M,{dispatch:s,state:t,step:J[n.DEPLOY_CONTRACT],index:n.DEPLOY_CONTRACT,approveEvent:"db_vesting_gave_permission",lockEventFailure:"db_vesting_fail",lockEventSuccess:"db_vesting_success"})]})]}),(0,i.jsx)(c.oe,{open:S,setOpen:A,state:t}),(0,i.jsx)(c.jo,{open:E,setOpen:T,userProgress:l,dispatch:s})]})}(r=l||(l={}))[r.Manual=0]="Manual",r[r.GoogleDrive=1]="GoogleDrive",r[r.CsvOrExcel=2]="CsvOrExcel",eM.defaultProps={href:"/",claimHref:"/claim",userProgress:void 0};let eR={activeStep:n.CONNECT_WALLET,walletDetails:{chainId:"",account:"",errorMsg:""},tokenInfo:{address:"",symbol:"",name:"",decimals:18,balance:E.O$.from(0),errorMsg:""},vestingDetails:{name:"",merkleRoot:"",totalAmount:E.O$.from(0),vestingAddress:"",errorMsgs:[],userList:[],parsed:!1,filename:"",errorMsg:""},approved:!1,success:!1,transactionHash:"",errorMsg:"",requesting:!1,showWaitingConfirmModal:!1,showWaitingScreen:!1,showOutcomeScreen:!1,showStepContainer:!0};function eP(e,t){switch(t.type){case"loadProgress":return{...t.payload,showStepContainer:!0};case"handleNext":return{...e,activeStep:e.activeStep+1,errorMsg:""};case"goToStep":return{...e,activeStep:t.payload};case"handleLastStep":return{...e,activeStep:n.OUTCOME,errorMsg:t.payload.errorMsg};case"handleAccountDetailsChanged":return{...eR,walletDetails:{...e.walletDetails,chainId:"",errorMsg:t.payload.errorMsg},errorMsg:t.payload.errorMsg,activeStep:t.payload.activeStep,showStepContainer:!0};case"handleStartOver":return{...eR};case"setErrorMsg":return{...e,errorMsg:t.payload.errorMsg};case"setChainId":if(t.payload.chainId!==e.walletDetails.chainId)return{...e,walletDetails:{...e.walletDetails,chainId:t.payload.chainId},tokenInfo:eR.tokenInfo,vestingDetails:eR.vestingDetails,activeStep:e.activeStep+1};return{...e,walletDetails:{...e.walletDetails,chainId:t.payload.chainId},activeStep:e.activeStep+1};case"setAccount":if(e.walletDetails.account!==t.payload.account)return{...e,walletDetails:{...eR.walletDetails,account:t.payload.account},vestingDetails:eR.vestingDetails};return{...e};case"setTokenInfo":return{...e,tokenInfo:t.payload.tokenInfo,vestingDetails:eR.vestingDetails,errorMsg:""};case"resetTokenInfo":return{...e,tokenInfo:{...eR.tokenInfo,errorMsg:t.payload.errorMsg},errorMsg:t.payload.errorMsg};case"setMerkleDetails":return{...e,vestingDetails:{...e.vestingDetails,merkleRoot:t.payload.merkleRoot,totalAmount:t.payload.totalAmount}};case"setVestingDetails":return{...e,vestingDetails:{...e.vestingDetails,errorMsgs:t.payload.errorMsgs,parsed:t.payload.parsed,name:t.payload.name,userList:t.payload.userList,filename:t.payload.filename,errorMsg:""},errorMsg:""};case"setVestingDetailsError":return{...e,vestingDetails:{...e.vestingDetails,errorMsg:t.payload.errorMsg},errorMsg:t.payload.errorMsg};case"resetVestingDetails":return{...e,vestingDetails:{...eR.vestingDetails,userList:[]},errorMsg:""};case"updateUserList":return{...e,vestingDetails:{...e.vestingDetails,userList:t.payload.userList}};case"setApproved":return{...e,approved:!0};case"setRequestingVesting":return{...e,showWaitingConfirmModal:!0,requesting:!0,errorMsg:""};case"setVisibleModalWaitingConfirm":return{...e,showWaitingConfirmModal:t.payload};case"setTransactionHash":return{...e,transactionHash:t.payload.transactionHash,showWaitingConfirmModal:!1,showStepContainer:!1,showWaitingScreen:!0,showOutcomeScreen:!1};case"setOutcome":return{...e,success:t.payload.success,errorMsg:t.payload.errorMsg,vestingDetails:{...e.vestingDetails,vestingAddress:t.payload.vestingAddress},activeStep:e.activeStep!==n.OUTCOME?e.activeStep+1:e.activeStep,showWaitingConfirmModal:!1,showWaitingScreen:!1,showOutcomeScreen:!0,showStepContainer:!1,requesting:!1};case"setShowStepContainer":return{...e,showWaitingConfirmModal:!1,showWaitingScreen:!1,showOutcomeScreen:!1,showStepContainer:t.payload.showStepContainer};default:throw Error()}}var eU=s(97729),eF=s.n(eU);function eH(e){let{userProgress:t}=e,[s,a]=(0,o.useReducer)(eP,eR);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eF(),{children:[(0,i.jsx)("link",{rel:"alternate",href:"https://www.team.finance/vesting"}),(0,i.jsx)("link",{rel:"canonical",href:"https://app.team.finance/vesting"})]}),(0,i.jsx)(eM,{state:s,dispatch:a,href:"/",claimHref:"/token-vesting",userProgress:t})]})}eH.defaultProps={userProgress:void 0};var eW=!0,eB=eH},46601:function(){},33196:function(){},38087:function(){},87374:function(){},29285:function(){},12858:function(){},16866:function(){},72464:function(){}},function(e){e.O(0,[424,131,713,195,149,642,286,423,727,808,887,1,774,888,179],function(){return e(e.s=18126)}),_N_E=e.O()}]);