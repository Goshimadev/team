(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{84305:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/token-vesting",function(){return a(51001)}])},67748:function(e,t,a){"use strict";a.d(t,{De:function(){return i},uc:function(){return f}});var s=a(52322),l=a(33018),n=a(32867);a(2784);var r=["#0358D9","#8ACBF0","#37298D","#8398E3","#8D57CA"];function i(e){let{setActiveIndex:t,data:a}=e;return(0,s.jsx)("div",{className:"grid w-full grid-cols-2 gap-4 xl:grid-cols-4",children:a.map((e,a)=>(0,s.jsxs)("div",{className:"cursor-default",onMouseEnter:()=>t(a),onMouseLeave:()=>t(void 0),children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center gap-1",children:[(0,s.jsx)("div",{className:"h-3.5 w-3.5 rounded-full bg-[".concat(r[a%r.length],"]")}),(0,s.jsx)(l.ZT,{variant:"caption-1",children:e.name})]}),(0,s.jsx)(l.ZT,{variant:"subtitle-6",children:e.value?(0,n.CJ)(e.value,2):"0"})]},e.name))})}var c=a(21844),d=a(61660),o=a(51716),m=a(85789),x=a(11011);let u=e=>{let{cx:t,cy:a,innerRadius:l,outerRadius:n,startAngle:r,endAngle:i,fill:d}=e;return(0,s.jsxs)("g",{children:[(0,s.jsx)(c.L,{cx:t,cy:a,innerRadius:l,outerRadius:n,startAngle:r,endAngle:i,fill:d}),(0,s.jsx)(c.L,{cx:t,cy:a,startAngle:r,endAngle:i,innerRadius:n+6,outerRadius:n+10,fill:d})]})};function f(e){let{activeIndex:t,data:a}=e;return(0,s.jsx)(d.h,{width:"100%",height:"100%",children:(0,s.jsx)(o.u,{width:300,height:300,margin:{top:20,right:25,left:25,bottom:20},children:(0,s.jsx)(m.b,{activeIndex:t,activeShape:u,data:a,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,dataKey:"value",children:null==a?void 0:a.map((e,t)=>(0,s.jsx)(x.b,{focusable:!1,fill:r[t%r.length]},"cell-".concat(e.name)))})})})}f.defaultProps={activeIndex:void 0}},60740:function(e,t,a){"use strict";var s;a.d(t,{QH:function(){return n},aO:function(){return s},oB:function(){return l}}),a(81713),(s||(s={})).SET_ACCOUNT="setAccount";let l=async(e,t,a,s,l,n)=>{try{let n=await e.estimateGas({from:t,to:a,value:s,data:l});return n.mul(120).div(100)}catch(e){return console.log("error estimating gas for function ".concat(n),e),Promise.reject({message:"Error occurred in estimating gas"})}},n=async(e,t,a)=>{try{let s=await e.estimateGas[a](...t);return s.mul(120).div(100)}catch(e){return console.log("error estimating gas for function ".concat(a),e),Promise.reject({message:"Error occurred in estimating gas"})}}},51001:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eP}});var s,l=a(52322),n=a(92642),r=a(35175),i=a(58379),c=a(33018),d=a(72779),o=a.n(d),m=a(84538),x=a(2784);function u(e){let{className:t,isAdmin:a,setIsAdmin:s}=e;return(0,l.jsxs)("div",{className:o()(t,"bg-blue-lm/5 flex h-10 flex-shrink-0 rounded-md p-0.5"),children:[(0,l.jsxs)("button",{type:"button",className:"relative flex w-full items-center justify-center px-3 py-1 focus:outline-none",onClick:()=>{s(!1)},children:[(0,l.jsx)(c.ZT,{className:"z-10 flex-shrink-0 px-2 text-gray-900",variant:"button-small",children:"Individual view"}),!a&&(0,l.jsx)(m.E.div,{className:"absolute left-0 top-0 z-0 h-full w-full rounded bg-white",layoutId:"switch"})]}),(0,l.jsxs)("button",{type:"button",className:"relative flex w-full items-center justify-center px-3 py-1 focus:outline-none",onClick:()=>{s(!0)},children:[(0,l.jsx)(c.ZT,{className:"z-10 flex-shrink-0 px-2 text-gray-900",variant:"button-small",children:"Admin view"}),a&&(0,l.jsx)(m.E.div,{className:"absolute left-0 top-0 z-0 h-full w-full rounded bg-white",layoutId:"switch"})]})]})}u.defaultProps={className:void 0};var f=a(8560),h=a(72375),p=a(81713),b=a(18650);async function v(e){try{let t=e.map(e=>({address:e.address,abi:p.qU,functionName:e.functionName,args:e.args}));return await (0,b.Ap)({contracts:t})}catch(e){return Promise.reject(e)}}async function g(e,t,a){try{let s=await (0,b.$q)({address:e,abi:p.qU,functionName:"claim",args:t}),{hash:l}=await (0,b.n9)(s);return a&&a(l),await (0,b.Mn)({hash:l})}catch(e){return Promise.reject(e)}}var j=a(16962),y=a(32867),w=a(59656),N=a(96577),k=a.n(N),S=a(77245),P=a(65186),E=a(72477),I=a(65516);function M(e){var t;let{open:a,setOpen:s,vesting:r,walletAddress:i,setClaimed:d}=e,[o,m]=(0,x.useState)(!1),[u,f]=(0,x.useState)(!1),[h,p]=(0,x.useState)(!1),[b,v]=(0,x.useState)(""),[N,M]=(0,x.useState)(0),D=e=>{M(1),v(e),f(!0)},T=async()=>{try{m(!0),await g(r.address,[r.index,i,r.userTotal,r.revocable,r.start,r.end,r.cadence,r.percentageOnStart,r.proof,r.claimable],D),p(!0),d(r)}catch(e){window.dataLayer.push({event:"vesting-claim-failed"}),console.error(e),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")||n.Tb(e)}finally{m(!1),f(!1)}},C=w.formatUnits(null===(t=r.claimable)||void 0===t?void 0:t.toString(),r.tokenDecimals);return(0,l.jsxs)(c.u_,{className:"sm:!w-[480px]",title:N>0&&u?"Withdrawing ".concat(C," ").concat(r.tokenSymbol):"Withdraw tokens",open:a,setOpen:()=>s(!1),isLoading:N>0,children:[0===N&&(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{children:"You have tokens that can be withdrawn."}),(0,l.jsxs)("div",{className:"mb-2 mt-4 flex w-full justify-between",children:[(0,l.jsx)("span",{className:"text-left text-[#222222]/60",children:"Amount"}),(0,l.jsx)("span",{className:"text-right text-[#222222]",children:"".concat(C," ").concat(r.tokenSymbol)})]}),(0,l.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,l.jsx)("span",{className:"text-left text-[#222222]/60",children:"Deposit to"}),(0,l.jsx)("span",{className:"text-right text-[#222222]",children:(0,j.Xn)(i)})]}),(0,l.jsx)(c.zx,{disabled:o||r.claimable.eq(0),isLoading:o,onClick:()=>T(),children:"Withdraw"})]}),N>0&&u&&(0,l.jsx)("div",{className:"my-[100px] flex flex-col",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("p",{className:"mb-6 text-xl font-semibold",children:"Withdrawal underway, please wait..."}),(0,l.jsx)("div",{className:"shim-green h-1.5 rounded-full",style:{width:"100%"}}),(0,l.jsx)(c.ZP,{className:"mt-4 w-fit !bg-[#0876DD]/60 !font-medium",href:(0,y.wE)(r.chainId,b),icon:(0,l.jsx)(P.N_X,{className:"text-white/60",size:18}),children:"View Transaction"})]})}),N>0&&!u&&h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"my-[80px] flex flex-col px-2 md:px-8",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(k(),{src:I.Z,alt:"success"}),(0,l.jsx)("p",{className:"mt-6 text-xl font-semibold",children:"".concat(C," ").concat(r.tokenSymbol," has been withdrawn successfully")}),(0,l.jsx)(c.ZP,{className:"mt-6 w-fit !bg-[#0876DD]/60 !font-medium",href:(0,y.wE)(r.chainId,b),icon:(0,l.jsx)(S.rpH,{className:"text-white/60",size:18}),children:"View on block explorer"})]})}),(0,l.jsx)(c.zx,{onClick:()=>s(!1),className:"w-full",variant:"secondary",children:"Got it!"})]}),N>0&&!u&&!h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"my-[80px] flex flex-col px-2 md:px-8",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(k(),{src:E.Z,alt:"error"}),(0,l.jsx)("p",{className:"mb-1.5 mt-6 text-xl font-semibold",children:"Transaction failed!"}),(0,l.jsxs)("p",{children:["Please try again of"," ",(0,l.jsx)(c.EX,{className:"underline",href:y.UY.telegram,children:"contact our support"}),"."]}),(0,l.jsx)(c.ZP,{className:"mt-6 w-fit !bg-[#0876DD]/60 !font-medium",href:(0,y.wE)(r.chainId,b),icon:(0,l.jsx)(S.rpH,{className:"text-white/60",size:18}),children:"More details"})]})}),(0,l.jsx)(c.zx,{onClick:()=>M(0),className:"w-full",variant:"secondary",children:"Try again"})]})]})}var D=a(60740),T=a(30171),C=a(99268),A=a(10528),Y=a(44304);function z(e){let{open:t,setOpen:a,balanceMap:s}=e,[r,i]=(0,x.useState)(!1),[d,o]=(0,x.useState)(!1),[m,u]=(0,x.useState)(""),{data:f}=(0,Y.mx)(),{address:h}=(0,Y.mA)(),[b,v]=(0,x.useState)(!1),[g,w]=(0,x.useState)(!1),[N,M]=(0,x.useState)(""),[z,Z]=(0,x.useState)(0);(0,x.useEffect)(()=>{u(h)},[h]);let O=async()=>{try{i(!0);let e=new T.CH(s.contractAddress,p.qU,f);console.log(s.index,s.address,s.amount,s.revocable,s.start,s.end,s.cadence,s.percentageOnStart,s.proof);let t=[s.index,s.address,s.amount,s.revocable,s.start,s.end,s.cadence,s.percentageOnStart,s.proof],a=new C.vU(p.qU),l=a.encodeFunctionData("stopVesting",t),n=await (0,D.oB)(f,h,s.contractAddress,A.O$.from(0),l,"stopVesting"),r=await e.stopVesting(s.index,s.address,s.amount,s.revocable,s.start,s.end,s.cadence,s.percentageOnStart,s.proof,{gasLimit:n});Z(1),M(r.hash),v(!0),await r.wait(),v(!1),w(!0)}catch(e){console.error(e),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")||e.message.includes("User rejected request")||(n.Tb(e),w(!1),Z(1))}finally{i(!1)}};return(0,l.jsxs)(c.u_,{className:"sm:!w-[480px]",title:"End vesting contract",open:t,setOpen:()=>a(!1),isLoading:z>0,children:[0===z&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Are you sure you wish to end this vesting contract? Unvested tokens will be withdrawn to the wallet address listed below."}),(0,l.jsxs)("div",{className:"my-4 flex flex-col space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Total tokens in contract"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:s.allocation})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Vested tokens"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:s.vested})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Unvested tokens"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:s.unvested})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Withdraw to"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:(0,j.Xn)(m)})]})]}),(0,l.jsxs)("div",{className:"mb-2 flex w-full items-center",children:[(0,l.jsx)(c.II,{className:"mr-2 flex h-fit",checked:d,onChange:()=>o(e=>!e),type:"checkbox"}),(0,l.jsx)("span",{children:"I understand that this action cannot be undone."})]}),(0,l.jsx)(c.zx,{disabled:r||!d,isLoading:r,onClick:()=>O(),className:"w-full",children:"End contract"})]}),z>0&&b&&(0,l.jsx)("div",{className:"my-[100px] flex flex-col",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("p",{className:"mb-6 text-xl font-semibold",children:"Withdrawal underway, please wait..."}),(0,l.jsx)("div",{className:"shim-green h-1.5 rounded-full",style:{width:"100%"}}),(0,l.jsx)(c.ZP,{className:"mt-4 w-fit !bg-[#0876DD]/60 !font-medium",href:(0,y.wE)(s.chainId,N),icon:(0,l.jsx)(P.N_X,{className:"text-white/60",size:18}),children:"View Transaction"})]})}),z>0&&!b&&g&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"my-[80px] flex flex-col px-2 md:px-8",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(k(),{src:I.Z,alt:"success"}),(0,l.jsx)("p",{className:"mt-6 text-xl font-semibold",children:"Vesting contract has been ended successfully!"}),(0,l.jsx)(c.ZP,{className:"mt-6 w-fit !bg-[#0876DD]/60 !font-medium",href:(0,y.wE)(s.chainId,N),icon:(0,l.jsx)(S.rpH,{className:"text-white/60",size:18}),children:"View on block explorer"})]})}),(0,l.jsx)(c.zx,{onClick:()=>a(!1),className:"w-full",variant:"secondary",children:"Got it!"})]}),z>0&&!b&&!g&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"my-[80px] flex flex-col px-2 md:px-8",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(k(),{src:E.Z,alt:"error"}),(0,l.jsx)("p",{className:"mb-1.5 mt-6 text-xl font-semibold",children:"Transaction failed!"}),(0,l.jsxs)("p",{children:["Please try again of"," ",(0,l.jsx)(c.EX,{className:"underline",href:y.UY.telegram,children:"contact our support"}),"."]}),(0,l.jsx)(c.ZP,{className:"mt-6 w-fit !bg-[#0876DD]/60 !font-medium",href:(0,y.wE)(s.chainId,N),icon:(0,l.jsx)(S.rpH,{className:"text-white/60",size:18}),children:"More details"})]})}),(0,l.jsx)(c.zx,{onClick:()=>Z(0),className:"w-full",variant:"secondary",children:"Try again"})]})]})}var Z=a(56780),O=a(19034),F=a.n(O);let V="DD MMM YYYY hh:mm A";function U(e){let{open:t,setOpen:a,walletAddress:s,tokenAddress:n,chainId:r,allocation:i,decimals:d,symbol:o,revocable:m,cadence:x,start:u,end:f}=e;return(0,l.jsx)(c.u_,{title:"Vesting contract",open:t,setOpen:()=>a(!1),children:(0,l.jsxs)("div",{className:"flex w-96 flex-col",children:[(0,l.jsx)("p",{className:"text-xl font-semibold",children:"Vesting plan ".concat(F()(1e3*u).format("DD MMM YYYY"))}),(0,l.jsx)("div",{className:"mb-3 text-left text-[#222222]",children:(0,l.jsx)("p",{children:"To wallet ".concat((0,j.Xn)(s))})}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Allocation"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(c.Oi,{className:"mr-2 h-5 w-5",src:(0,Z.XP)(n),alt:"vesting-token",chainId:r}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:"".concat(w.formatUnits(i.toString(),d)," ").concat(o)})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Type"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:m?"Employee":"Investor"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Cadence"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:(0,y.td)(x)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"Start date"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:F()(1e3*u).format(V)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-[#222222]/60",children:"End date"}),(0,l.jsx)("span",{className:"text-left text-[#222222]",children:F()(1e3*f).format(V)})]})]})]})})}var _=a(72070),X=a(64019),R=a(39708),q=a(68810),B=a(33967),L=a(44950),W=a(75100);let H=["All","Investor","Employee"],G=["All","Available","In progress","Withdrawn","Terminated","Upcoming"],$={tokenName:"",startPeriodStart:null,startPeriodEnd:null,endPeriodStart:null,endPeriodEnd:null,relationship:H[0],status:G[0],recipient:""};function J(e){let{tokens:t,recipients:a,setFilter:s,open:n,setOpen:r,setFilterActive:i}=e,[d,m]=(0,x.useState)({...$}),[u,f]=(0,x.useState)({...$}),[h,p]=(0,x.useState)(!1);(0,x.useEffect)(()=>{Object.keys(d).forEach(e=>d[e]===u[e]||(p(!0),!1))},[d,u]);let b=()=>{r(!1),m(u)},v=()=>{m({...$})},g=()=>{try{s({tokenName:d.tokenName,startPeriodStart:d.startPeriodStart?d.startPeriodStart.getTime()/1e3:0,startPeriodEnd:d.startPeriodEnd?d.startPeriodEnd.getTime()/1e3:0,endPeriodStart:d.endPeriodStart?d.endPeriodStart.getTime()/1e3:0,endPeriodEnd:d.endPeriodEnd?d.endPeriodEnd.getTime()/1e3:0,status:d.status,relationship:d.relationship,recipient:d.recipient}),r(!1),p(!1),f({tokenName:d.tokenName,startPeriodStart:d.startPeriodStart,startPeriodEnd:d.startPeriodEnd,endPeriodStart:d.endPeriodStart,endPeriodEnd:d.endPeriodEnd,status:d.status,recipient:d.recipient});let e=!1;Object.keys(d).forEach(t=>d[t]===$[t]||(e=!0,!1)),i(e)}catch(e){console.error(e)}},j=e=>{m(t=>({...t,relationship:e}))};return(0,l.jsx)(c.u_,{title:"Filter",open:n,setOpen:r,children:(0,l.jsxs)("main",{className:"flex w-fit flex-col items-start justify-start gap-3 text-left",children:[(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Vested token"}),(0,l.jsxs)(R.v,{as:"div",className:"relative inline-block w-full text-left",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(R.v.Button,{className:"border-dark-700 inline-flex w-full items-center justify-between gap-x-1 rounded-md border px-3 py-2 hover:bg-gray-200 focus:outline-none disabled:cursor-not-allowed",children:[d.tokenName||"Select token",(0,l.jsx)(W.ZXJ,{className:"text-[#222222]/60"})]})}),(0,l.jsx)(q.u,{as:x.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,l.jsx)(R.v.Items,{className:"absolute right-0 z-40 mt-1 w-full justify-start rounded border bg-white text-left focus:outline-none",children:(0,l.jsx)("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 max-h-40 overflow-auto py-1",children:null==t?void 0:t.map(e=>(0,l.jsx)(R.v.Item,{children:(0,l.jsx)("button",{type:"button",className:"w-full p-2 text-left text-sm transition duration-100 hover:bg-gray-200",onClick:()=>{m(t=>({...t,tokenName:e}))},children:e})},e))})})})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Vesting start period"}),(0,l.jsx)(L.Z,{selected:d.startPeriodStart,startDate:d.startPeriodStart,endDate:d.startPeriodEnd,setStartDate:e=>m(t=>({...t,startPeriodStart:e})),setEndDate:e=>m(t=>({...t,startPeriodEnd:e}))})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Vesting end period"}),(0,l.jsx)(L.Z,{selected:d.endPeriodStart,startDate:d.endPeriodStart,endDate:d.endPeriodEnd,setStartDate:e=>m(t=>({...t,endPeriodStart:e})),setEndDate:e=>m(t=>({...t,endPeriodEnd:e}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold",children:"Type"}),(0,l.jsxs)(B.E,{value:d.relationship,onChange:e=>{j(e)},children:[(0,l.jsx)(B.E.Label,{className:"sr-only",children:"relationships"}),(0,l.jsx)("div",{className:"mt-1 flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:Object.values(H).map(e=>(0,l.jsx)(B.E.Option,{value:e,className:e=>{let{active:t,checked:a}=e;return o()({"ring-2 ring-blue-300":t,"border-blue-600":a,"border-neutral-300":!a},"flex cursor-pointer select-none rounded border bg-white px-4 py-2")},children:t=>{let{active:a,checked:s}=t;return(0,l.jsx)("div",{className:"inline-flex w-full items-center space-x-4 text-left",children:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsx)(B.E.Label,{as:"h6",className:"text-sm",children:e}),(0,l.jsx)("span",{className:o()({"border-transparent ring-2 ring-blue-300":a,"border-transparent bg-blue-600":s,"bg-white":!s},"ml-2 mt-0.5 flex h-4 w-4 shrink-0 items-center justify-center rounded-full border border-neutral-300"),"aria-hidden":"true",children:(0,l.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-white"})})]})})}},e))})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Status"}),(0,l.jsxs)(R.v,{as:"div",className:"relative inline-block w-full text-left",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(R.v.Button,{className:"border-dark-700 inline-flex w-full items-center justify-between gap-x-1 rounded-md border px-3 py-2 hover:bg-gray-200 focus:outline-none disabled:cursor-not-allowed",children:[d.status,(0,l.jsx)(W.ZXJ,{className:"text-[#222222]/60"})]})}),(0,l.jsx)(q.u,{as:x.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,l.jsx)(R.v.Items,{className:"absolute right-0 z-40 mt-1 w-full justify-start rounded border bg-white text-left focus:outline-none",children:(0,l.jsx)("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 max-h-40 overflow-auto py-1",children:G.map(e=>(0,l.jsx)(R.v.Item,{children:(0,l.jsx)("button",{type:"button",className:"w-full p-2 text-left text-sm transition duration-100 hover:bg-gray-200",onClick:()=>{m({...d,status:e})},children:e})},e))})})})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Recipient"}),(0,l.jsxs)(R.v,{as:"div",className:"relative inline-block w-full text-left",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(R.v.Button,{className:"border-dark-700 inline-flex w-full items-center justify-between gap-x-1 rounded-md border px-3 py-2 hover:bg-gray-200 focus:outline-none disabled:cursor-not-allowed",children:[d.recipient||"Select recipient",(0,l.jsx)(W.ZXJ,{className:"text-[#222222]/60"})]})}),(0,l.jsx)(q.u,{as:x.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,l.jsx)(R.v.Items,{className:"absolute right-0 z-40 mt-1 w-full justify-start rounded border bg-white text-left focus:outline-none",children:(0,l.jsx)("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 max-h-40 overflow-auto py-1",children:null==a?void 0:a.map(e=>(0,l.jsx)(R.v.Item,{children:(0,l.jsx)("button",{type:"button",className:"w-full p-2 text-left text-sm transition duration-100 hover:bg-gray-200",onClick:()=>{m(t=>({...t,recipient:e}))},children:e})},e))})})})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col justify-between space-y-2 sm:flex-row sm:space-x-4 sm:space-y-0",children:[(0,l.jsx)(c.zx,{className:"w-full !px-10 md:w-40",variant:"secondary",onClick:()=>b(),children:"Cancel"}),(0,l.jsx)(c.zx,{className:"w-full !px-10 text-red-600 md:w-40",variant:"secondary",onClick:()=>v(),children:"Clear all"}),(0,l.jsx)(c.zx,{className:"w-full !px-10 md:w-40",variant:"primary",onClick:()=>g(),disabled:!h,children:"Apply"})]})]})})}var K=a(67748);function Q(e){let{activeIndex:t,setActiveIndex:a,data:s}=e,n=Object.keys(s).map((e,t)=>{var a,l,n,r;return{id:t,name:(null===(a=s[e].tokenDetails)||void 0===a?void 0:a.tokenName)||"Unknown",value:e,selected:0===t,href:"https://www.team.finance/view-coin/".concat(null===(l=s[e].tokenDetails)||void 0===l?void 0:l.tokenAddress,"?&symbol=").concat(null===(n=s[e].tokenDetails)||void 0===n?void 0:n.tokenSymbol,"&chainid=").concat(null===(r=s[e].tokenDetails)||void 0===r?void 0:r.chainId)}}),[r,i]=(0,x.useState)(n[0]),[d,m]=(0,x.useState)();return(0,x.useEffect)(()=>{if(r&&s)try{var e,t,a;let l=parseFloat(w.formatUnits(s[r.value].grantedTotal,null===(e=s[r.value].tokenDetails)||void 0===e?void 0:e.tokenDecimals)),n=parseFloat(w.formatUnits(s[r.value].unvested,null===(t=s[r.value].tokenDetails)||void 0===t?void 0:t.tokenDecimals)),i=parseFloat(w.formatUnits(s[r.value].vested,null===(a=s[r.value].tokenDetails)||void 0===a?void 0:a.tokenDecimals));m([{name:"Granted",value:l},{name:"Unvested",value:n},{name:"Vested",value:i}])}catch(e){console.error(e)}else m(void 0)},[s,r]),(0,l.jsxs)("div",{className:"space-y-6 lg:space-y-3",children:[(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:gap-2",children:[(0,l.jsx)(c.ZT,{className:"flex-shrink-0",variant:"paragraph",children:"Your tokens"}),(0,l.jsx)(c.hQ,{className:"w-full md:max-w-xs",onSelect:e=>{i(e)},data:n})]}),d&&(0,l.jsxs)("div",{className:"grid w-full grid-cols-12 gap-y-4 lg:gap-x-4",children:[(0,l.jsx)("div",{className:"col-span-12 min-h-[9rem] sm:col-span-5 lg:col-span-3 lg:pb-0",children:(0,l.jsx)(K.uc,{activeIndex:t,data:d})}),(0,l.jsx)("div",{className:"col-span-12 items-center justify-around gap-4 sm:col-span-7 lg:col-span-6 lg:flex lg:pl-4",children:(0,l.jsx)(K.De,{setActiveIndex:a,data:d})}),(0,l.jsxs)("div",{className:o()("col-span-12 flex flex-shrink-0 flex-col justify-center gap-1 lg:col-span-3 lg:items-end"),children:[(0,l.jsx)(c.ZT,{variant:"body",children:"Want more info?"}),(0,l.jsx)(c.ZP,{href:null==r?void 0:r.href,className:"flex",variant:"secondary",icon:!1,children:"See Token Profile"})]})]})]})}var ee=a(14187),et=a(24886),ea=a(55041),es=a(6692),el=a.n(es);function en(e){let{variant:t,index:a,claimable:s,symbol:n,vesting:r,balanceMap:i}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex max-w-[8rem] cursor-default flex-col gap-1","data-tooltip-id":"tooltip-html-".concat(a),children:(0,l.jsxs)(c.Ct,{className:"py-1.5",variant:"available"===t?"green":"inProgress"===t?"blue":"withdrawn"===t?"gray":"terminated"===t?"red":"yellow",children:["withdrawn"!==t&&"terminated"!==t&&(0,l.jsx)("div",{className:"mr-1.5 h-[1.125rem] w-[1.125rem]",children:(0,l.jsx)(et.Ip,{strokeWidth:12,value:"available"===t?0:"inProgress"===t?0:50,styles:(0,et.y3)({pathColor:el()["available"===t?"green":"inProgress"===t?"blue":"yellow"][600],trailColor:el()["available"===t?"green":"inProgress"===t?"blue":"yellow"][200],backgroundColor:"#e0e0e0",strokeLinecap:"round"})})}),(0,l.jsx)(c.ZT,{className:"font-normal",variant:"caption-1",children:"available"===t?"Available":"inProgress"===t?"In progress":"withdrawn"===t?"Fully withdrawn":"terminated"===t?"Terminated":"Upcoming"})]})}),(0,l.jsx)(ea.u,{id:"tooltip-html-".concat(a),style:{borderRadius:"0.5rem",zIndex:50,backgroundColor:"#0C0C0C",minWidth:"200px"},children:(0,l.jsxs)("div",{className:"space-y-1 py-1",children:["available"===t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"".concat(s," ").concat(n||(null==r?void 0:r.tokenSymbol))}),(0,l.jsx)("p",{children:"are available for withdrawal:"})]}):"inProgress"===t?"":"terminated"===t?(0,l.jsx)("p",{children:"Vesting terminated"}):"upcoming"===t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Vesting will start at:"}),(null==r?void 0:r.start)?(0,l.jsx)("p",{children:F()(1e3*r.start).format("MM-DD-YYYY h:mm")}):(null==i?void 0:i.start)?(0,l.jsx)("p",{children:F()(1e3*i.start).format("MM-DD-YYYY h:mm")}):(0,l.jsx)("p",{children:"-"})]}):"Vesting fully withdrawn",(0,l.jsx)("div",{className:o()("available"===t?"bg-green-400":"inProgress"===t?"bg-blue-900":"terminated"===t?"bg-red-900":"upcoming"===t?"bg-yellow-900":"bg-gray-800","h-1.5 rounded-full"),children:(0,l.jsx)("div",{className:o()("available"===t?"bg-[#04B816]":"inProgress"===t?"bg-blue-600":"terminated"===t?"bg-red-600":"upcoming"===t?"bg-yellow-600":"bg-grey-600","h-1.5 rounded-full"),style:{width:"".concat("available"===t?"50":"inProgress"===t?"0":"terminated"===t?"100":"upcoming"===t?"0":"50","%")}})}),(0,l.jsx)(c.ZT,{variant:"caption-2",children:""})]})})]})}function er(e){let{item:t,setTokenToShowDetails:a,setShowStopVestingModal:s}=e,{data:r}=(0,Y.mx)(),{address:i}=(0,Y.mA)(),[d,m]=(0,x.useState)("0"),[u,f]=(0,x.useState)("0"),[h,p]=(0,x.useState)("0"),[b,v]=(0,x.useState)("0"),[g,N]=(0,x.useState)("0"),[k,E]=(0,x.useState)(""),I=(0,x.useCallback)(async()=>{try{if(!t.balanceMap||!t.contractAddress)return;m(w.formatUnits(t.balanceMap.amount.toString(),t.decimals)),f(w.formatUnits(t.claimed,t.decimals)),N(w.formatUnits(t.claimable,t.decimals)),v(w.formatUnits(A.O$.from(t.balanceMap.amount).sub(t.claimed).sub(t.claimable).toString(),t.decimals)),p(w.formatUnits(t.claimed.add(t.claimable),t.decimals));let e=Date.now()/1e3,a=t.revoked?"terminated":t.balanceMap.start>e?"upcoming":t.balanceMap.start<e&&t.balanceMap.end>e&&t.claimable.eq(0)?"inProgress":t.claimable.gt(0)?"available":t.claimed.eq(A.O$.from(t.balanceMap.amount))?"withdrawn":"";E(a)}catch(e){console.error(e),n.Tb(e)}},[t.balanceMap,t.claimable,t.claimed,t.contractAddress,t.revoked,t.decimals]);(0,x.useEffect)(()=>{i&&r&&I()},[i,r,I]);let M=()=>{let e={address:t.balanceMap.address,token:t.tokenAddress,chainId:t.chainId,allocation:t.balanceMap.amount,decimals:t.decimals,symbol:t.symbol,revocable:t.balanceMap.revocable,cadence:t.balanceMap.cadence,start:t.balanceMap.start,end:t.balanceMap.end};a(e)},D=e=>{try{e.target.cellIndex&&M()}catch(e){console.error(e)}},T=!t.balanceMap.revocable||t.revoked;return(0,l.jsxs)("tr",{onClick:e=>D(e),className:"transition-all hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,j.Xn)(t.balanceMap.address)}),(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsx)("div",{children:t.balanceMap.revocable?(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#714DD7]/10 px-2 py-0.5 text-xs font-medium text-[#714DD7]",children:"Employee"}):(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#007A64]/10 px-2 py-0.5 text-xs font-medium text-[#007A64]",children:"Investor"})})}),(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsxs)("div",{className:"inline-flex items-center justify-start gap-x-1.5 font-medium",children:[(0,l.jsx)(c.Oi,{src:(0,Z.XP)(t.tokenAddress),alt:"token-logo",className:"h-4 w-4 rounded-full border border-white object-contain",chainId:t.chainId}),(0,l.jsx)("span",{className:"text-sm font-normal",children:w.formatUnits(t.balanceMap.amount.toString(),t.decimals)}),(0,l.jsx)("span",{className:"text-sm font-normal",children:t.symbol})]})}),(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:F()(1e3*t.balanceMap.start).format("DD MMM YYYY")}),(0,l.jsx)("p",{children:F()(1e3*t.balanceMap.end).format("DD MMM YYYY")})]})}),(0,l.jsx)("td",{children:k&&(0,l.jsx)(en,{variant:k,index:t.balanceMap.merkleRoot,claimable:g,balanceMap:t.balanceMap,symbol:t.symbol})}),(0,l.jsx)("td",{className:"sticky right-0 w-fit whitespace-nowrap bg-gray-50/80 py-3 pl-5 sm:static sm:min-w-fit sm:bg-white sm:px-4",children:(0,l.jsx)(ee.Z,{children:(0,l.jsxs)(R.v.Items,{className:"absolute right-0 z-50 flex w-fit origin-top-right flex-col rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{type:"button",onClick:()=>M(),className:o()(t&&"bg-gray-100","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]"),children:[(0,l.jsx)(P.MaA,{className:"text-[#222222]/60",size:15}),"View vesting details"]})}},"viewDetails"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{disabled:!0,type:"button",onClick:()=>console.log("download audit"),className:o()(t&&"bg-white","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-gray-300"),children:[(0,l.jsx)(S.JfT,{size:15,className:"text-[#222222]/60"}),"Export CSV file"]})}},"exportCsv"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:a}=e;return(0,l.jsx)("button",{type:"button",className:o()(a&&"bg-gray-100"),children:(0,l.jsxs)(c.EX,{href:"https://www.team.finance/view-coin/".concat(t.tokenAddress,"?&symbol=").concat(t.symbol,"&chainid=").concat(t.chainId),className:"inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-left text-sm text-[#222222]",children:[(0,l.jsx)(S.RD3,{size:15,className:"text-[#222222]/60"}),"See ".concat(t.symbol," token profile")]})})}},"tokenDetails"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:a}=e;return(0,l.jsx)("button",{type:"button",className:o()(a&&"bg-gray-100"),children:(0,l.jsxs)(c.EX,{href:"".concat((0,y.vN)(t.chainId),"address/").concat(t.contractAddress),className:"inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]",children:[(0,l.jsx)(S.rpH,{size:15,className:"text-[#222222]/60"}),"View in Blockexplorer"]})})}},"viewBlockexplorer"),t.balanceMap.revocable&&(0,l.jsx)(R.v.Item,{children:e=>{let{active:a}=e;return(0,l.jsxs)("button",{type:"button",disabled:T,onClick:()=>s({...t.balanceMap,contractAddress:t.contractAddress,chainId:t.chainId,decimals:t.decimals,claimable:g,claimed:u,vested:h,unvested:b,allocation:d}),className:o()(a&&"bg-gray-100",T?"text-gray-300":"text-[#FF382E]","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm"),children:[(0,l.jsx)(P.B4e,{className:o()(T?"text-gray-300":"text-[#FF382E]/60"),size:15}),"End vesting contract"]})}},"endContract")]})})})]})}en.defaultProps={symbol:"",index:"0",claimable:"0",vesting:void 0,balanceMap:void 0};var ei=a(53080);function ec(e){let{item:t,setTokenToShowDetails:a}=e,{data:s}=(0,Y.mx)(),{address:r}=(0,Y.mA)(),[i,d]=(0,x.useState)("0"),{switchNetwork:m}=(0,Y.g0)(),u=()=>{try{(0,ei.Y)(t.chainId)||null==m||m(parseInt(t.chainId,16))}catch(e){console.error(e),n.Tb(e)}},f=(0,x.useCallback)(async()=>{try{if(!t.balanceMap||!t.contractAddress)return;d(w.formatUnits(t.balanceMap.amount.toString(),t.decimals))}catch(e){console.error(e),n.Tb(e)}},[t.balanceMap,t.contractAddress,t.decimals]);(0,x.useEffect)(()=>{r&&s&&f()},[r,s,f]);let h=()=>{let e={address:t.balanceMap.address,token:t.tokenAddress,chainId:t.chainId,allocation:t.balanceMap.amount,decimals:t.decimals,symbol:t.symbol,revocable:t.balanceMap.revocable,cadence:t.balanceMap.cadence,start:t.balanceMap.start,end:t.balanceMap.end};a(e)},p=e=>{try{e.target.cellIndex&&h()}catch(e){console.error(e)}};return(0,l.jsxs)("tr",{onClick:e=>p(e),className:"transition-all hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,j.Xn)(t.balanceMap.address)}),(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsx)("div",{children:t.balanceMap.revocable?(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#714DD7]/10 px-2 py-0.5 text-xs font-medium text-[#714DD7]",children:"Employee"}):(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#007A64]/10 px-2 py-0.5 text-xs font-medium text-[#007A64]",children:"Investor"})})}),(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsxs)("div",{className:"inline-flex items-center justify-start gap-x-1.5 font-medium",children:[(0,l.jsx)(c.Oi,{src:(0,Z.XP)(t.tokenAddress),alt:"token-logo",className:"h-4 w-4 rounded-full border border-white object-contain",chainId:t.chainId}),(0,l.jsx)("span",{className:"text-sm font-normal",children:i}),(0,l.jsx)("span",{className:"text-sm font-normal",children:t.symbol})]})}),(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:F()(1e3*t.balanceMap.start).format("DD MMM YYYY")}),(0,l.jsx)("p",{children:F()(1e3*t.balanceMap.end).format("DD MMM YYYY")})]})}),(0,l.jsx)("td",{children:"-"}),(0,l.jsx)("td",{className:"sticky right-0 w-fit whitespace-nowrap bg-gray-50/80 py-3 pl-5 sm:static sm:min-w-fit sm:bg-white sm:px-4",children:(0,l.jsx)(ee.Z,{children:(0,l.jsxs)(R.v.Items,{className:"absolute right-0 z-50 mt-2 flex w-fit origin-top-right flex-col rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{type:"button",onClick:()=>h(),className:o()(t&&"bg-gray-100","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]"),children:[(0,l.jsx)(P.MaA,{className:"text-[#222222]/60",size:15}),"View vesting details"]})}},"viewDetails"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{disabled:!0,type:"button",onClick:()=>console.log("download audit"),className:o()(t&&"bg-white","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-gray-300"),children:[(0,l.jsx)(S.JfT,{size:15,className:"text-gray-300"}),"Export CSV file"]})}},"exportCsv"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:a}=e;return(0,l.jsx)("button",{type:"button",className:o()(a&&"bg-gray-100"),children:(0,l.jsxs)(c.EX,{href:"https://www.team.finance/view-coin/".concat(t.tokenAddress,"?&symbol=").concat(t.symbol,"&chainid=").concat(t.chainId),className:"inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]",children:[(0,l.jsx)(S.RD3,{size:15,className:"text-[#222222]/60"}),"See ".concat(t.symbol," token profile")]})})}},"tokenDetails"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:a}=e;return(0,l.jsx)("button",{type:"button",className:o()(a&&"bg-gray-100"),children:(0,l.jsxs)(c.EX,{href:"".concat((0,y.vN)(t.chainId),"address/").concat(t.contractAddress),className:"inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]",children:[(0,l.jsx)(S.rpH,{size:15,className:"text-[#222222]/60"}),"View in Blockexplorer"]})})}},"viewBlockexplorer"),t.balanceMap.revocable&&(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{type:"button",disabled:!0,className:o()(t&&"bg-gray-100","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-gray-300"),children:[(0,l.jsx)(P.B4e,{className:"text-gray-300",size:15}),"End vesting contract"]})}},"endContract"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{type:"button",className:o()(t&&"bg-gray-100","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]"),onClick:()=>u(),children:[(0,l.jsx)(P.Whq,{className:"text-[#222222]/60",size:15}),"Switch network"]})}},"switchNetwork")]})})})]})}function ed(e){let{stats:t,data:a,chainId:s,setTokenToShowDetails:n,handleShowStopVestingModal:r}=e,[i,d]=(0,x.useState)(),[o,m]=(0,x.useState)(!1),[u,f]=(0,x.useState)(),[h,p]=(0,x.useState)(!1),[b,v]=(0,x.useState)(),[g,j]=(0,x.useState)(!1),[y,w]=(0,x.useState)(),[N,k]=(0,x.useState)();return(0,x.useEffect)(()=>{if(!a){w(null),k(null);return}try{let e=a.map(e=>e.symbol),t=[...new Set(e)];w(t);let s=a.map(e=>e.balanceMap.address),l=[...new Set(s)];k(l)}catch(e){console.error(e)}},[a]),(0,x.useEffect)(()=>{try{var e,t,s,l,n,r,i,c,d,m,x,f,h;let p=Date.now()/1e3,b=a;u&&(u.tokenName&&(b=null==a?void 0:a.filter(e=>{var t;return u.tokenName.toLowerCase()===(null===(t=e.symbol)||void 0===t?void 0:t.toLowerCase())})),u.startPeriodStart&&u.startPeriodEnd&&(b=null===(e=b)||void 0===e?void 0:e.filter(e=>{let t=e.balanceMap.start;return u.startPeriodStart===u.startPeriodEnd?u.startPeriodStart<=t&&u.startPeriodStart+86400>t:u.startPeriodStart<=t&&u.startPeriodEnd>=t})),u.startPeriodStart&&!u.startPeriodEnd&&(b=null===(t=b)||void 0===t?void 0:t.filter(e=>{let t=e.balanceMap.start;return u.startPeriodStart<=t})),u.endPeriodStart&&u.endPeriodEnd&&(b=null===(s=b)||void 0===s?void 0:s.filter(e=>u.endPeriodStart===u.endPeriodEnd?u.endPeriodStart<=e.balanceMap.end&&u.endPeriodStart+86400>e.balanceMap.end:u.endPeriodStart<=e.balanceMap.end&&u.endPeriodEnd>=e.balanceMap.end)),u.endPeriodStart&&!u.endPeriodEnd&&(b=null===(l=b)||void 0===l?void 0:l.filter(e=>u.endPeriodStart<=e.balanceMap.end)),"All"!==u.relationship&&(b="Investor"===u.relationship?null===(n=b)||void 0===n?void 0:n.filter(e=>!e.balanceMap.revocable):null===(r=b)||void 0===r?void 0:r.filter(e=>e.balanceMap.revocable)),u.recipient&&(b=null===(i=b)||void 0===i?void 0:i.filter(e=>{var t;return u.recipient.toLowerCase()===(null===(t=e.balanceMap.address)||void 0===t?void 0:t.toLowerCase())})),"All"!==u.status&&(b="Terminated"===u.status?null===(c=b)||void 0===c?void 0:c.filter(e=>e.revoked):"Available"===u.status?null===(d=b)||void 0===d?void 0:d.filter(e=>{var t;return(null===(t=e.claimable)||void 0===t?void 0:t.gt(0))&&!e.revoked}):"In progress"===u.status?null===(m=b)||void 0===m?void 0:m.filter(e=>{var t;return e.balanceMap.start<p&&e.balanceMap.end>p&&(null===(t=e.claimable)||void 0===t?void 0:t.eq(0))}):"Withdrawn"===u.status?null===(x=b)||void 0===x?void 0:x.filter(e=>{var t;return null===(t=e.claimed)||void 0===t?void 0:t.eq(A.O$.from(e.balanceMap.amount))}):null===(f=b)||void 0===f?void 0:f.filter(e=>{var t;return e.balanceMap.start<p&&e.balanceMap.end>p&&(null===(t=e.claimable)||void 0===t?void 0:t.eq(0))}))),o&&(b=null===(h=b)||void 0===h?void 0:h.filter(e=>p<e.balanceMap.end)),v(b)}catch(e){console.error(e)}},[a,o,u]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.Z,{data:[{name:"Number of active contracts",value:null==t?void 0:t.activeVestingsCount},{name:"Active employee vesting",value:null==t?void 0:t.activeEmployeeVestingsCount},{name:"Active investor vestings",value:null==t?void 0:t.activeInvestorVestingsCount}]}),(0,l.jsxs)("div",{className:"rounded-md border border-gray-200 bg-white p-4",children:[(0,l.jsx)(c.ZT,{className:"mb-3",variant:"title-4",children:"My vestings total"}),(null==t?void 0:t.vestingTotals)&&(0,l.jsx)(Q,{activeIndex:i,setActiveIndex:d,data:null==t?void 0:t.vestingTotals})]}),(0,l.jsx)(X.Z,{title:"Vesting schedule",rows:10,switchComp:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(c.rs,{checked:o,onChange:()=>m(e=>!e)}),(0,l.jsx)("span",{className:"text-sm",children:"Hide completed contracts"})]}),filter:(0,l.jsxs)(c.zx,{className:"relative h-11 w-11 !p-0",variant:"secondary",icon:!1,disabled:!a,onClick:()=>{j(!0)},children:[h&&(0,l.jsx)("div",{className:"absolute right-1 top-1 h-1.5 w-1.5 rounded-full bg-blue-600"}),(0,l.jsx)(S.lOx,{className:"h-5 w-5 text-blue-600/60"})]}),header:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(c.ZP,{href:"/vesting",variant:"primary",children:[(0,l.jsx)(c.ZT,{variant:"button",children:"Create vesting"}),(0,l.jsx)(S.poH,{className:"text-white-60 ml-1.5",size:18})]})}),head:["Wallet of recipent","Type","Allocation","Vesting period","Status","Actions"],children:s&&(null==b?void 0:b.map((e,t)=>s===e.chainId?(0,l.jsx)(er,{item:e,setTokenToShowDetails:n,setShowStopVestingModal:r},t):(0,l.jsx)(ec,{item:e,setTokenToShowDetails:n},t)))}),(0,l.jsx)(J,{tokens:y,recipients:N,open:g,setOpen:j,setFilter:f,setFilterActive:p})]})}let eo=["All","Investor","Employee"],em=["All","Available","In progress","Withdrawn","Terminated","Upcoming"],ex={tokenName:"",startPeriodStart:null,startPeriodEnd:null,endPeriodStart:null,endPeriodEnd:null,relationship:eo[0],status:em[0]};function eu(e){let{tokens:t,setFilter:a,open:s,setOpen:n,setFilterActive:r}=e,[i,d]=(0,x.useState)({...ex}),[m,u]=(0,x.useState)({...ex}),[f,h]=(0,x.useState)(!1);(0,x.useEffect)(()=>{Object.keys(i).forEach(e=>i[e]===m[e]||(h(!0),!1))},[i,m]);let p=()=>{n(!1),d(m)},b=()=>{d({...ex})},v=()=>{try{a({tokenName:i.tokenName,startPeriodStart:i.startPeriodStart?i.startPeriodStart.getTime()/1e3:0,startPeriodEnd:i.startPeriodEnd?i.startPeriodEnd.getTime()/1e3:0,endPeriodStart:i.endPeriodStart?i.endPeriodStart.getTime()/1e3:0,endPeriodEnd:i.endPeriodEnd?i.endPeriodEnd.getTime()/1e3:0,status:i.status,relationship:i.relationship}),n(!1),h(!1),u({tokenName:i.tokenName,startPeriodStart:i.startPeriodStart,startPeriodEnd:i.startPeriodEnd,endPeriodStart:i.endPeriodStart,endPeriodEnd:i.endPeriodEnd,status:i.status,relationship:i.relationship});let e=!1;Object.keys(i).forEach(t=>i[t]===ex[t]||(e=!0,!1)),r(e)}catch(e){console.error(e)}},g=e=>{d(t=>({...t,relationship:e}))};return(0,l.jsx)(c.u_,{title:"Filter",open:s,setOpen:n,children:(0,l.jsxs)("main",{className:"flex w-fit flex-col items-start justify-start gap-3 text-left",children:[(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Vested token"}),(0,l.jsxs)(R.v,{as:"div",className:"relative inline-block w-full text-left",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(R.v.Button,{className:"border-dark-700 inline-flex w-full items-center justify-between gap-x-1 rounded-md border px-3 py-2 hover:bg-gray-200 focus:outline-none disabled:cursor-not-allowed",children:[i.tokenName||"Select token",(0,l.jsx)(W.ZXJ,{className:"text-[#222222]/60"})]})}),(0,l.jsx)(q.u,{as:x.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,l.jsx)(R.v.Items,{className:"absolute right-0 z-40 mt-1 w-full justify-start rounded border bg-white text-left focus:outline-none",children:(0,l.jsx)("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 max-h-40 overflow-auto py-1",children:null==t?void 0:t.map(e=>(0,l.jsx)(R.v.Item,{children:(0,l.jsx)("button",{type:"button",className:"w-full p-2 text-left text-sm transition duration-100 hover:bg-gray-200",onClick:()=>{d(t=>({...t,tokenName:e}))},children:e})},e))})})})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Vesting start period"}),(0,l.jsx)(L.Z,{selected:i.startPeriodStart,startDate:i.startPeriodStart,endDate:i.startPeriodEnd,setStartDate:e=>d(t=>({...t,startPeriodStart:e})),setEndDate:e=>d(t=>({...t,startPeriodEnd:e}))})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Vesting end period"}),(0,l.jsx)(L.Z,{selected:i.endPeriodStart,startDate:i.endPeriodStart,endDate:i.endPeriodEnd,setStartDate:e=>d(t=>({...t,endPeriodStart:e})),setEndDate:e=>d(t=>({...t,endPeriodEnd:e}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold",children:"Type"}),(0,l.jsxs)(B.E,{value:i.relationship,onChange:e=>{g(e)},children:[(0,l.jsx)(B.E.Label,{className:"sr-only",children:"relationships"}),(0,l.jsx)("div",{className:"mt-1 flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:Object.values(eo).map(e=>(0,l.jsx)(B.E.Option,{value:e,className:e=>{let{active:t,checked:a}=e;return o()({"ring-2 ring-blue-300":t,"border-blue-600":a,"border-neutral-300":!a},"flex cursor-pointer select-none rounded border bg-white px-4 py-2")},children:t=>{let{active:a,checked:s}=t;return(0,l.jsx)("div",{className:"inline-flex w-full items-center space-x-4 text-left",children:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsx)(B.E.Label,{as:"h6",className:"text-sm",children:e}),(0,l.jsx)("span",{className:o()({"border-transparent ring-2 ring-blue-300":a,"border-transparent bg-blue-600":s,"bg-white":!s},"ml-2 mt-0.5 flex h-4 w-4 shrink-0 items-center justify-center rounded-full border border-neutral-300"),"aria-hidden":"true",children:(0,l.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-white"})})]})})}},e))})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Status"}),(0,l.jsxs)(R.v,{as:"div",className:"relative inline-block w-full text-left",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(R.v.Button,{className:"border-dark-700 inline-flex w-full items-center justify-between gap-x-1 rounded-md border px-3 py-2 hover:bg-gray-200 focus:outline-none disabled:cursor-not-allowed",children:[i.status,(0,l.jsx)(W.ZXJ,{className:"text-[#222222]/60"})]})}),(0,l.jsx)(q.u,{as:x.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,l.jsx)(R.v.Items,{className:"absolute right-0 z-40 mt-1 w-full justify-start rounded border bg-white text-left focus:outline-none",children:(0,l.jsx)("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 max-h-40 overflow-auto py-1",children:em.map(e=>(0,l.jsx)(R.v.Item,{children:(0,l.jsx)("button",{type:"button",className:"w-full p-2 text-left text-sm transition duration-100 hover:bg-gray-200",onClick:()=>{d({...i,status:e})},children:e})},e))})})})]})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col justify-between space-y-2 sm:flex-row sm:space-x-4 sm:space-y-0",children:[(0,l.jsx)(c.zx,{className:"w-full !px-10 md:w-40",variant:"secondary",onClick:()=>p(),children:"Cancel"}),(0,l.jsx)(c.zx,{className:"w-full !px-10 text-red-600 md:w-40",variant:"secondary",onClick:()=>b(),children:"Clear all"}),(0,l.jsx)(c.zx,{className:"w-full !px-10 md:w-40",variant:"primary",onClick:()=>v(),disabled:!f,children:"Apply"})]})]})})}function ef(e){let{address:t,vesting:a,setTokenToShowDetails:s,setShowClaimModal:n}=e,[r,i]=(0,x.useState)(""),[d,m]=(0,x.useState)("0"),[u,f]=(0,x.useState)("0");(0,x.useEffect)(()=>{let e=async()=>{try{var e;let t=Date.now()/1e3,s=a.revoked?"terminated":a.start>t?"upcoming":a.start<t&&a.end>t&&a.claimable.eq(0)?"inProgress":a.claimable.gt(0)?"available":a.claimed.eq(A.O$.from(a.userTotal))?"withdrawn":"";i(s),m((0,y.CJ)(Number(w.formatUnits(null==a?void 0:null===(e=a.claimable)||void 0===e?void 0:e.toString(),null==a?void 0:a.tokenDecimals)),4).toString())}catch(e){console.error(e)}};a&&e()},[a]);let h=()=>{let e={address:t,token:a.token,chainId:a.chainId,allocation:a.userTotal,decimals:a.tokenDecimals,symbol:a.tokenSymbol,revocable:a.revocable,cadence:a.cadence,start:a.start,end:a.end};s(e)},p=e=>{try{e.target.cellIndex&&h()}catch(e){console.error(e)}};(0,x.useEffect)(()=>{try{var e,t;if(!(null==a?void 0:null===(e=a.claimed)||void 0===e?void 0:e.toString())||!(null==a?void 0:a.tokenDecimals))return;f((0,y.CJ)(Number(w.formatUnits(null==a?void 0:null===(t=a.claimed)||void 0===t?void 0:t.toString(),null==a?void 0:a.tokenDecimals)),4).toString())}catch(e){console.error(e)}},[a]);let b="terminated"===r;return(0,l.jsxs)("tr",{onClick:e=>p(e),className:"transition-all hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsx)("div",{children:a.revocable?(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#714DD7]/10 px-2 py-0.5 text-xs font-medium text-[#714DD7]",children:"Employee"}):(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#007A64]/10 px-2 py-0.5 text-xs font-medium text-[#007A64]",children:"Investor"})})}),(0,l.jsx)("td",{children:(0,l.jsx)(c.ZT,{variant:"caption-1",children:b?"Partial":u})}),(0,l.jsx)("td",{children:(0,l.jsx)(c.ZT,{variant:"caption-1",children:b?"0":d})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(c.Oi,{alt:"logo",src:(0,Z.XP)(a.address),className:"h-3.5 w-3.5 object-contain",chainId:a.chainId}),(0,l.jsxs)(c.ZT,{variant:"caption-1",children:[w.formatUnits(a.userTotal,a.tokenDecimals)," ",a.tokenSymbol]})]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)(c.ZT,{variant:"caption-1",children:F()(1e3*a.start).format("DD MMM YYYY")}),(0,l.jsx)(c.ZT,{variant:"caption-1",children:F()(1e3*a.end).format("DD MMM YYYY")})]})}),(0,l.jsx)("td",{children:r&&(0,l.jsx)(en,{variant:r,index:a.merkleRoot,claimable:d,vesting:a})}),(0,l.jsx)("td",{className:"sticky right-0 w-fit whitespace-nowrap bg-gray-50/80 py-3 pl-5 sm:static sm:min-w-fit sm:bg-white sm:px-4",children:(0,l.jsx)(ee.Z,{children:(0,l.jsxs)(R.v.Items,{className:"absolute right-0 z-50 flex w-fit origin-top-right flex-col rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{type:"button",onClick:()=>h(),className:o()(t&&"bg-gray-100","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]"),children:[(0,l.jsx)(P.MaA,{className:"text-[#222222]/60",size:15}),"View vesting details"]})}},"viewDetails"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{type:"button",onClick:()=>n(a),disabled:a.claimable.eq(0)||b,className:o()(t&&"bg-gray-100",a.claimable.eq(0)||b?"text-gray-300":"text-[#222222]","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm"),children:[(0,l.jsx)(S.JfT,{size:15,className:o()(a.claimable.eq(0)||b?"text-gray-300":"text-[#222222]/60")}),"Withdraw"]})}},"claim"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsx)("button",{type:"button",className:o()(t&&"bg-gray-100"),children:(0,l.jsxs)(c.EX,{href:"https://www.team.finance/view-coin/".concat(a.token,"?&name=").concat(a.tokenName,"&symbol=").concat(a.tokenSymbol,"&chainid=").concat(a.chainId),className:"inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-left text-sm text-[#222222]",children:[(0,l.jsx)(S.RD3,{size:15,className:"text-[#222222]/60"}),"See ".concat(a.tokenSymbol," token profile")]})})}},"tokenDetails"),(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsx)("button",{type:"button",className:o()(t&&"bg-gray-100"),children:(0,l.jsxs)(c.EX,{href:"".concat((0,y.vN)(a.chainId),"address/").concat(a.address),className:"inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-[#222222]",children:[(0,l.jsx)(S.rpH,{size:15,className:"text-[#222222]/60"}),"View in Blockexplorer"]})})}},"viewBlockexplorer")]})})})]})}var eh=a(13955);function ep(e){let{address:t,vesting:a,setTokenToShowDetails:s}=e,{switchNetwork:r}=(0,Y.g0)(),i=()=>{let e={address:t,token:a.token,chainId:a.chainId,allocation:a.userTotal,decimals:a.tokenDecimals,symbol:a.tokenSymbol,revocable:a.revocable,cadence:a.cadence,start:a.start,end:a.end};s(e)},d=e=>{try{e.target.cellIndex&&i()}catch(e){console.error(e)}},m=()=>{try{(0,ei.Y)(a.chainId)||null==r||r(parseInt(a.chainId,16))}catch(e){console.error(e),n.Tb(e)}};return(0,l.jsxs)("tr",{onClick:e=>d(e),className:"transition-all hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"min-w-fit whitespace-nowrap px-4 py-3",children:(0,l.jsx)("div",{children:a.revocable?(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#714DD7]/10 px-2 py-0.5 text-xs font-medium text-[#714DD7]",children:"Employee"}):(0,l.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#007A64]/10 px-2 py-0.5 text-xs font-medium text-[#007A64]",children:"Investor"})})}),(0,l.jsx)("td",{children:"-"}),(0,l.jsx)("td",{children:"-"}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(c.Oi,{alt:"logo",src:(0,Z.XP)(a.address),className:"h-3.5 w-3.5 object-contain",chainId:a.chainId}),(0,l.jsxs)(c.ZT,{variant:"caption-1",children:[w.formatUnits(a.userTotal,a.tokenDecimals)," ",a.tokenSymbol]})]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)(c.ZT,{variant:"caption-1",children:F()(1e3*a.start).format("DD MMM YYYY")}),(0,l.jsx)(c.ZT,{variant:"caption-1",children:F()(1e3*a.end).format("DD MMM YYYY")})]})}),(0,l.jsx)("td",{children:"-"}),(0,l.jsxs)("td",{className:"sticky right-0 w-fit whitespace-nowrap bg-gray-50/80 py-3 pl-5 sm:static sm:min-w-fit sm:bg-white sm:px-4",children:[(0,l.jsxs)("div",{className:"hidden sm:block",children:[(0,l.jsx)("div",{"data-tooltip-id":"my-tooltip","data-tooltip-content":"Change network to ".concat((0,y.IC)(eh.ZP,a.chainId,"name")," to see vesting details"),"data-tooltip-place":"top",children:(0,l.jsx)(c.zx,{variant:"secondary",size:"sm",icon:!1,onClick:()=>m(),children:(0,l.jsxs)(c.ZT,{variant:"button-small",children:["Switch Network \xa0"," "]})})}),(0,l.jsx)(ea.u,{id:"my-tooltip"})]}),(0,l.jsx)("div",{className:"block sm:hidden",children:(0,l.jsx)(ee.Z,{children:(0,l.jsx)(R.v.Items,{className:"absolute right-0 z-50 flex w-fit origin-top-right flex-col rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,l.jsx)(R.v.Item,{children:e=>{let{active:t}=e;return(0,l.jsxs)("button",{type:"button",onClick:()=>m(),className:o()(t&&"bg-gray-100 text-gray-900","inline-flex w-full items-center gap-x-1.5 px-4 py-2 text-sm text-gray-700"),children:[(0,l.jsx)(P.MaA,{size:12,className:"text-[#222222]/60"}),"Switch Network"]})}},"tokenDetails")})})})]})]})}function eb(e){let{address:t,stats:a,data:s,chainId:n,setTokenToShowDetails:r,handleShowClaimModal:i}=e,[d,o]=(0,x.useState)(),[m,u]=(0,x.useState)(!1),[f,h]=(0,x.useState)([]),[p,b]=(0,x.useState)(),[v,g]=(0,x.useState)(!1),[j,y]=(0,x.useState)(!1),[w,N]=(0,x.useState)();return(0,x.useEffect)(()=>{if(!s){N(null);return}try{let e=s.map(e=>e.tokenSymbol),t=[...new Set(e)];N(t)}catch(e){console.error(e)}},[s]),(0,x.useEffect)(()=>{try{var e,t,a,l,n,r,i,c,d,o,x,u;let f=Date.now()/1e3,b=s;p&&(p.tokenName&&(b=null==s?void 0:s.filter(e=>{var t;return p.tokenName.toLowerCase()===(null===(t=e.tokenSymbol)||void 0===t?void 0:t.toLowerCase())})),p.startPeriodStart&&p.startPeriodEnd&&(b=null===(e=b)||void 0===e?void 0:e.filter(e=>{let t=e.start;return p.startPeriodStart===p.startPeriodEnd?p.startPeriodStart<=t&&p.startPeriodStart+86400>t:p.startPeriodStart<=t&&p.startPeriodEnd>=t})),p.startPeriodStart&&!p.startPeriodEnd&&(b=null===(t=b)||void 0===t?void 0:t.filter(e=>{let t=e.start;return p.startPeriodStart<=t})),p.endPeriodStart&&p.endPeriodEnd&&(b=null===(a=b)||void 0===a?void 0:a.filter(e=>p.endPeriodStart===p.endPeriodEnd?p.endPeriodStart<=e.end&&p.endPeriodStart+86400>e.end:p.endPeriodStart<=e.end&&p.endPeriodEnd>=e.end)),p.endPeriodStart&&!p.endPeriodEnd&&(b=null===(l=b)||void 0===l?void 0:l.filter(e=>p.endPeriodStart<=e.end)),"All"!==p.relationship&&(b="Investor"===p.relationship?null===(n=b)||void 0===n?void 0:n.filter(e=>!e.revocable):null===(r=b)||void 0===r?void 0:r.filter(e=>e.revocable)),"All"!==p.status&&(b="Terminated"===p.status?null===(i=b)||void 0===i?void 0:i.filter(e=>e.revoked):"Available"===p.status?null===(c=b)||void 0===c?void 0:c.filter(e=>e.claimable.gt(0)&&!e.revoked):"In progress"===p.status?null===(d=b)||void 0===d?void 0:d.filter(e=>e.start<f&&e.end>f&&e.claimable.eq(0)):"Withdrawn"===p.status?null===(o=b)||void 0===o?void 0:o.filter(e=>e.claimed.eq(A.O$.from(e.userTotal))):null===(x=b)||void 0===x?void 0:x.filter(e=>e.start<f&&e.end>f&&e.claimable.eq(0)))),m&&(b=null===(u=b)||void 0===u?void 0:u.filter(e=>f<e.end)),h(b)}catch(e){console.error(e)}},[s,m,p]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.Z,{data:[{name:"Number of active contracts",value:null==a?void 0:a.activeVestings}]}),(0,l.jsxs)("div",{className:"rounded-md border border-gray-200 bg-white p-4",children:[(0,l.jsx)(c.ZT,{className:"mb-3",variant:"title-4",children:"My vestings total"}),(null==a?void 0:a.vestingTotals)&&(0,l.jsx)(Q,{activeIndex:d,setActiveIndex:o,data:null==a?void 0:a.vestingTotals})]}),(0,l.jsx)(X.Z,{title:"Vesting schedule",head:["Type","Claimed","Claimable","Allocation","Vesting period","Status","Actions"],header:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(c.ZP,{href:"/vesting",variant:"primary",children:[(0,l.jsx)(c.ZT,{variant:"button",children:"Create vesting"}),(0,l.jsx)(S.poH,{className:"text-white-60 ml-1.5",size:18})]})}),rows:10,switchComp:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(c.rs,{checked:m,onChange:()=>u(e=>!e)}),(0,l.jsx)("span",{className:"text-sm",children:"Hide completed contracts"})]}),filter:(0,l.jsxs)(c.zx,{className:"relative h-11 w-11 !p-0",variant:"secondary",icon:!1,disabled:!s,onClick:()=>{g(!0)},children:[j&&(0,l.jsx)("div",{className:"absolute right-1 top-1 h-1.5 w-1.5 rounded-full bg-blue-600"}),(0,l.jsx)(S.lOx,{className:"h-5 w-5 text-blue-600/60"})]}),children:n&&(null==f?void 0:f.map((e,a)=>n===e.chainId?(0,l.jsx)(ef,{address:t,vesting:e,setTokenToShowDetails:r,setShowClaimModal:i},"".concat(e.merkleRoot,"_").concat(a)):(0,l.jsx)(ep,{address:t,vesting:e,setTokenToShowDetails:r},"".concat(e.merkleRoot,"_").concat(a))))}),(0,l.jsx)(eu,{tokens:w,open:v,setOpen:g,setFilter:b,setFilterActive:y})]})}(s||(s={})).SET_ACCOUNT="setAccount";var ev=a(72579),eg=a.n(ev),ej=a(97729),ey=a.n(ej),ew=a(5632),eN=a(55351);let ek={chainId:"",account:""};function eS(e,t){if("setAccount"===t.type)return{...e,chainId:t.payload.chainId,account:t.payload.account};throw Error()}function eP(){let[e,t]=(0,x.useState)(!1),[a,d]=(0,x.useReducer)(eS,ek),[o,m]=(0,x.useState)(),[p,b]=(0,x.useState)(),[g,j]=(0,x.useState)(!0),{address:w}=(0,Y.mA)(),{chain:N}=(0,Y.LN)(),{data:k}=(0,Y.F6)({address:w,chainId:1}),[S,P]=(0,x.useState)(""),[E,I]=(0,x.useState)(),[D,T]=(0,x.useState)(),[C,Z]=(0,x.useState)(!1),[O,F]=(0,x.useState)(),[V,_]=(0,x.useState)(!1),[X,R]=(0,x.useState)(!1),[q,B]=(0,x.useState)(!1),[L,W]=(0,x.useState)(),[H,G]=(0,x.useState)(),{query:$,replace:J}=(0,ew.useRouter)(),K=e=>{J({query:{...$,tab:e?"admin":"user"}},void 0,{shallow:!0})};(0,x.useEffect)(()=>{if(null==$?void 0:$.tab)try{if("admin"===$.tab&&!C){Z(!0);return}"user"===$.tab&&C&&Z(!1)}catch(e){console.error(e)}},[C,$]);let Q=e=>{F(e),_(!0)};(0,x.useEffect)(()=>{(()=>{if(k){P(k);return}if(w){P("".concat(null==w?void 0:w.substring(0,6),"...").concat(null==w?void 0:w.substring(w.length-4,w.length)));return}j(!1),P("")})()},[k,w]);let ee=(0,x.useCallback)(async()=>{try{if(j(!0),w&&(null==N?void 0:N.id)){let e=await (0,y.m$)(w),t=eg()(e,"data.stats.vestingTotals",[]),a=eg()(e,"data.data",[]).filter(e=>e.chainId===(0,y.i6)(N.id)&&"v3"===e.version),s=(0,y.kL)(a),l=eg()(e,"data.data",[]).filter(e=>e.chainId!==(0,y.i6)(N.id)&&"v3"===e.version),n=(0,y.kL)(l),r=Date.now()/1e3,i=s.concat(n).filter(e=>e.end>r&&e.start<r).length;T({activeVestings:i,vestingTotals:t});let c=[];s.map(e=>{c.push({address:e.address,functionName:"claimed",args:[e.index]},{address:e.address,functionName:"getClaimable",args:[e.index,e.userTotal,e.start,e.end,e.cadence,e.percentageOnStart]},{address:e.address,functionName:"getRevoked",args:[e.index]})});let d=await v(c),o=-1;m(s.map(e=>({...e,claimed:d[++o],claimable:d[++o],revoked:!!d[++o]})).concat(n))}else m([])}catch(e){console.error(e),m([]),n.Tb(e)}finally{j(!1)}},[w,N]),et=(0,x.useCallback)(async()=>{try{if(j(!0),w&&(null==N?void 0:N.id)){let e=await (0,y.gu)(w);I(e.stats);let t=eg()(e,"vestings",[]).filter(e=>"v3"===e.version),a=[];t.forEach(e=>{let t=e.balanceMaps.map(t=>({transactionHash:e.transactionHash,contractAddress:e.address,planName:e.plan,chainId:e.chainId,tokenAddress:e.token,symbol:e.tokenSymbol,decimals:e.tokenDecimals,balanceMap:{...t}}));a=a.concat(t)});let s=(0,y.g9)(a),l=s.filter(e=>e.chainId!==(0,y.i6)(N.id)),n=s.filter(e=>e.chainId===(0,y.i6)(N.id)),r=[];n.map(e=>{r.push({address:e.contractAddress,functionName:"claimed",args:[e.balanceMap.index]},{address:e.contractAddress,functionName:"getClaimable",args:[e.balanceMap.index,e.balanceMap.amount,e.balanceMap.start,e.balanceMap.end,e.balanceMap.cadence,e.balanceMap.percentageOnStart]},{address:e.contractAddress,functionName:"getRevoked",args:[e.balanceMap.index]})});let i=await v(r),c=-1,d=n.map(e=>({...e,claimed:i[++c],claimable:i[++c],revoked:!!i[++c]})).concat(l);b(d)}}catch(e){console.error(e),I(void 0),n.Tb(e)}finally{j(!1)}},[w,N]);return(0,x.useEffect)(()=>{(null==N?void 0:N.id)&&w?((a.chainId!==(0,y.i6)(N.id)||a.account!==w)&&(ee(),et()),d({type:s.SET_ACCOUNT,payload:{chainId:(0,y.i6)(N.id),account:w}})):(d({type:s.SET_ACCOUNT,payload:{chainId:"",account:""}}),m(void 0))},[w,N,a.chainId,a.account,ee,et]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eN.PB,{title:"Team Finance App - Token Vesting",titleTemplate:"%s"}),(0,l.jsx)(ey(),{children:(0,l.jsx)("link",{rel:"canonical",href:"https://app.team.finance/token-vesting"})}),O&&V&&(0,l.jsx)(U,{open:V,setOpen:()=>_(!1),walletAddress:O.address,tokenAddress:O.token,chainId:O.chainId,allocation:O.allocation,decimals:O.decimals,symbol:O.symbol,revocable:O.revocable,cadence:O.cadence,start:O.start,end:O.end}),L&&X&&(0,l.jsx)(M,{open:X,setOpen:()=>R(!1),vesting:L,walletAddress:a.account,setClaimed:e=>{try{let t=o.map(t=>{if(t.merkleRoot===e.merkleRoot){let a=e.claimed.add(e.claimable);return{...t,claimable:A.O$.from(0),claimed:a}}return t});m(t)}catch(e){console.error(e)}}}),H&&q&&(0,l.jsx)(z,{open:q,setOpen:()=>B(!1),balanceMap:H}),(0,l.jsxs)(f.Z,{title:"Token vesting",className:"space-y-3",hasItems:(null==o?void 0:o.length)>0||(null==p?void 0:p.length)>0,walletConnected:!!a.account,isLoading:g,children:[(0,l.jsxs)(r.b,{showCloseIcon:!0,variant:"blue",children:["Users that created vestings prior to December 5th 2022 have a separate claims portal."," ",(0,l.jsx)("a",{target:"_blank",className:"underline",href:"https://www.team.finance/claim",rel:"noreferrer",children:"Click here to access"}),"."]}),(0,l.jsxs)("div",{className:"!mt-0 ml-0.5 flex flex-col gap-4 md:!mt-2 lg:flex-row lg:justify-between",children:[(0,l.jsxs)(c.ZT,{variant:"paragraph",children:["\uD83D\uDC4B Welcome to your vesting contracts info hub, ",S,". If you have any questions, feel free to contact us in ",(0,l.jsx)(i.Z,{})," ","or"," ",(0,l.jsx)(c.EX,{className:"underline",href:y.UY.telegram,children:(0,l.jsx)("span",{children:"Telegram"})}),"."]}),(0,l.jsx)(u,{isAdmin:C,setIsAdmin:e=>K(e)})]}),C&&(0,l.jsx)(ed,{stats:E,data:p,chainId:(0,y.i6)(null==N?void 0:N.id),setTokenToShowDetails:Q,handleShowStopVestingModal:e=>{G(e),B(!0)}}),!C&&(0,l.jsx)(eb,{stats:D,address:w,data:o,chainId:(0,y.i6)(null==N?void 0:N.id),setTokenToShowDetails:Q,handleShowClaimModal:e=>{W(e),R(!0)}})]}),(0,l.jsx)(h.kE,{open:e,setOpen:t})]})}},24470:function(e){var t=String,a=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t}};e.exports=a(),e.exports.createColors=a},6692:function(e,t,a){let s=a(83128);e.exports=(s.__esModule?s:{default:s}).default},83128:function(e,t,a){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let l=(s=a(37540))&&s.__esModule?s:{default:s};function n({version:e,from:t,to:a}){l.default.warn(`${t}-color-renamed`,[`As of Tailwind CSS ${e}, \`${t}\` has been renamed to \`${a}\`.`,"Update your configuration file to silence this warning."])}let r={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return n({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return n({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return n({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return n({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return n({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}},37540:function(e,t,a){"use strict";var s,l=a(34406);Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{dim:function(){return c},default:function(){return d}});let n=(s=a(24470))&&s.__esModule?s:{default:s},r=new Set;function i(e,t,a){(void 0===l||!l.env.JEST_WORKER_ID)&&(a&&r.has(a)||(a&&r.add(a),console.warn(""),t.forEach(t=>console.warn(e,"-",t))))}function c(e){return n.default.dim(e)}let d={info(e,t){i(n.default.bold(n.default.cyan("info")),...Array.isArray(e)?[e]:[t,e])},warn(e,t){i(n.default.bold(n.default.yellow("warn")),...Array.isArray(e)?[e]:[t,e])},risk(e,t){i(n.default.bold(n.default.magenta("risk")),...Array.isArray(e)?[e]:[t,e])}}}},function(e){e.O(0,[424,131,713,789,195,149,185,814,642,686,423,59,41,887,560,922,774,888,179],function(){return e(e.s=84305)}),_N_E=e.O()}]);