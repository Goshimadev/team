(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{28879:function(e){var t,a,s,n,r,i,o,l,c,d,u,f,h,p,m,x,w,S,g,y,T;e.exports=(t="millisecond",a="second",s="minute",n="hour",r="week",i="month",o="quarter",l="year",c="date",d="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(e,t,a){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(a)+e},(m={})[p="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||"th")+"]"}},x=function(e){return e instanceof y},w=function e(t,a,s){var n;if(!t)return p;if("string"==typeof t){var r=t.toLowerCase();m[r]&&(n=r),a&&(m[r]=a,n=r);var i=t.split("-");if(!n&&i.length>1)return e(i[0])}else{var o=t.name;m[o]=t,n=o}return!s&&n&&(p=n),n||!s&&p},S=function(e,t){if(x(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new y(a)},(g={s:h,z:function(e){var t=-e.utcOffset(),a=Math.abs(t);return(t<=0?"+":"-")+h(Math.floor(a/60),2,"0")+":"+h(a%60,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var s=12*(a.year()-t.year())+(a.month()-t.month()),n=t.clone().add(s,i),r=a-n<0,o=t.clone().add(s+(r?-1:1),i);return+(-(s+(a-n)/(r?n-o:o-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return({M:i,y:l,w:r,d:"day",D:c,h:n,m:s,s:a,ms:t,Q:o})[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}}).l=w,g.i=x,g.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})},T=(y=function(){function e(e){this.$L=w(e.locale,null,!0),this.parse(e)}var h=e.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(g.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(u);if(s){var n=s[2]-1||0,r=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return g},h.isValid=function(){return this.$d.toString()!==d},h.isSame=function(e,t){var a=S(e);return this.startOf(t)<=a&&a<=this.endOf(t)},h.isAfter=function(e,t){return S(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<S(e)},h.$g=function(e,t,a){return g.u(e)?this[t]:this.set(a,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,t){var o=this,d=!!g.u(t)||t,u=g.p(e),f=function(e,t){var a=g.w(o.$u?Date.UTC(o.$y,t,e):new Date(o.$y,t,e),o);return d?a:a.endOf("day")},h=function(e,t){return g.w(o.toDate()[e].apply(o.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),o)},p=this.$W,m=this.$M,x=this.$D,w="set"+(this.$u?"UTC":"");switch(u){case l:return d?f(1,0):f(31,11);case i:return d?f(1,m):f(0,m+1);case r:var S=this.$locale().weekStart||0,y=(p<S?p+7:p)-S;return f(d?x-y:x+(6-y),m);case"day":case c:return h(w+"Hours",0);case n:return h(w+"Minutes",1);case s:return h(w+"Seconds",2);case a:return h(w+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(e,r){var o,d=g.p(e),u="set"+(this.$u?"UTC":""),f=((o={}).day=u+"Date",o[c]=u+"Date",o[i]=u+"Month",o[l]=u+"FullYear",o[n]=u+"Hours",o[s]=u+"Minutes",o[a]=u+"Seconds",o[t]=u+"Milliseconds",o)[d],h="day"===d?this.$D+(r-this.$W):r;if(d===i||d===l){var p=this.clone().set(c,1);p.$d[f](h),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[g.p(e)]()},h.add=function(e,t){var o,c=this;e=Number(e);var d=g.p(t),u=function(t){var a=S(c);return g.w(a.date(a.date()+Math.round(t*e)),c)};if(d===i)return this.set(i,this.$M+e);if(d===l)return this.set(l,this.$y+e);if("day"===d)return u(1);if(d===r)return u(7);var f=((o={})[s]=6e4,o[n]=36e5,o[a]=1e3,o)[d]||1,h=this.$d.getTime()+e*f;return g.w(h,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||d;var s=e||"YYYY-MM-DDTHH:mm:ssZ",n=g.z(this),r=this.$H,i=this.$m,o=this.$M,l=a.weekdays,c=a.months,u=a.meridiem,h=function(e,a,n,r){return e&&(e[a]||e(t,s))||n[a].slice(0,r)},p=function(e){return g.s(r%12||12,e,"0")},m=u||function(e,t,a){var s=e<12?"AM":"PM";return a?s.toLowerCase():s};return s.replace(f,function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return g.s(t.$y,4,"0");case"M":return o+1;case"MM":return g.s(o+1,2,"0");case"MMM":return h(a.monthsShort,o,c,3);case"MMMM":return h(c,o);case"D":return t.$D;case"DD":return g.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(a.weekdaysMin,t.$W,l,2);case"ddd":return h(a.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(r);case"HH":return g.s(r,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(r,i,!0);case"A":return m(r,i,!1);case"m":return String(i);case"mm":return g.s(i,2,"0");case"s":return String(t.$s);case"ss":return g.s(t.$s,2,"0");case"SSS":return g.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")})},h.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},h.diff=function(e,t,c){var d,u=this,f=g.p(t),h=S(e),p=(h.utcOffset()-this.utcOffset())*6e4,m=this-h,x=function(){return g.m(u,h)};switch(f){case l:d=x()/12;break;case i:d=x();break;case o:d=x()/3;break;case r:d=(m-p)/6048e5;break;case"day":d=(m-p)/864e5;break;case n:d=m/36e5;break;case s:d=m/6e4;break;case a:d=m/1e3;break;default:d=m}return c?d:g.a(d)},h.daysInMonth=function(){return this.endOf(i).$D},h.$locale=function(){return m[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),s=w(e,t,!0);return s&&(a.$L=s),a},h.clone=function(){return g.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},e}()).prototype,S.prototype=T,[["$ms",t],["$s",a],["$m",s],["$H",n],["$W","day"],["$M",i],["$y",l],["$D",c]].forEach(function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),S.extend=function(e,t){return e.$i||(e(t,y,S),e.$i=!0),S},S.locale=w,S.isDayjs=x,S.unix=function(e){return S(1e3*e)},S.en=m[p],S.Ls=m,S.p={},S)},75753:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lockups/nft",function(){return a(65509)}])},65509:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return et}});var s,n,r,i,o=a(52322),l=a(31001),c=a(32867),d=a(2784),u=a(44304),f={src:"/_next/static/media/logo-header-nft.4a8b11c9.png",height:44,width:121,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAG1BMVEUiIi1MaXEiIiQfGxUXVuwZU+UVV+EfRe0VW+NvUO4vAAAACXRSTlMFAEwqW6IjScFDHTY0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIUlEQVR4nGNgYWNkYGBgYGTgYGFmYmZiYmZgZQcJMDAAAAMhADRquEWaAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3},h={src:"/_next/static/media/logo-header-white-nft.ac6022e0.png",height:44,width:121,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAG1BMVEX///////////////////////////////////8HBRbfAAAACXRSTlMBBypZSaIjSMFy350yAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAH0lEQVR4nAXBgQ0AIADCsA3Q+P/FtvSiAK9ptnCGqB8DBQA1jeUGSQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3};(s=r||(r={})).HANDLE_ACCOUNT_DETAILS_CHANGED="handleAccountDetailsChanged",s.HANDLE_NEXT="handleNext",s.HANDLE_LAST_STEP="handleLastStep",s.HANDLE_START_OVER="handleStartOver",s.SET_ERROR_MSG="setErrorMsg",s.SET_OUTCOME="setOutcome",s.SET_APPROVED="setApproved",s.SET_TRANSACTION_HASH="setTransactionHash",s.SET_CHAIN_ID="setChainId",s.SET_ACCOUNT="setAccount",s.SET_REQUESTING_LOCK="setRequestingLock",s.SET_NFT_INFO="setNftInfo",s.SET_LOCK_DETAILS="setLockDetails",s.RESET_NFT_INFO="resetNftInfo",s.RESET_LOCK_DETAILS="resetLockDetails",s.SET_VISIBLE_MODAL_WAITING_CONFIRM="setVisibleModalWaitingConfirm",s.SET_SHOW_STEP_CONTAINER="setShowStepContainer",s.GO_TO_STEP="goToStep";var p=a(92642),m=a(46539),x=a(30476),w=a(11242),S=a(25593),g=a(24407),y=a(33018),T=a(28879),A=a.n(T),v=a(57449),N=a.n(v),_=a(67338),I=a.n(_),D=a(10528),E=a(51906),k=a(30171),C=a(59656),b=a(58194),j=a(58105),M=a(57643);function O(e){let{dispatch:t,state:a,index:s,step:n,event:i=""}=e,[l,f]=(0,d.useState)(!1),[h,T]=(0,d.useState)(D.O$.from(0)),[v,N]=(0,d.useState)(""),[_,I]=(0,d.useState)(new Date(Date.now()+2592e6)),[O,L]=(0,d.useState)(D.O$.from(0)),[$,H]=(0,d.useState)(""),[F,U]=(0,d.useState)((0,c.cH)(a.walletDetails.chainId,(0,g.g)(a.walletDetails.chainId).lockToken)),W=(0,c.yZ)(a.walletDetails.chainId,(0,g.g)(a.walletDetails.chainId).lockToken),[R,Y]=(0,d.useState)(D.O$.from(0)),[P,G]=(0,d.useState)(E.d),[V,B]=(0,d.useState)(!1),[X,Z]=(0,d.useState)(null),[K,Q]=(0,d.useState)(!1),{address:q}=(0,u.mA)(),{data:z}=(0,u.mx)(),{width:J}=(0,M.iP)(),ee=()=>{window.dataLayer.push({event:i}),t({type:r.SET_LOCK_DETAILS,payload:{fee:O,feeInUsd:$,totalAmount:"1",date:_.getTime(),referralAddress:P,referralSupported:F}})},et=(0,d.useCallback)(async()=>{f(!0);try{let e=(0,g.g)(a.walletDetails.chainId),t=(0,j.getAddress)(e.lockToken),s=new k.CH(t,S.A,z),n=(0,c.cH)(a.walletDetails.chainId,e.lockToken),[r,i,o,l]=await Promise.all([s.getFeesInETH((0,c.tg)(a.walletDetails.chainId)),s.feesInUSD(),n?s.referralDiscount():D.O$.from(1e4),!!W&&s.whitelistedWallets(q)]);Q(l),T(r),L(r),N((0,c.xG)(Number(C.formatUnits(l?0:i,(0,c.pV)(a.walletDetails.chainId)?18:6)))),H((0,c.xG)(Number(C.formatUnits(l?0:i,(0,c.pV)(a.walletDetails.chainId)?18:6)))),U(n),Y(o)}catch(e){console.error(e),t({type:r.SET_ERROR_MSG,payload:{errorMsg:"Couldn't fetch your wallet details. Please try again."}}),p.Tb(e)}finally{f(!1)}},[t,z,q,W,a.walletDetails.chainId]);return(0,d.useEffect)(()=>{q&&z&&a.activeStep===s&&et()},[q,z,et,s,a.activeStep]),(0,o.jsx)("div",{children:a.activeStep===s?(0,o.jsxs)(x.Z,{step:n,errorMsg:a.errorMsg,children:[(0,o.jsxs)("div",{className:"flex flex-col sm:max-w-[540px]",children:[(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("span",{className:"text-xs font-medium text-[#222222]",children:"Unlock Date"}),(0,o.jsx)(m.Z,{selected:_,setUnlockDate:I,showTimeSelect:J>420,disabled:l,dateFormat:"MMM dd, yyyy h:mm aa",timeFormat:"h:mm aa"})]}),(0,o.jsxs)("div",{className:"my-4 flex justify-between px-0.5 font-medium",children:[(0,o.jsx)("span",{className:"text-[#222222]/60",children:"Service Fee"}),(0,o.jsxs)("span",{className:"text-base",children:["$",K?0:$]})]}),F&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between px-0.5",children:[(0,o.jsx)("span",{children:"Do you have a valid Referral Address"}),(0,o.jsx)("input",{name:"referralAddressCheckbox",type:"checkbox",checked:V,onChange:()=>{B(e=>!e),V?(L(h),H(v),G(E.d)):(L(h.mul(R).div(1e4)),H((0,c.xG)(Number(v)*(Number(R)/1e4))))},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})]}),(0,o.jsx)("span",{className:"px-0.5 text-xs",children:"Receive a 10% discount!"})]}),(0,o.jsxs)("div",{className:"my-2",children:[V&&(0,o.jsx)(y.II,{className:"flex w-full",type:"text",name:"referralAddress",placeholder:"Enter referrer’s wallet address here",disabled:!V,onChange:e=>(function(e){if(""===e){Z("If checkbox is ticked, you must enter a referral address");return}if(e&&!b.isAddress(e)){Z("Please enter a valid address.");return}if(e.toLowerCase()===q.toLowerCase()){Z("You may not use your own address as a referral address.");return}Z(null),G(e)})(e.target.value)}),V&&X&&(0,o.jsx)("span",{className:"text-sm text-red-500",children:X})]})]}),(0,o.jsx)(y.zx,{className:"mt-2 w-full sm:w-auto",disabled:l||!!a.errorMsg||!_||!!X&&V||V&&P===E.d,isLoading:l,onClick:()=>ee(),children:"Continue"})]}):(0,o.jsx)(w.Z,{activeStep:a.activeStep,index:s,step:n,goToStep:()=>t({type:r.GO_TO_STEP,payload:s}),children:(0,o.jsx)("p",{className:"text-sm sm:text-base",children:a.lockDetails.date?A()(_).format("MMM. DD, YYYY"):""})})})}A().extend(N()),A().extend(I());var L=a(35175),$=a(2327),H=a(33434),F=a(81713),U=a(27662),W=a(82455),R=a(56780),Y=a(99268),P=a(60740);function G(e){let{dispatch:t,state:a,step:s,index:n,approveEvent:i="db_nft_locks_gave_permission",lockEventFailure:l="db_nft_locks_fail",lockEventSuccess:f="db_nft_locks_success"}=e,[h,m]=(0,d.useState)(!1),[x,T]=(0,d.useState)(!1),[v,N]=(0,d.useState)(!1),[_,I]=(0,d.useState)(!1),[E,b]=(0,d.useState)(""),{address:j}=(0,u.mA)(),[M,O]=(0,d.useState)(!0),{data:G}=(0,u.mx)(),[V,B]=(0,d.useState)(!1),[X,Z]=(0,d.useState)(!1),K=(0,d.useCallback)(async()=>{if(a.activeStep===n){if("0"===a.nftInfo.balance.toString()){O(!1),b("You don't own the NFT with the following details -> Address: ".concat(a.nftInfo.address," TokenId: ").concat(a.nftInfo.tokenId));return}m(!0),b("");try{let e=(0,g.g)(a.walletDetails.chainId),t=new k.CH(a.nftInfo.address,F.M9,G),s=await t.getApproved(a.nftInfo.tokenId),n=e.lockToken;s.toLowerCase()===n.toLowerCase()&&window.dataLayer.push({event:i}),T(s.toLowerCase()===n.toLowerCase())}catch(e){console.error(e),b("Couldn't fetch your wallet details. Please try again."),p.Tb(e)}finally{m(!1)}}},[i,a.activeStep,a.nftInfo.balance,a.nftInfo.address,a.nftInfo.tokenId,a.walletDetails.chainId,n,G]);async function Q(){try{window.dataLayer.push({event:i}),N(!0),I(!1),Z(!0),b("");let e=(0,g.g)(a.walletDetails.chainId),t=e.lockToken,s=new Y.vU(F.K4),n=s.encodeFunctionData("approve",[t,a.nftInfo.tokenId]),r=await G.getFeeData(),{gasPrice:o}=r,l=await (0,P.oB)(G,j,a.nftInfo.address,D.O$.from(0),n,"approve"),c={value:0,gasPrice:o,data:n,to:a.nftInfo.address,from:j,gasLimit:l},d=await G.sendTransaction(c);N(!0),await d.wait(),T(!0),window.dataLayer.push({event:"".concat(i,"_success")})}catch(e){window.dataLayer.push({event:"".concat(i,"_failure")}),console.error(e),T(!1),I(!0),b("Couldn't approve your token. Please try again."),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")||p.Tb(e)}finally{m(!1),N(!1)}}async function q(){b(""),B(!0),t({type:r.SET_REQUESTING_LOCK}),m(!0);try{let e=(0,g.g)(a.walletDetails.chainId),s=A()(a.lockDetails.date).unix();if(Date.now()/1e3>Number(s)){b("Date is in the past."),B(!1);return}if("0"===a.nftInfo.balance){b("Your wallet balance is too low."),B(!1);return}let n=e.lockToken,i=await G.getFeeData(),{gasPrice:o}=i,l=[a.nftInfo.address,j,1,s,a.nftInfo.tokenId,!1];a.lockDetails.referralSupported&&l.push(a.lockDetails.referralAddress);let d=a.lockDetails.referralSupported?S.A:U.c,u=new Y.vU(d),h=a.nftInfo.tokenId?u.encodeFunctionData("lockNFT",l):u.encodeFunctionData("lockToken",[a.nftInfo.address,j,1,s,a.nftInfo.tokenId,!1]),p=a.nftInfo.tokenId?"lockNFT":"lockToken",m=await (0,P.oB)(G,j,n,D.O$.from(a.lockDetails.fee),h,p),x={value:a.lockDetails.fee,gasPrice:o,data:h,from:j,gasLimit:m,to:n},w=await G.sendTransaction(x),y=new W.XP(n,G),T=await y.depositId();await (0,c.QE)(n,T,a.walletDetails.chainId,(0,c.GW)(a.walletDetails.chainId)),t({type:r.SET_TRANSACTION_HASH,payload:{transactionHash:w.hash}}),await w.wait(),t({type:r.SET_OUTCOME,payload:{success:!0,errorMsg:null}}),window.dataLayer.push({event:f,chain:(0,c.C7)(a.walletDetails.chainId)})}catch(e){window.dataLayer.push({event:l}),console.error(e),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")?b("Your lock creation failed. Please try again."):(p.Tb(e),t({type:r.SET_OUTCOME,payload:{success:!1,errorMsg:"Your NFT lock creation failed."}})),B(!1)}finally{m(!1)}}return(0,d.useEffect)(()=>{G&&j&&K()},[G,j,K]),(0,o.jsxs)("div",{children:[V&&(0,o.jsx)(H.Z,{open:V,setOpen:()=>B(!1),amount:a.lockDetails.totalAmount,symbol:a.nftInfo.symbol,feeAmount:C.formatEther(a.lockDetails.fee),feeCurrency:(0,c.tl)(a.walletDetails.chainId),isTestnet:(0,c.Jg)(a.walletDetails.chainId)}),X&&(0,o.jsx)($.Z,{open:X,setOpen:()=>Z(!1),isApproving:v,approvalFailed:_,handleApprove:()=>Q(),errorMsg:E}),a.activeStep===n?(0,o.jsxs)("div",{className:"overflow-hidden rounded-md bg-white",children:[E&&(0,o.jsx)(L.b,{children:E}),x&&(0,o.jsxs)("div",{className:"p-3 sm:p-6",children:[(0,o.jsx)("h1",{className:"text-lg font-semibold",children:"Create contract"}),(0,o.jsx)("p",{className:"mt-1 text-sm",children:"Please ensure the following details are correct:"}),(0,o.jsxs)("div",{className:"mt-3 justify-between space-y-4 rounded-lg bg-[#222222]/5 p-3 sm:hidden",children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-xs text-[#222222]/60",children:"NFT"}),(0,o.jsxs)("div",{className:"mt-1 inline-flex items-center gap-x-1.5 font-medium",children:[(0,o.jsx)(y.Oi,{alt:"nft-icon",src:(0,R.XP)(a.nftInfo.address),className:"h-8 w-8 object-contain",chainId:a.walletDetails.chainId}),(0,o.jsx)("span",{className:"text-base font-normal",children:a.nftInfo.symbol})]})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-xs text-[#222222]/60",children:"Service fee"}),(0,o.jsxs)("span",{className:"mt-2 text-base font-normal",children:["$",(0,c.Jg)(a.walletDetails.chainId)?"0":a.lockDetails.feeInUsd]})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-xs text-[#222222]/60",children:"Unlock date"}),(0,o.jsx)("span",{className:"mt-2 text-base font-normal",children:A()(a.lockDetails.date).format("MMM. DD, YYYY")})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-xs text-[#222222]/60",children:"Unlock time"}),(0,o.jsx)("span",{className:"mt-2 text-base font-normal",children:A()(a.lockDetails.date).format("hh:mm A z")})]})]}),(0,o.jsx)("div",{className:"my-4 hidden max-w-fit overflow-x-auto rounded-md bg-[#222222]/5 p-6 sm:block",children:(0,o.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"pr-3 text-left text-sm font-normal text-[#222222]/60",children:"NFT"}),(0,o.jsx)("th",{scope:"col",className:"px-3 text-left text-sm font-normal text-[#222222]/60",children:"Service fee"}),(0,o.jsx)("th",{scope:"col",className:"px-3 text-left text-sm font-normal text-[#222222]/60",children:"Unlock date"}),(0,o.jsx)("th",{scope:"col",className:"pl-3 text-left text-sm font-normal text-[#222222]/60",children:"Unlock time"})]})}),(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"relative flex items-center justify-center whitespace-nowrap pl-0 pr-3 pt-2 text-base font-normal text-[#222222] md:pr-6",children:(0,o.jsxs)("div",{className:"inline-flex items-center justify-center gap-x-1.5 font-medium",children:[(0,o.jsx)(y.Oi,{alt:"nft-icon",src:(0,R.XP)(a.nftInfo.address),className:"h-8 w-8 object-contain",chainId:a.walletDetails.chainId}),(0,o.jsx)("span",{className:"text-base font-normal",children:a.nftInfo.symbol})]})}),(0,o.jsxs)("td",{className:"relative whitespace-nowrap px-3 pt-2 text-base font-normal text-[#222222] md:pr-6",children:["$",(0,c.Jg)(a.walletDetails.chainId)?"0":a.lockDetails.feeInUsd]}),(0,o.jsx)("td",{className:"relative whitespace-nowrap px-3 pt-2 text-base font-normal text-[#222222] md:pr-6",children:A()(a.lockDetails.date).format("MMM. DD, YYYY")}),(0,o.jsx)("td",{className:"relative whitespace-nowrap px-3 pt-2 text-base font-normal text-[#222222] md:pr-6",children:A()(a.lockDetails.date).format("hh:mm A z")})]})})]})})}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)(y.zx,{className:"w-full sm:w-auto",disabled:h||!M,onClick:()=>q(),icon:!1,"data-testID":"confirm-button",children:"Confirm transaction"})})]}),!x&&(0,o.jsxs)("div",{className:"p-3 sm:p-6",children:[(0,o.jsx)("h1",{className:"text-lg font-semibold",children:"Create contract"}),(0,o.jsx)("p",{className:"mt-1 text-sm",children:"We need your authorisation before using the NFT. This only needs to be done once."}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)(y.zx,{className:"w-full sm:w-auto",disabled:h||v||!M,isLoading:v,onClick:()=>Q(),icon:!1,children:"Give permission"})})]})]}):(0,o.jsx)(w.Z,{activeStep:a.activeStep,index:n,step:s,goToStep:()=>t({type:r.GO_TO_STEP,payload:n})})]})}A().extend(N()),A().extend(I());var V=[{question:"How much does it cost? ",answer:"This depends on what chain you’re locking your tokens on. See our pricing page for more details."},{question:"Where will I be able to see my locked NFTs?",answer:"You can see and withdraw your NFTs inside our admin dashboard. Simply click ‘Launch app’ and connect your wallet to see this dashboard"}];(n=i||(i={}))[n.SELECT_WALLET=0]="SELECT_WALLET",n[n.SELECT_CHAIN=1]="SELECT_CHAIN",n[n.SELECT_TOKEN=2]="SELECT_TOKEN",n[n.CONFIGURE_LOCK=3]="CONFIGURE_LOCK",n[n.DEPLOY_CONTRACT=4]="DEPLOY_CONTRACT",n[n.OUTCOME=5]="OUTCOME";let B={activeStep:i.SELECT_WALLET,walletDetails:{chainId:"",account:"",errorMsg:""},nftInfo:{address:"",symbol:"",name:"",balance:"0",tokenId:""},lockDetails:{date:"",totalAmount:"",fee:"",feeInUsd:""},approved:!1,success:!1,transactionHash:"",errorMsg:"",requesting:!1,showWaitingConfirmModal:!1,showWaitingScreen:!1,showOutcomeScreen:!1,showStepContainer:!0};function X(e,t){switch(t.type){case"handleNext":return{...e,activeStep:e.activeStep+1,errorMsg:""};case"goToStep":return{...e,activeStep:t.payload};case"handleLastStep":return{...e,activeStep:i.OUTCOME,errorMsg:t.payload.errorMsg};case"handleStartOver":return{...B};case"handleAccountDetailsChanged":return{...B,walletDetails:{...e.walletDetails,chainId:"",errorMsg:t.payload.errorMsg},errorMsg:t.payload.errorMsg,activeStep:t.payload.activeStep,showStepContainer:!0};case"setErrorMsg":return{...e,errorMsg:t.payload.errorMsg};case"setChainId":if(t.payload.chainId!==e.walletDetails.chainId)return{...e,walletDetails:{...e.walletDetails,chainId:t.payload.chainId},nftInfo:B.nftInfo,lockDetails:B.lockDetails,activeStep:e.activeStep+1,errorMsg:""};return{...e,walletDetails:{...e.walletDetails,chainId:t.payload.chainId},activeStep:e.activeStep+1,errorMsg:""};case"setAccount":if(e.walletDetails.account!==t.payload.account)return{...e,walletDetails:{...B.walletDetails,account:t.payload.account},lockDetails:B.lockDetails};return{...e};case"setNftInfo":return{...e,nftInfo:t.payload.nftInfo,lockDetails:B.lockDetails,errorMsg:""};case"resetNftInfo":return{...e,nftInfo:{...B.nftInfo,errorMsg:t.payload.errorMsg},errorMsg:t.payload.errorMsg};case"setLockDetails":return{...e,lockDetails:{...e.lockDetails,fee:t.payload.fee,feeInUsd:t.payload.feeInUsd,totalAmount:t.payload.totalAmount,date:t.payload.date,referralAddress:t.payload.referralAddress,referralSupported:t.payload.referralSupported},activeStep:e.activeStep+1};case"resetLockDetails":return{...e,lockDetails:B.lockDetails,errorMsg:""};case"setApproved":return{...e,approved:!0};case"setRequestingLock":return{...e,showWaitingConfirmModal:!0,requesting:!0};case"setVisibleModalWaitingConfirm":return{...e,showWaitingConfirmModal:t.payload};case"setTransactionHash":return{...e,transactionHash:t.payload.transactionHash,showWaitingConfirmModal:!1,showWaitingScreen:!0,showStepContainer:!1,showOutcomeScreen:!1};case"setOutcome":return{...e,success:t.payload.success,errorMsg:t.payload.errorMsg,activeStep:e.activeStep!==i.OUTCOME?e.activeStep+1:e.activeStep,showWaitingConfirmModal:!1,showWaitingScreen:!1,showOutcomeScreen:!0,showStepContainer:!1,requesting:!1};case"setShowStepContainer":return{...e,showWaitingConfirmModal:!1,showWaitingScreen:!1,showOutcomeScreen:!1,showStepContainer:!0};default:throw Error()}}function Z(e){var t;let{dispatch:a,state:s,step:n,index:i,event:l="db_nft_locks_info_added"}=e,[f,h]=(0,d.useState)(""),[m,S]=(0,d.useState)(!1),[g,T]=(0,d.useState)(""),[A,v]=(0,d.useState)(!1),[N,_]=(0,d.useState)(!1),[I,D]=(0,d.useState)(!1),{address:E}=(0,u.mA)(),{data:C}=(0,u.mx)();async function j(){try{if(_(!0),C){let e=new k.CH(f,F.jc,C),t=await e.supportsInterface("0x5b5e139f");if(!t){D(!1);return}let s=new k.CH(f,F.M9,C),n=await (0,c.bH)(f,E,C),i=await e.supportsInterface("0x80ac58cd"),o=i?await s.symbol():"",l=i?await s.name():"";a({type:r.SET_NFT_INFO,payload:{nftInfo:{address:f,symbol:o,name:l,balance:n,tokenId:g}}}),D(!0)}}catch(e){console.error(e),D(!1),a({type:r.RESET_NFT_INFO,payload:{errorMsg:"NFT details are invalid."}}),p.Tb(e)}finally{_(!1)}}function M(e){h(e);try{b.isAddress(e)?S(!0):S(!1)}catch(e){S(!1),console.error(e)}}function O(e){T(e);try{let t=Number(e);Number.isInteger(t)&&t>=0?v(!0):v(!1)}catch(e){v(!1),console.error(e)}}return(0,d.useEffect)(()=>{f&&g&&(M(f),O(g))},[f,g]),(0,o.jsx)("div",{children:s.activeStep===i?(0,o.jsx)(x.Z,{step:n,errorMsg:s.errorMsg,children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("p",{className:"my-1 text-xs font-medium text-neutral-600",children:"NFT contract address"}),(0,o.jsx)(y.II,{className:"w-full text-sm sm:max-w-[540px]",type:"text",disabled:N||!!s.nftInfo.address,name:"contractAddress",placeholder:"Enter address",value:f,onChange:e=>M(e.target.value)}),(0,o.jsx)("p",{className:"mb-1 mt-6 text-xs font-medium text-neutral-600",children:"NFT TokenID"}),(0,o.jsx)(y.II,{className:"w-full text-sm sm:max-w-[540px]",type:"text",disabled:N||!!s.nftInfo.address,name:"tokenId",placeholder:"Enter TokenID",value:g,onChange:e=>O(e.target.value)}),s.errorMsg&&(0,o.jsx)("p",{className:"my-1 text-xs font-medium text-red-600",children:"Invalid token ID. Please insert a valid token ID."}),!!s.nftInfo.address&&(0,o.jsxs)("div",{className:"my-4 w-full divide-y divide-neutral-200 rounded-md sm:max-w-[540px]",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,o.jsx)("span",{className:"text-base text-[#222222]/60",children:"Name"}),(0,o.jsxs)("div",{className:"inline-flex items-center gap-x-1.5 text-sm font-medium",children:[(0,o.jsx)(y.Oi,{alt:"nft-icon",src:(0,R.XP)(s.nftInfo.address),className:"h-8 w-8 object-contain",chainId:s.walletDetails.chainId}),(0,o.jsx)("span",{className:"text-base font-medium text-[#222222]",children:s.nftInfo.name})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,o.jsx)("span",{className:"text-base text-[#222222]/60",children:"Symbol"}),(0,o.jsx)("span",{className:"text-base font-medium text-[#222222]",children:s.nftInfo.symbol})]})]}),!s.nftInfo.address&&(0,o.jsx)(y.zx,{className:"mt-4 w-full sm:w-fit",disabled:!f||!m||!A||!g||N,isLoading:N,onClick:()=>j(),children:N?"Fetching...":"Search"}),!!s.nftInfo.address&&(0,o.jsx)(y.zx,{className:"mt-4 w-full sm:w-fit",disabled:!I||!s.nftInfo.address,onClick:()=>{window.dataLayer.push({event:l}),a({type:r.HANDLE_NEXT})},children:"Continue"})]})}):(0,o.jsx)(w.Z,{activeStep:s.activeStep,index:i,step:n,goToStep:()=>a({type:r.GO_TO_STEP,payload:i}),children:(0,o.jsx)("div",{children:I&&(0,o.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,o.jsx)(y.Oi,{alt:"nft-icon",src:(0,R.XP)(s.nftInfo.address),className:"h-4 w-4 object-contain",chainId:s.walletDetails.chainId}),(0,o.jsx)("p",{className:"text-sm sm:text-base",children:null===(t=s.nftInfo)||void 0===t?void 0:t.symbol})]})})})})}var K=a(65186),Q=[{title:"Connect wallet",description:"Make sure to connect only the wallet that contains the NFT you would like to lock.",renderLogo:()=>(0,o.jsx)(K.DLc,{className:"h-4 w-4"})},{title:"Select blockchain",description:"Choose the blockchain that your NFT is built on.",renderLogo:()=>(0,o.jsx)(K.pNz,{className:"h-4 w-4"})},{title:"Enter NFT info",description:"Please provide the following two bits of information:",renderLogo:()=>(0,o.jsx)(K.$l_,{className:"h-4 w-4"})},{title:"Add lock details",description:"Set the time period you would like to lock your NFT for.",renderLogo:()=>(0,o.jsx)(K.kVv,{className:"h-4 w-4"})},{title:"Create contract",description:"We need your authorisation before using the NFT. This only needs to be done once.",renderLogo:()=>(0,o.jsx)(K.D6S,{className:"h-4 w-4"})}];function q(){var e;let{address:t}=(0,u.mA)(),{chain:a}=(0,u.LN)(),[s,n]=(0,d.useReducer)(X,B),[p,m]=(0,d.useState)(!1),[x,w]=(0,d.useState)(!0);return(0,d.useEffect)(()=>{s.walletDetails.account&&s.activeStep>i.SELECT_WALLET&&t!==s.walletDetails.account&&n({type:r.HANDLE_ACCOUNT_DETAILS_CHANGED,payload:{errorMsg:"Wallet changed. Please select the correct wallet and continue.",activeStep:i.SELECT_WALLET}})},[t,s.walletDetails.account,n,s.activeStep]),(0,d.useEffect)(()=>{s.activeStep>i.SELECT_CHAIN&&(0,c.i6)(null==a?void 0:a.id)!==s.walletDetails.chainId&&n({type:r.HANDLE_ACCOUNT_DETAILS_CHANGED,payload:{errorMsg:"Blockchain changed. Please select the correct blockchain and continue.",activeStep:i.SELECT_CHAIN}})},[a,s.walletDetails.chainId,n,s.activeStep]),(0,d.useEffect)(()=>{(!s.walletDetails.account&&t||s.activeStep===i.SELECT_WALLET)&&n({type:r.SET_ACCOUNT,payload:{account:t}})},[t,s.walletDetails.account,s.activeStep,n]),(0,o.jsxs)("div",{children:[s.showWaitingScreen&&(0,o.jsx)(l.QD,{logoHeader:h,subText:"Token: ".concat(s.nftInfo.symbol),faqData:V}),s.showOutcomeScreen&&(0,o.jsx)(l.sv,{href:"/",claimHref:"/nft-locks",logoHeader:h,chainId:s.walletDetails.chainId,txHash:s.transactionHash,tokenDetailsPageRef:"https://www.team.finance/view-coin/".concat(s.nftInfo.address).concat((0,c.MN)(null==s?void 0:null===(e=s.nftInfo)||void 0===e?void 0:e.tokenid),"?name=").concat(s.nftInfo.name,"&symbol=").concat(s.nftInfo.symbol,"&chainid=").concat(s.walletDetails.chainId),success:s.success,errorMsg:s.errorMsg,startOver:()=>{window.dataLayer.push({event:"db_nft_locks_try_again"}),n({type:r.HANDLE_START_OVER,payload:null})},title:"Your NFT lock was deployed successfully!",subTitle:"Let your investors and community know that their NFTs are in safe hands. We've prepared a media kit for you to tell them the good news on your website and social media!",buttonText:"Visit NFT locks page",eventSuccess:"db_nft_locks_visit_page",eventsCertification:"db_nft_locks",secureText:"Lock"}),!s.showOutcomeScreen&&!s.showWaitingScreen&&(0,o.jsxs)(l.o3,{href:"/",logoHeader:f,collapsed:p,setCollapsed:m,collapsedMobile:x,setCollapsedMobile:w,title:"Create NFT lock",faqData:V,children:[(0,o.jsx)(l.Rg,{state:s,stepDescriptions:Q,goToStep:e=>{n({type:r.GO_TO_STEP,payload:e})}}),(0,o.jsxs)("div",{className:"mt-4 flex flex-col gap-1",children:[(0,o.jsx)(l.Rk,{step:Q[i.SELECT_WALLET],index:i.SELECT_WALLET,activeStep:s.activeStep,errorMsg:s.errorMsg,event:"db_nft_locks_wallet_connected",goToStep:()=>n({type:r.GO_TO_STEP,payload:i.SELECT_WALLET}),handleNext:()=>n({type:r.HANDLE_NEXT,payload:null})}),(0,o.jsx)(l.jP,{step:Q[i.SELECT_CHAIN],index:i.SELECT_CHAIN,collapsed:p,activeStep:s.activeStep,errorMsg:s.errorMsg,chainId:s.walletDetails.chainId,setChainId:e=>{n({type:r.SET_CHAIN_ID,payload:{chainId:e}}),window.dataLayer.push({event:"db_nft_locks_chain_selected",chain:(0,c.C7)(e)})},goToStep:()=>n({type:r.GO_TO_STEP,payload:i.SELECT_CHAIN})}),(0,o.jsx)(Z,{dispatch:n,state:s,step:Q[i.SELECT_TOKEN],index:i.SELECT_TOKEN,event:"db_nft_locks_info_added"}),(0,o.jsx)(O,{dispatch:n,state:s,step:Q[i.CONFIGURE_LOCK],index:i.CONFIGURE_LOCK,event:"db_nft_locks_details_added"}),(0,o.jsx)(G,{dispatch:n,state:s,step:Q[i.DEPLOY_CONTRACT],index:i.DEPLOY_CONTRACT,approveEvent:"db_nft_locks_gave_permission",lockEventFailure:"db_nft_locks_fail",lockEventSuccess:"db_nft_locks_success"})]})]})]})}var z=a(97729),J=a.n(z),ee=a(55351);function et(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ee.PB,{title:"Team Finance App - Create NFT Locks",titleTemplate:"%s"}),(0,o.jsx)(J(),{children:(0,o.jsx)("link",{rel:"canonical",href:"https://app.team.finance/lockups/nft"})}),(0,o.jsx)(q,{})]})}}},function(e){e.O(0,[424,131,713,195,149,642,286,887,565,1,38,774,888,179],function(){return e(e.s=75753)}),_N_E=e.O()}]);