(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{32509:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vesting",function(){return s(18221)}])},18221:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ee}});var a=s(52322),n=s(79598),i=s(79943),r=s(2784);function c(){return(0,a.jsxs)("div",{className:"space-y-4 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-medium text-blue-600",children:"Create your own token vesting contract"}),(0,a.jsx)("p",{className:"sm:text-lg",children:"All tokens are locked into our audited smart contract and can only be withdrawn by you after lock time expires."})]})}var l,o=s(89616),d=s(53003),m=s(5859);!function(e){e.HANDLE_NEXT="handleNext",e.HANDLE_BACK="handleBack",e.HANDLE_LAST_STEP="handleLastStep",e.HANDLE_START_OVER="handleStartOver",e.SET_OUTCOME="setOutcome",e.SET_TOKEN_INFO="setTokenInfo",e.SET_DATES="setDates",e.SET_VESTING_DETAILS="setVestingDetails",e.SET_APPROVED="setApproved",e.SET_TRANSACTION_HASH="setTransactionHash",e.SET_CHAIN_ID="setChainId",e.SET_REQUESTING_VESTING="setRequestingVesting",e.RESET_TOKEN_INFO="resetTokenInfo",e.SET_VISIBLE_MODAL_WAITING_CONFIRM="setVisibleModalWaitingConfirm",e.SET_VISIBLE_MODAL_VIEW_ETHERSCAN="setVisibleModalViewEtherscan",e.GO_TO_STEP="goToStep"}(l||(l={}));var u=s(92642),h=s(4354),x=s(53062),p=s(24407),f=s(8233),y=s(30705),j=s(18998),v=s(28879),g=s.n(v),N=s(10528),E=s(77962),S=s(32533),T=s(96577),b=s.n(T),w=s(15334),C=s(34352),k=s(77245);function I(e){let{open:t,setOpen:s,amount:n,symbol:i,feeAmount:r,feeCurrency:c}=e;return(0,a.jsxs)(C.Z,{open:t,setOpen:()=>s(!1),children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(k.sOR,{className:"mr-2 h-24 w-24 animate-spin text-blue-700","aria-hidden":"true"})}),(0,a.jsx)("h1",{className:"mt-3 text-lg font-medium",children:"Waiting For Confirmation"}),(0,a.jsxs)("p",{className:"text-neutral-700",children:["Locking"," ",(0,a.jsxs)("span",{className:"font-medium",children:[n," ",i]})," ","with a fee of"," ",(0,a.jsxs)("span",{className:"font-medium",children:[r," ",c]})]}),(0,a.jsx)("span",{className:"mt-3 block rounded-md border border-blue-200 bg-blue-100 py-1 px-2 text-blue-800",children:"Confirm this transaction in your wallet"})]})}function _(e){let{open:t,setOpen:s,chainId:n,transactionHash:i}=e;return(0,a.jsx)(C.Z,{open:t,setOpen:()=>s(!1),children:(0,a.jsxs)("div",{className:"w-72",children:[(0,a.jsx)("div",{className:"my-4 flex items-center justify-center",children:(0,a.jsx)(k.hXj,{className:"mr-2 h-24 w-24 animate-bounce text-blue-700","aria-hidden":"true"})}),(0,a.jsx)("h1",{className:"mb-2 text-lg font-medium",children:"Transaction Submitted"}),(0,a.jsx)(o.EX,{className:"flex justify-center font-medium text-blue-600 hover:underline",href:(0,j.wE)(n,i),children:"View on explorer"}),(0,a.jsx)(o.zx,{className:"mt-4",fullWidth:!0,onClick:()=>s(!1),children:"Close"})]})})}function A(e){let{dispatch:t,state:s}=e;const[n,i]=(0,r.useState)(!1),[c,v]=(0,r.useState)(null),[T,C]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[O,L]=(0,r.useState)("-"),[M]=(0,r.useState)(N.O$.from(0)),{library:D}=(0,d.Ge)(),{appConfluxInfo:V}=(0,m.b)();function H(e){t({type:l.SET_VISIBLE_MODAL_WAITING_CONFIRM,payload:e})}const P=(0,r.useCallback)((async()=>{console.log("get user details"),i(!0);try{const e=(0,p.g)(s.chainId).lockerFactory;console.log("vestingContractAddress",e);const t=(await(0,w.r5)(s.tokenInfo.address,V.account,e,V.provider)).toString();console.log("allow",t),C(t>0);const a=await(0,w.db)(s.tokenInfo.address,V.account,V.provider);L(E.bM(a,s.tokenInfo.decimals)),console.log("bal2",E.bM(a,s.tokenInfo.decimals))}catch(e){console.error(e),t({type:l.SET_OUTCOME,payload:{success:!1,errorMsg:"Couldn't fetch your wallet details. Please try again."}}),u.Tb(e)}finally{i(!1)}}),[s.chainId,s.tokenInfo.address,s.tokenInfo.decimals,V.account,V.provider,t]);return(0,r.useEffect)((()=>{V.account&&P()}),[D,V.account,P]),console.log("sate",s),(0,a.jsxs)("div",{className:"space-y-4 border-t border-neutral-200 ",children:[c&&(0,a.jsx)(h.b,{children:c}),s.showWaitingConfirmModal&&(0,a.jsx)(I,{open:s.showWaitingConfirmModal,setOpen:()=>H(!1),amount:E.bM(s.totalAmount,s.tokenInfo.decimals),symbol:s.tokenInfo.symbol,feeAmount:E.dF(M),feeCurrency:(0,j.tl)(s.chainId)}),s.showViewEtherscanModal&&(0,a.jsx)(_,{open:s.showViewEtherscanModal,setOpen:()=>{return e=!1,void t({type:l.SET_VISIBLE_MODAL_VIEW_ETHERSCAN,payload:e});var e},chainId:s.chainId,transactionHash:s.transactionHash}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"mx-auto flex flex-col items-center justify-center space-y-4 md:max-w-md",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b(),{src:"/icons/lock-tokens.png",alt:"lock-icon",width:75,height:75}),(0,a.jsx)("p",{className:"text-gray-500",children:"Create Contract"})]}),(0,a.jsxs)("div",{className:"mb-4 mt-4 w-full divide-y divide-neutral-200 rounded-md border border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Symbol"}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-x-1.5 font-medium",children:[s.tokenInfo.symbol,(0,a.jsx)(o.Oi,{alt:"logo",src:(0,y.XP)(s.tokenInfo.address),chainId:s.chainId,className:"h-8 w-8 object-contain"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Token Address"}),(0,a.jsx)("span",{className:"font-medium",children:(0,y.Xn)(s.tokenInfo.address,6)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Balance"}),(0,a.jsxs)("span",{className:"font-medium",children:[O," ",s.tokenInfo.symbol]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Start"}),(0,a.jsx)("span",{className:"font-medium",children:g().unix(s.startTimestamp).format("MM/DD/YYYY")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"End"}),(0,a.jsx)("span",{className:"font-medium",children:g().unix(s.endTimestamp).format("MM/DD/YYYY")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Total Tokens"}),(0,a.jsx)("span",{className:"font-medium",children:"".concat(E.bM(s.totalAmount,s.tokenInfo.decimals)," ").concat(s.tokenInfo.symbol)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Fee"}),(0,a.jsxs)("span",{className:"font-medium",children:[E.bM(M,18)," ","CFX"]})]})]}),(0,a.jsxs)("div",{className:"inline-flex w-full space-x-4",children:[(0,a.jsx)(o.zx,{fullWidth:!0,disabled:T||n||k,isLoading:k&&!T,onClick:()=>(async()=>{A(!0);try{console.log("amount",s.totalAmount);const e=await(0,w.o3)(V.provider);console.log("gasPrice2",e);const t=(0,p.g)(s.chainId).lockerFactory;console.log("vestingContractAddress",t),await(0,w.tN)(s.tokenInfo.address,s.account,s.totalAmount.toString(),e,t,V.provider),C(!0),v(""),window.dataLayer.push({event:"approve-vesting"})}catch(e){v("There was an error. Please try again."),console.error("error on approving vesting factory",e),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")||e.message.includes("User rejected request")||u.Tb(e)}finally{A(!1)}})(),children:k&&!T?"Approving...":"Approve"}),(0,a.jsx)(o.zx,{fullWidth:!0,disabled:n||!T,isLoading:n&&T,onClick:()=>(async()=>{i(!0),v("");try{window.dataLayer.push({event:"confirm-transaction-vesting"});const e=(0,p.g)(s.chainId).vestingFactory,a=new f.kA(e,D.getSigner());t({type:l.SET_REQUESTING_VESTING});const n=await a.getFeeInETH(s.tokenInfo.address),r=await a.createVesting(s.tokenInfo.address,s.merkleRoot,s.startTimestamp,s.endTimestamp,s.totalAmount,{value:n});t({type:l.SET_TRANSACTION_HASH,payload:{transactionHash:r.hash}});const c=await r.wait();window.dataLayer.push({event:"outcome-success-vesting"});const o=new S.vU(x.vP),d=c.logs.find((t=>t.address===e)),m=o.parseLog(d);await(0,j.Vb)(s.chainId,r.hash),t({type:l.SET_OUTCOME,payload:{success:!0,errorMsg:null,vestingAddress:m.args.vestingAddr}})}catch(e){window.dataLayer.push({event:"outcome-fail-vesting"}),v("Error deploying vesting."),console.error("error deploying vesting",e),H(!1),e.message.includes("user rejected transaction")||e.message.includes("transaction was replaced")||e.message.includes("User rejected request")||u.Tb(e)}finally{i(!1)}})(),children:"Continue"})]})]})})]})}var O=s(72779),L=s.n(O),M=s(72282),D=s.n(M),V=s(18978);function H(e){let{dispatch:t,state:s}=e;const[n,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"mx-auto max-w-lg p-4",children:[(0,a.jsxs)("div",{className:"space-y-2 text-center",children:[(0,a.jsx)(b(),{src:"/icons/lock-tokens.png",alt:"lock-icon",width:75,height:75}),(0,a.jsx)("div",{className:L()({"text-green-500":s.success,"text-red-500":!s.success},"flex items-center justify-center gap-x-1.5 text-center text-lg font-medium uppercase"),children:s.success?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.FJM,{size:20})," Success"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.G5m,{size:20})," Failure"]})})]}),!s.success&&(0,a.jsx)("div",{className:"mt-2 text-center text-gray-900",children:s.errorMsg}),s.transactionHash&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex truncate py-4 text-center text-gray-600",children:["Transaction Hash:",(0,a.jsx)(D(),{text:s.transactionHash,onCopy:()=>{i(!0),setTimeout((()=>{i(!1)}),1500)},children:(0,a.jsxs)("div",{className:"inline-flex items-center truncate text-gray-800",children:[(0,a.jsx)("div",{className:"ml-1 truncate",children:s.transactionHash}),(0,a.jsx)("div",{children:n?(0,a.jsx)(V.FJM,{size:14}):(0,a.jsx)(V.esY,{size:14})})]})})]}),(0,a.jsxs)("div",{className:"mb-4 flex truncate text-center text-gray-600",children:["Vesting Address:",(0,a.jsx)(D(),{text:s.vestingAddress,onCopy:()=>{d(!0),setTimeout((()=>{d(!1)}),1500)},children:(0,a.jsxs)("div",{className:"inline-flex items-center truncate text-gray-800",children:[(0,a.jsx)("div",{className:"ml-1 truncate",children:s.vestingAddress}),(0,a.jsx)("div",{children:c?(0,a.jsx)(V.FJM,{size:14}):(0,a.jsx)(V.esY,{size:14})})]})})]}),(0,a.jsx)(o.ZP,{fullWidth:!0,variant:"secondary",href:(0,j.wE)(s.chainId,s.transactionHash),children:"View transaction on explorer"})]}),(0,a.jsx)(o.zx,{className:"mt-4",fullWidth:!0,disabled:!1,onClick:()=>t({type:l.HANDLE_START_OVER}),children:"Start Over"})]})}var P=s(71531),R=s(90654);function W(e){let{dispatch:t}=e;const[s,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!0),[p,f]=(0,r.useState)(!0),[y,j]=(0,r.useState)(new Date(Date.now()+2592e6)),[v,N]=(0,r.useState)(new Date(Date.now()+5184e6));async function E(e){try{if(n(!0),j(e),p&&e>v)return c("Start Date is after End Date."),void x(!1);c(""),x(!0)}catch(t){console.error(t),c("Start date is invalid.")}finally{n(!1)}}async function S(e){try{if(n(!0),N(e),u&&y>e)return m("End Date is before Start Date."),void f(!1);m(""),f(!0)}catch(t){console.error(t),m("End date is invalid.")}finally{n(!1)}}return(0,a.jsxs)("div",{className:"space-y-4 border-t border-neutral-200 ",children:[!u&&i?(0,a.jsx)(h.b,{children:i}):!p&&d&&(0,a.jsx)(h.b,{children:d}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"mx-auto flex flex-col items-center justify-center space-y-4 md:max-w-md",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b(),{src:"/icons/lock-tokens.png",alt:"lock-icon",width:75,height:75}),(0,a.jsx)("p",{className:"text-gray-500",children:"Please insert start timestamp and end timestamp."})]}),(0,a.jsxs)("div",{className:"grid w-full grid-cols-2 gap-4 rounded-md border border-gray-300 px-4 py-3",children:[(0,a.jsxs)("div",{className:"w-full space-y-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-800",children:"Start Date"}),(0,a.jsx)(P.Z,{unlockDate:y,setUnlockDate:e=>E(e),disabled:s})]}),(0,a.jsxs)("div",{className:"w-full space-y-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-800",children:"Start Time"}),(0,a.jsx)(R.Z,{unlockTime:y,setUnlockTime:e=>E(e),disabled:s})]})]}),!u&&(0,a.jsx)("span",{className:"mt-1 ml-1 text-sm font-medium text-red-500",children:i}),(0,a.jsxs)("div",{className:"mt-4 grid w-full grid-cols-2 gap-4 rounded-md border border-gray-300 px-4 py-3",children:[(0,a.jsxs)("div",{className:"w-full space-y-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-800",children:"End Date"}),(0,a.jsx)(P.Z,{unlockDate:v,setUnlockDate:e=>S(e),disabled:s})]}),(0,a.jsxs)("div",{className:"w-full space-y-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-800",children:"End Time"}),(0,a.jsx)(R.Z,{unlockTime:v,setUnlockTime:e=>S(e),disabled:s})]})]}),!p&&(0,a.jsx)("span",{className:"mt-1 ml-1 text-sm font-medium text-red-500",children:d}),(0,a.jsx)(o.zx,{fullWidth:!0,disabled:!u||!p||s||!v||!y,isLoading:s,onClick:()=>(()=>{const e=g()(y).unix(),s=g()(v).unix();t({type:l.SET_DATES,payload:{startTimestamp:e,endTimestamp:s}})})(),children:"Continue"})]})})]})}function F(e){let{dispatch:t,state:s}=e;const[n,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[x,p]=(0,r.useState)("-"),[f,j]=(0,r.useState)(null),{appConfluxInfo:v}=(0,m.b)();return(0,a.jsxs)("div",{className:"space-y-4 border-t border-neutral-200 ",children:[f&&(0,a.jsx)(h.b,{children:f}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"mx-auto flex flex-col items-center justify-center space-y-4 md:max-w-md",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b(),{src:"/icons/lock-tokens.png",alt:"lock-icon",width:75,height:75}),(0,a.jsx)("p",{className:"text-gray-500",children:"Please insert the token contract address."})]}),(0,a.jsx)(o.II,{type:"text",name:"search",fullWidth:!0,placeholder:"0x...",onChange:e=>async function(e){try{if(i(!0),(0,w.Ec)(e)){const s=await(0,w.V6)(e,v.provider),{symbol:a,decimals:n}=s,i=await(0,w.db)(e,v.account,v.provider);p(E.bM(i,n)),t({type:l.SET_TOKEN_INFO,payload:{tokenInfo:{address:e,symbol:a,decimals:n,balance:i}}}),a&&n?(d(!0),j(null)):(d(!1),j("Token address is invalid."),c&&t({type:l.RESET_TOKEN_INFO}))}else c&&t({type:l.RESET_TOKEN_INFO}),d(!1),j("Token address is invalid.")}catch(s){console.error(s),j("Token address is invalid."),u.Tb(s)}finally{i(!1)}}(e.target.value)}),s.tokenInfo.symbol&&(0,a.jsxs)("div",{className:"w-full divide-y divide-neutral-200 rounded-md border border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Symbol"}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-x-1.5 font-medium",children:[s.tokenInfo.symbol,(0,a.jsx)(o.Oi,{alt:"logo",src:(0,y.XP)(s.tokenInfo.address),className:"h-8 w-8 object-contain",chainId:s.chainId})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Balance"}),(0,a.jsx)("span",{className:"font-medium",children:x})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4",children:[(0,a.jsx)("span",{className:"text-neutral-500",children:"Decimals"}),(0,a.jsx)("span",{className:"font-medium",children:s.tokenInfo.decimals})]})]}),(0,a.jsx)(o.zx,{fullWidth:!0,disabled:!c,isLoading:n,onClick:()=>{window.dataLayer.push({event:"input-token-address-vesting"}),t({type:l.HANDLE_NEXT})},children:"Continue"})]})})]})}var U=s(25224);const z=["SELECT_CHAIN","SELECT_TOKEN","SELECT_DATE","UPLOAD_CSV","DEPLOY_CONTRACT","OUTCOME"];function Y(e){let{activeStep:t,dispatch:s}=e;return(0,a.jsxs)("nav",{className:"flex items-center justify-center","aria-label":"Progress",children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Step ",t+1," of ",z.length]}),(0,a.jsx)("ol",{className:"ml-6 flex items-center space-x-5",children:z.map(((e,n)=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{type:"button",className:L()({"bg-blue-600 ring-[0.2rem] hover:bg-blue-800":n===t,"bg-gray-300 ":n>t,"bg-blue-600":n<t},"block h-2.5 w-2.5 rounded-full"),disabled:0===t||t===z.length-1||n>=t,onClick:()=>s({type:U.a.GO_TO_STEP,payload:n}),children:(0,a.jsx)("span",{className:"sr-only",children:e})})},e)))})]})}var G,X=s(90286),K=s.n(X);function B(e){let{dispatch:t,state:s,library:n}=e;const[i,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null);console.log(s);return(0,a.jsxs)("div",{className:"space-y-4 border-t border-neutral-200 ",children:[i&&(0,a.jsx)(h.b,{variant:"red",children:i}),f&&d&&(0,a.jsx)(h.b,{variant:"blue",children:"CSV file successfully uploaded: ".concat(f.name)}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"mx-auto flex flex-col items-center justify-center space-y-4 md:max-w-md",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b(),{src:"/icons/lock-tokens.png",alt:"lock-icon",width:75,height:75}),(0,a.jsx)("p",{className:"text-gray-500",children:"Upload CSV"})]}),!d&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Click the button below to upload a CSV from your device"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"mb-3 mt-2 w-full",children:(0,a.jsx)("input",{className:" form-control m-0 block w-full rounded border border-solid border-gray-300 bg-white bg-clip-padding px-1.5 py-1.5 text-base font-normal text-gray-700 transition ease-in-out focus:border-blue-600 focus:bg-white focus:text-gray-700 focus:outline-none",id:"file_input",type:"file",disabled:x,onChange:async e=>{try{let a=N.O$.from(0);const n=e.target.files?e.target.files[0]:null;if(!n)return;y(n),K().parse(n,{skipEmptyLines:!0,header:!1,complete:async e=>{try{var n;p(!0);const r={},o=[];if((await Promise.all(null===(n=e.data)||void 0===n?void 0:n.map((async(e,t)=>{if(3!==e.length)return c("Error while parsing CSV file: Line ".concat(t+1," is invalid.")),!1;let n=e[0];try{if(!(0,w.Ec)(n))return c("Error while parsing CSV file: ".concat(n," is not a valid address")),!1}catch(d){return c("Error while parsing CSV file: ".concat(n," is not a valid address")),!1}let i,l=e[1];try{if(!(e=>{const t=e.substr(e.length-1);return("M"===t||"D"===t||"H"===t||"W"===t)&&!!parseInt(e.substr(0,e.length-1))})(l))return c("Error while parsing CSV file: ".concat(l," is not a valid period")),!1}catch(d){return c("Error while parsing CSV file: ".concat(l," is not a valid period")),!1}try{i=E.vz(e[2],s.tokenInfo.decimals),a=a.add(i)}catch(d){return c("Error while parsing the CSV: Amount is invalid on line ".concat(t+1)),!1}return r[n]?(c("Error while parsing the CSV: ".concat(n," can only be used once per upload. Please remove duplicates.")),!1):(o.push({address:n,earnings:i.toHexString(),period:l,reasons:""}),r[n]=!0,!0)})))).every((e=>!0===e)))try{c(""),m(!0),t({type:l.SET_VESTING_DETAILS,payload:{balanceArray:o,totalAmount:a}})}catch(i){console.error(i),c("Can't post details to database.")}}catch(i){console.error(i)}finally{p(!1)}}})}catch(a){console.error(a),c("Something went wrong"),u.Tb(a)}}})})}),(0,a.jsx)(o.EX,{className:"flex justify-center font-medium text-blue-600 hover:underline",href:"/assets/Sample-v1.csv",children:"Click here to download a sample CSV"})]}),(0,a.jsx)(o.zx,{fullWidth:!0,disabled:x||!d,isLoading:x,onClick:()=>{window.dataLayer.push({event:"upload-csv-vesting"}),t({type:l.HANDLE_NEXT})},children:"Continue"})]})})]})}function q(e){let{state:t,dispatch:s}=e;const{library:n}=(0,d.Ge)(),{appConfluxInfo:i}=(0,m.b)();return(0,r.useEffect)((()=>{i.chainId===t.chainId&&i.account===t.account||s({type:l.HANDLE_LAST_STEP,payload:{errorMsg:"Wallet details changed"}})}),[i.chainId,i.account,t.chainId,t.account,s]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"rounded-xl border border-neutral-200 bg-white",children:[(0,a.jsx)("div",{className:"rounded-t-xl bg-neutral-100 p-4",children:(0,a.jsx)(Y,{activeStep:t.activeStep,dispatch:s})}),t.activeStep===G.SELECT_TOKEN&&(0,a.jsx)(F,{dispatch:s,state:t}),t.activeStep===G.SELECT_DATE&&(0,a.jsx)(W,{dispatch:s}),t.activeStep===G.UPLOAD_CSV&&(0,a.jsx)(B,{dispatch:s,state:t,library:n}),t.activeStep===G.DEPLOY_CONTRACT&&(0,a.jsx)(A,{dispatch:s,state:t}),t.activeStep===G.OUTCOME&&(0,a.jsx)(H,{dispatch:s,state:t})]}),(0,a.jsx)("div",{className:"pt-5 text-center",children:(0,a.jsxs)("p",{className:"text-md",children:["By locking tokens into this smart contract you agree to our"," ",(0,a.jsx)(o.EX,{className:"text-blue-600 hover:underline",href:"/terms",children:"Terms and Conditions"}),"."]})})]})}!function(e){e[e.SELECT_CHAIN=0]="SELECT_CHAIN",e[e.SELECT_TOKEN=1]="SELECT_TOKEN",e[e.SELECT_DATE=2]="SELECT_DATE",e[e.UPLOAD_CSV=3]="UPLOAD_CSV",e[e.DEPLOY_CONTRACT=4]="DEPLOY_CONTRACT",e[e.OUTCOME=5]="OUTCOME"}(G||(G={}));const Z={activeStep:G.SELECT_CHAIN,chainId:"",account:"",tokenInfo:{address:"",symbol:"",decimals:18,balance:N.O$.from(0)},approved:!1,success:!1,transactionHash:"",errorMsg:"",requesting:!1,showWaitingConfirmModal:!1,showViewEtherscanModal:!1,merkleRoot:"",totalAmount:N.O$.from(0),vestingAddress:"",startTimestamp:0,endTimestamp:0};function $(e,t){switch(t.type){case"handleNext":return{...e,activeStep:e.activeStep+1};case"handleBack":return e.activeStep<=G.SELECT_TOKEN?{...e,tokenInfo:Z.tokenInfo,errorMsg:"",activeStep:e.activeStep-1}:{...e,activeStep:e.activeStep-1};case"goToStep":return e.activeStep<=G.SELECT_TOKEN?{...e,tokenInfo:Z.tokenInfo,errorMsg:"",activeStep:t.payload}:{...e,activeStep:t.payload};case"handleLastStep":return{...e,activeStep:G.OUTCOME,errorMsg:t.payload.errorMsg};case"handleStartOver":return{...Z};case"setChainId":return{...e,chainId:t.payload.chainId,account:t.payload.account,activeStep:e.activeStep+1};case"setTokenInfo":return{...e,tokenInfo:t.payload.tokenInfo};case"setDates":return{...e,startTimestamp:t.payload.startTimestamp,endTimestamp:t.payload.endTimestamp,activeStep:e.activeStep+1};case"resetTokenInfo":return{...e,tokenInfo:Z.tokenInfo};case"setVestingDetails":return{...e,merkleRoot:t.payload.merkleRoot,totalAmount:t.payload.totalAmount};case"setApproved":return{...e,approved:!0};case"setRequestingVesting":return{...e,showWaitingConfirmModal:!0,requesting:!0};case"setVisibleModalWaitingConfirm":return{...e,showWaitingConfirmModal:t.payload};case"setVisibleModalViewEtherscan":return{...e,showViewEtherscanModal:t.payload};case"setTransactionHash":return{...e,transactionHash:t.payload.transactionHash,showWaitingConfirmModal:!1,showViewEtherscanModal:!0};case"setOutcome":return{...e,success:t.payload.success,errorMsg:t.payload.errorMsg,vestingAddress:t.payload.vestingAddress,activeStep:e.activeStep!==G.OUTCOME?e.activeStep+1:e.activeStep,showWaitingConfirmModal:!1,showViewEtherscanModal:!1,requesting:!1};default:throw new Error}}var J=s(97729),Q=s.n(J);function ee(){const[e,t]=(0,r.useReducer)($,Z);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q(),{children:(0,a.jsx)("title",{children:"Team Finance: Token & Liquidity Locks + Launch Tokens & Vesting Contracts"},"title")}),(0,a.jsxs)(n.W,{children:[(0,a.jsx)(c,{}),e.activeStep===G.SELECT_CHAIN&&(0,a.jsx)(i.oT,{title:"Create New Vesting",subtitle:"Choose the blockchain that the token you are vesting is built on.",dispatch:t,chainSelectorType:"vesting"}),e.activeStep>G.SELECT_CHAIN&&(0,a.jsx)(q,{state:e,dispatch:t})]})]})}}},function(e){e.O(0,[713,789,403,726,760,680,559,943,774,888,179],(function(){return t=32509,e(e.s=t);var t}));var t=e.O();_N_E=t}]);